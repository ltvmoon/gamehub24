import{u as e,b as s,j as t}from"./index-CQU6Vfh9.js";import{l as n,a5 as a,A as l,X as i,a6 as r,V as c,o,aa as d}from"./react-vendor-BU9riI0p.js";import"./socket-DRbsQkF5.js";import"./zustand-B2Hl4ohO.js";function h({game:h,currentUserId:x}){const m=h,[g,u]=n.useState(m.getState()),[p,b]=n.useState(!1),{ti:v,ts:j}=e(),{confirm:w}=s();n.useEffect(()=>m.onUpdate(u),[m]);const f=m.getMyColor(),y=g.turn,N=y===f,k="playing"===g.gamePhase&&N?m.getValidMoves(f):[],q=m.getPieceCount(),C=m.isHost,P=(e,s)=>k.some(([t,n])=>t===e&&n===s),R=(e,s,n)=>{const a=P(s,n),l=g.lastMove?.row===s&&g.lastMove?.col===n,i=g.flippedCells?.some(e=>e.row===s&&e.col===n);return t.jsxs("button",{onClick:()=>((e,s)=>{"playing"===g.gamePhase&&N&&P(e,s)&&m.requestMove(e,s)})(s,n),className:`\n          aspect-square flex items-center justify-center\n          bg-green-700 border border-green-800\n          ${a?"cursor-pointer hover:bg-green-600":"cursor-default"}\n          ${l?"ring-2 ring-yellow-400 ring-inset":""}\n        `,disabled:!a,children:[e&&t.jsx("div",{className:`\n              w-[80%] h-[80%] rounded-full shadow-lg\n              ${"black"===e?"bg-gray-900":"bg-white"}\n              ${l?"scale-110":""}\n              ${i?"animate-flip":""}\n            `,style:i?{animation:"flip 0.4s ease-in-out"}:void 0}),!e&&a&&t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/50"})]},`${s}-${n}`)};return t.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 w-full max-w-2xl mx-auto pb-14",children:[p?t.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 p-4",onClick:()=>b(!1),children:t.jsxs("div",{className:"bg-slate-800 rounded-xl max-w-2xl w-full max-h-[90%] flex flex-col shadow-2xl border border-slate-600",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(d,{className:"w-6 h-6 text-yellow-500"}),v({en:"Game Rules",vi:"Luáº­t ChÆ¡i"})]}),t.jsx("button",{onClick:()=>b(!1),className:"p-1 hover:bg-slate-700 rounded transition-colors text-white",children:t.jsx(i,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar text-slate-300",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{children:v({en:"Reversi (Othello) is a strategy board game for two players, played on an 8Ã—8 uncheckered board.",vi:"Reversi (Othello) lÃ  trÃ² chÆ¡i chiáº¿n thuáº­t cho 2 ngÆ°á»i, chÆ¡i trÃªn bÃ n cá» 8x8."})}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:v({en:"Objective",vi:"Má»¥c tiÃªu"})}),t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.jsx("li",{children:v({en:"Have the majority of disks on the board turned to display your color when the last playable empty square is filled.",vi:"Chiáº¿m Ä‘Æ°á»£c nhiá»u Ã´ trÃªn bÃ n cá» nháº¥t báº±ng mÃ u cá»§a mÃ¬nh khi trÃ² chÆ¡i káº¿t thÃºc."})})}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:v({en:"Gameplay",vi:"Luáº­t chÆ¡i"})}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[t.jsx("li",{children:v({en:"Players take turns placing disks on the board with their assigned color facing up.",vi:"NgÆ°á»i chÆ¡i láº§n lÆ°á»£t Ä‘áº·t quÃ¢n cá» cá»§a mÃ¬nh lÃªn bÃ n."})}),t.jsx("li",{children:v({en:"During a play, any disks of the opponent's color that are in a straight line and bounded by the disk just placed and another disk of the current player's color are turned over to the current player's color.",vi:"Náº¿u báº¡n Ä‘áº·t quÃ¢n cá» káº¹p giá»¯a quÃ¢n Ä‘á»‘i phÆ°Æ¡ng (hÃ ng ngang, dá»c, chÃ©o), cÃ¡c quÃ¢n Ä‘Ã³ sáº½ bá»‹ láº­t sang mÃ u cá»§a báº¡n."})}),t.jsx("li",{children:v({en:"If you cannot make a valid move (capture at least one opponent's disk), you must pass your turn.",vi:"Náº¿u khÃ´ng cÃ³ nÆ°á»›c Ä‘i há»£p lá»‡ (Äƒn Ã­t nháº¥t 1 quÃ¢n), báº¡n pháº£i bá» lÆ°á»£t."})})]}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:v({en:"Winning",vi:"Chiáº¿n tháº¯ng"})}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[t.jsx("li",{children:v({en:"The game ends when neither player can move.",vi:"TrÃ² chÆ¡i káº¿t thÃºc khi cáº£ 2 bÃªn khÃ´ng cÃ²n nÆ°á»›c Ä‘i."})}),t.jsx("li",{children:v({en:"The player with the most disks on the board wins.",vi:"NgÆ°á»i cÃ³ nhiá»u quÃ¢n cá» nháº¥t trÃªn bÃ n sáº½ tháº¯ng."})})]})]})})]})}):null,t.jsx("style",{dangerouslySetInnerHTML:{__html:"\n@keyframes flip {\n  0% { transform: rotateY(0deg) scale(1); }\n  50% { transform: rotateY(90deg) scale(1.1); }\n  100% { transform: rotateY(180deg) scale(1); }\n}\n"}}),t.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-800 rounded-lg w-full max-w-md",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:v({en:"Players",vi:"NgÆ°á»i chÆ¡i"})}),[g.players.black,g.players.white].map((e,s)=>{const n=["black","white"],l=g.turn===n[s];return t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg "+(l?"bg-slate-600 ring-2 ring-yellow-400":"bg-slate-700"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-6 h-6 rounded-full ${"black"===n[s]?"bg-gray-900":"bg-white"} ${"black"===n[s]?"text-white":"text-black"}`,children:"black"===n[s]?q.black:q.white}),t.jsxs("span",{className:"text-white",children:[e?e.username:"(waiting...)",e?.isBot&&" ðŸ¤–"]})]}),e?.isBot&&C&&t.jsx("button",{onClick:()=>m.requestRemoveBot(),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:v({en:"Remove",vi:"XÃ³a"})}),C&&!e&&t.jsxs("button",{onClick:()=>m.requestAddBot(),className:"flex items-center gap-2 p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[t.jsx(a,{className:"w-4 h-4"}),v({en:"Add Bot",vi:"ThÃªm Bot"})]})]},s)})]}),"playing"===g.gamePhase&&t.jsxs("div",{className:"text-lg text-gray-400",children:[N?t.jsx("span",{className:"text-green-400",children:v({en:"Your turn!",vi:"LÆ°á»£t cá»§a báº¡n!"})}):t.jsxs("span",{children:[v({en:"Waiting for",vi:"Äang chá»"})," ",g.players[y]?.username," ",v({en:"...",vi:"..."})]}),0===k.length&&N&&t.jsx("span",{className:"ml-2 text-yellow-400",children:v({en:"No valid moves - must pass",vi:"KhÃ´ng cÃ³ nÆ°á»›c Ä‘i há»£p lá»‡ - pháº£i bá» lÆ°á»£t"})})]}),g.undoRequest&&g.undoRequest.fromId!==x&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 shadow-xl max-w-sm mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:v({en:"Undo Request",vi:"YÃªu cáº§u hoÃ n tÃ¡c"})}),t.jsxs("p",{className:"text-gray-400 mb-4",children:[g.undoRequest.fromName," ",v({en:"wants to undo their last move",vi:"muá»‘n hoÃ n tÃ¡c nÆ°á»›c Ä‘i vá»«a rá»“i"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>m.acceptUndo(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(l,{className:"w-4 h-4"})," ",v({en:"Accept",vi:"Äá»“ng Ã½"})]}),t.jsxs("button",{onClick:()=>m.declineUndo(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors",children:[t.jsx(i,{className:"w-4 h-4"})," ",v({en:"Decline",vi:"Tá»« chá»‘i"})]})]})]})}),g.undoRequest&&g.undoRequest.fromId===x&&t.jsx("div",{className:"text-yellow-400 text-sm",children:v({en:"Waiting for opponent to accept undo...",vi:"Äang chá» Ä‘á»‘i thá»§ cháº¥p nháº­n hoÃ n tÃ¡c..."})}),"ended"===g.gamePhase&&t.jsxs("div",{className:"text-center p-4 bg-slate-800 rounded-lg",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:v({en:"Game Over!",vi:"TrÃ² chÆ¡i káº¿t thÃºc!"})}),t.jsx("p",{className:"text-gray-300 mb-4",children:"draw"===g.winner?v({en:"It's a draw!",vi:"HÃ²a!"}):g.winner===x?v({en:"ðŸŽ‰ You won!",vi:"ðŸŽ‰ Báº¡n Ä‘Ã£ tháº¯ng!"}):`${[g.players.black,g.players.white].find(e=>e?.id===g.winner)?.username}{" "}\n                  ${v({en:"wins!",vi:"tháº¯ng!"})}`}),t.jsxs("p",{className:"text-gray-400",children:[v({en:"Black",vi:"Äen"}),": ",q.black," |"," ",v({en:"White",vi:"Tráº¯ng"}),": ",q.white]})]}),t.jsxs("div",{className:"flex gap-3",children:["waiting"===g.gamePhase&&t.jsxs(t.Fragment,{children:[C&&m.canStartGame()&&t.jsxs("button",{onClick:()=>m.requestStartGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(r,{className:"w-4 h-4"})," ",v({en:"Start Game",vi:"Báº¯t Ä‘áº§u"})]}),!C&&t.jsx("div",{children:v({en:"Waiting for host to start game...",vi:"Äang chá» chá»§ phÃ²ng báº¯t Ä‘áº§u trÃ² chÆ¡i..."})})]}),"playing"===g.gamePhase&&t.jsxs(t.Fragment,{children:[N&&0===k.length&&t.jsx("button",{onClick:()=>m.requestPass(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-colors",children:v({en:"Pass Turn",vi:"Bá» lÆ°á»£t"})}),g.moveHistory.length>0&&!g.undoRequest&&t.jsxs("button",{onClick:()=>m.requestUndo(),className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:[t.jsx(c,{className:"w-4 h-4"})," ",v({en:"Undo",vi:"HoÃ n tÃ¡c"})]}),C&&t.jsxs("button",{onClick:async()=>{await w(j({en:"Are you sure you want to reset the game?",vi:"Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n reset trÃ² chÆ¡i?"}),j({en:"Reset Game",vi:"ChÆ¡i láº¡i"}))&&m.requestNewGame()},className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:[t.jsx(o,{className:"w-4 h-4"})," ",v({en:"Play Again",vi:"ChÆ¡i láº¡i"})]})]}),"ended"===g.gamePhase&&t.jsxs("button",{onClick:()=>m.requestNewGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(o,{className:"w-4 h-4"})," ",v({en:"Play Again",vi:"ChÆ¡i láº¡i"})]})]}),t.jsx("button",{onClick:()=>b(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:j({en:"Rules",vi:"Luáº­t chÆ¡i"}),children:t.jsx(d,{size:24})}),t.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-lg overflow-hidden shadow-xl border-4 border-green-900 w-full max-w-[500px]",children:g.board.map((e,s)=>e.map((e,t)=>R(e,s,t)))})]})}export{h as default};
