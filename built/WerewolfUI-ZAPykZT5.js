import{b as e,u as s,j as t,a}from"./index-CQU6Vfh9.js";import{l as i,am as l,an as n,ao as r,V as c,a6 as o,ad as d,af as h,ap as x,aa as m,X as u,U as g,aq as p,Q as f,M as j,ar as v,s as b,as as w,I as N,a5 as y,_ as k,q as S,at as C,au as T,a8 as R,b as A,A as P,aj as I,av as q,E as B,H as M,y as V,aw as H,ax as L,ay as G}from"./react-vendor-BU9riI0p.js";import"./socket-DRbsQkF5.js";import{a as $,Q as E,D as U}from"./types-y2DK45ij.js";import"./zustand-B2Hl4ohO.js";const W=e=>{switch(e){case"night":return t.jsx(j,{className:"w-5 h-5"});case"morning":return t.jsx(r,{className:"w-5 h-5"});case"discussion":return t.jsx(f,{className:"w-5 h-5"});case"voting":return t.jsx(n,{className:"w-5 h-5"});case"elimination":case"hunterRevenge":return t.jsx(p,{className:"w-5 h-5"});default:return t.jsx(g,{className:"w-5 h-5"})}},D=({endTime:e,isPaused:s,pausedTimeRemaining:a})=>{const[l,n]=i.useState(0);if(i.useEffect(()=>{if(s&&null!=a)return void n(Math.max(0,Math.floor(a/1e3)));if(!e)return;const t=()=>n(Math.max(0,Math.floor((e-Date.now())/1e3)));t();const i=setInterval(t,1e3);return()=>clearInterval(i)},[e,s,a]),!e&&!a)return null;const r=Math.floor(l/60),c=l%60;return t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full text-lg font-bold font-mono transition-colors "+(s?"bg-yellow-500/30 text-yellow-400":l<=15?"bg-red-500/30 text-red-400 animate-bounce":"bg-white/15 text-white"),children:[s?t.jsx(d,{className:"w-5 h-5"}):t.jsx(v,{className:"w-5 h-5"}),r,":",c.toString().padStart(2,"0")]})},z=({state:e,currentUserId:a})=>{const{ti:l}=s(),n=i.useMemo(()=>{const s={};e.logs.forEach(e=>{s[e.day]||(s[e.day]=[]),s[e.day].push({type:"log",data:e})}),e.chatMessages.forEach(e=>{const t=e.day||1;s[t]||(s[t]=[]),s[t].push({type:"chat",data:e})});const t=e.players.find(e=>e.id===a);return t?.history&&t.history.forEach(e=>{s[e.day]||(s[e.day]=[]),s[e.day].push({type:"log",data:{id:e.id,message:e.content,type:e.type,timestamp:e.timestamp,day:e.day}})}),Object.keys(s).forEach(e=>{const t=Number(e);s[t].sort((e,s)=>s.data.timestamp-e.data.timestamp)}),s},[e.logs,e.chatMessages,e.players,a]),r=Object.keys(n).map(Number).sort((e,s)=>s-e);return 0===e.logs.length&&0===e.chatMessages.length?null:t.jsx("div",{className:"h-full overflow-y-auto pb-16 px-2 pt-0",children:r.map(e=>{const s=n[e],a=[];return s.forEach(e=>{const s=a[a.length-1];"chat"===e.type&&"chat"===s?.type&&s.data[0].playerName===e.data.playerName?s.data.push(e.data):"chat"===e.type?a.push({type:"chat",data:[e.data]}):a.push(e)}),t.jsxs("div",{className:"mb-4 relative",children:[t.jsxs("div",{className:"sticky top-0 z-10 py-1.5 bg-slate-900/95 backdrop-blur border-b border-white/10 mb-2 flex items-center gap-2",children:[t.jsx("div",{className:"p-1 rounded bg-blue-500/20 text-blue-400",children:0===e?t.jsx(b,{className:"w-4 h-4"}):t.jsx(w,{className:"w-4 h-4"})}),t.jsx("span",{className:"font-bold text-blue-100",children:l(0===e?{vi:"B·∫Øt ƒë·∫ßu game",en:"Start game"}:{vi:`Ng√†y ${e}`,en:`Day ${e}`})})]}),t.jsx("div",{className:"ml-2 pl-4 border-l-2 border-white/10 space-y-1",children:a.map((e,s)=>{if("chat"===e.type){const a=e.data,i=a[0];return t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full border-2 border-slate-900 bg-blue-500"}),t.jsxs("div",{className:"bg-white/5 rounded-lg ml-1 overflow-hidden",children:[t.jsx("div",{className:"px-2 py-1 bg-white/5 border-b border-white/5 flex items-center justify-between",children:t.jsx("span",{className:"text-blue-400 font-bold text-xs",children:i.playerName})}),t.jsx("div",{className:"p-1 space-y-0.5",children:a.map(e=>t.jsx("div",{className:"px-2 py-1 hover:bg-white/5 rounded transition-colors",children:t.jsxs("div",{className:"flex justify-between items-baseline gap-2",children:[t.jsx("p",{className:"text-sm text-white/90 break-words leading-tight flex-1",children:e.content}),t.jsx("span",{className:"text-[10px] text-white/40 shrink-0",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id))})]})]},`chat-group-${s}`)}const a=e.data;let i=N,n="text-gray-400 bg-gray-500/10",r="border-gray-500/20";return"death"===a.type?(i=p,n="text-red-400 bg-red-500/10",r="border-red-500/20"):"vote"===a.type&&(i=G,n="text-orange-400 bg-orange-500/10",r="border-orange-500/20"),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full border-2 border-slate-900 "+("death"===a.type?"bg-red-500":"vote"===a.type?"bg-orange-500":"bg-gray-500")}),t.jsxs("div",{className:`p-2 rounded-lg border flex flex-col gap-1 ${r} ${n}`,children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(i,{className:"w-4 h-4 mt-0.5 shrink-0"}),t.jsx("p",{className:"text-sm leading-tight text-white/90",children:l(a.message)})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("span",{className:"text-[10px] text-white/40",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})})]})]},a.id)})})]},e)})})},K=({player:e,onClose:i})=>{const{ti:l}=s(),n=a(e=>e.userId)===e.id;return t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between bg-slate-900",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold text-base",children:e.username.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-sm",children:e.username}),t.jsx("p",{className:"text-[10px] text-white/60",children:l({vi:"L·ªãch s·ª≠ ho·∫°t ƒë·ªông",en:"Activity History"})})]})]}),t.jsx("button",{onClick:i,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:t.jsx(u,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:0===e.history.length?t.jsx("div",{className:"text-center text-white/40 py-8 italic text-xs",children:l({vi:"Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o",en:"No activity recorded"})}):[...e.history].filter(e=>!e.isSecret||n).reverse().map(e=>t.jsxs("div",{className:"relative pl-3 border-l border-white/10 py-0.5",children:[t.jsx("div",{className:"absolute -left-[5px] top-3 w-2.5 h-2.5 rounded-full bg-slate-600 border-2 border-slate-800"}),t.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-0.5",children:[t.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded uppercase font-bold "+("chat"===e.type?"bg-blue-500/20 text-blue-400":"vote"===e.type?"bg-orange-500/20 text-orange-400":"action"===e.type?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"),children:e.type}),t.jsxs("span",{className:"text-[10px] text-white/40",children:[l({vi:`Ng√†y ${e.day}`,en:`Day ${e.day}`})," ","‚Ä¢"," ",new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),t.jsx("p",{className:"text-sm text-white/90 leading-tight",children:l(e.content)})]})]},e.id))})]})})},O=({player:e,isMe:a,isSelected:i,canSelect:l,showRole:r,suspicionCount:c,voteCount:o,phase:d,isWolfTarget:h,isProtected:x,onViewHistory:m,onClick:u})=>{const{ti:g,ts:f}=s(),j=e.role?$[e.role]:null,v=!e.isAlive;return t.jsxs("div",{className:"relative group/card",children:[t.jsxs("button",{onClick:u,disabled:!l,className:`relative flex flex-col items-center p-2 rounded-xl transition-all w-[100px] min-h-[120px] border border-slate-700 ${v?"opacity-80":"bg-white/5"} ${i?"ring-2 ring-yellow-400 bg-yellow-400/20":l?" hover:bg-white/10":""} ${l?"cursor-pointer":"cursor-default"} ${a?"ring-2 ring-blue-400":""}`,children:[t.jsxs("div",{className:"relative w-12 h-12 rounded-full flex items-center justify-center text-xl "+(v?"bg-gray-700":"bg-gradient-to-br from-green-500 to-blue-500"),children:[r&&j?j.icon:e.isBot?t.jsx(y,{className:"w-5 h-5"}):t.jsx(k,{className:"w-5 h-5"}),v&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full hover:opacity-10 transition-opacity",children:t.jsx(p,{className:"w-6 h-6 text-red-400"})})]}),t.jsxs("span",{className:"mt-1 text-xs font-medium max-w-full text-center flex items-center justify-center",children:[e.username,a&&t.jsx(S,{className:"w-4 h-4 text-blue-400 ml-1 inline"})]}),r&&j&&t.jsx("span",{className:"text-xs mt-0.5 px-1.5 py-0.5 rounded-full max-w-full",style:{backgroundColor:j.color+"30",color:j.color},children:g(j.name)}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-1 mt-1",children:[e.loverId&&t.jsxs("span",{className:"text-[10px] bg-pink-500/30 text-pink-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(C,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:g({vi:"C·∫∑p ƒë√¥i",en:"Lover"})})]}),x&&t.jsxs("span",{className:"text-[10px] bg-green-500/30 text-green-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(T,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:g({vi:"ƒê∆∞·ª£c b·∫£o v·ªá",en:"Protected"})})]}),h&&t.jsxs("span",{className:"text-[10px] bg-red-500/30 text-red-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(R,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[100px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:g({vi:"M·ª•c ti√™u c·ªßa s√≥i",en:"Wolf target"})})]}),c>0&&t.jsxs("span",{className:"text-[10px] bg-red-500/30 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(A,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:g({vi:"B·ªã nghi ng·ªù",en:"Suspicion"})}),c]}),o>0&&t.jsxs("span",{className:"text-[10px] bg-orange-500/30 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(n,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:g({vi:"S·ªë phi·∫øu",en:"Vote count"})}),o]}),e.hasVoted&&"voting"===d&&t.jsxs("span",{className:"text-[10px] bg-green-500/30 text-green-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(P,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[60px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:g({vi:"ƒê√£ vote",en:"Voted"})})]})]})]}),e.history.length>0&&t.jsx("button",{onClick:e=>{m?.(),e.stopPropagation()},className:"absolute -top-1 -right-1 p-1 bg-slate-600/80 rounded-full hover:bg-slate-500 transition-colors flex items-center justify-center w-6 h-6",title:f({vi:"Xem l·ªãch s·ª≠",en:"View history"}),children:t.jsx("span",{className:"text-xs text-white/70",children:e.history.length})})]})},Y=({state:e,currentUserId:s,selectedTargetIds:a,onPlayerClick:l,canSelectPlayer:n,showRoles:r=!1})=>{const[c,o]=i.useState(null),d=e.players.filter(e=>null!==e.id),h=e.players.find(e=>e.id===s),x="wolf"===h?.role,m=s=>"night"===e.phase&&x?e.nightActions.wolfVotes.filter(e=>e.targetId===s).length:"voting"===e.phase||"hunterRevenge"===e.phase?e.eliminationVotes.filter(e=>e.targetId===s).length:0;return t.jsxs("div",{className:"relative flex flex-wrap justify-center gap-1 md:gap-2 md:p-2",children:[c&&t.jsx(K,{player:c,onClose:()=>o(null)}),d.map(i=>{const c=!!n&&n(i),d=a.includes(i.id),u=x&&e.nightActions.wolfTarget===i.id,g=e.nightActions.bodyguardTarget===i.id&&("bodyguard"===h?.role||"end"===e.phase);return t.jsx(O,{player:i,isMe:i.id===s,isSelected:d,canSelect:c,showRole:r||"end"===e.phase||e.config.revealRolesOnDeath&&!i.isAlive||x&&"wolf"===i.role||"seer"===h?.role&&h.history.some(e=>"info"===e.type&&e.content.en.startsWith("Seer Result:")&&e.content.en.includes(i.username)),suspicionCount:(p=i.id,e.suspicionMarkers.filter(e=>e.toPlayerId===p).length),voteCount:m(i.id),phase:e.phase,isWolfTarget:u,isProtected:g,onViewHistory:()=>{o(i)},onClick:()=>c&&i.id&&l?.(i.id)},i.id);var p})]})},F=({game:e,state:l,currentUserId:n,isHost:r})=>{const{ti:c}=s(),d=a(e=>e.username),[h,x]=i.useState(""),m=l.players.findIndex(e=>e.id===n),g=l.players.filter(e=>null!==e.id).length;return t.jsxs("div",{className:"flex flex-col h-full items-center",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsxs("h2",{className:"text-xl font-bold flex items-center justify-center gap-2",children:[t.jsx(j,{className:"w-6 h-6"})," ",c({vi:"Ma S√≥i Online",en:"Werewolf Online"})]}),t.jsxs("p",{className:"text-white/60 text-sm pt-2",style:{color:g<l.minPlayers?"#ee5555":"white"},children:[c({vi:"Ch·ªù ng∆∞·ªùi ch∆°i...",en:"Waiting for players..."})," (",g,"/",l.minPlayers," ",c({vi:"t·ªëi thi·ªÉu",en:"minimum"}),")"]})]}),t.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:l.players.slice(0,12).map((s,a)=>t.jsx("div",{className:"p-3 rounded-xl flex flex-col items-center justify-center w-[120px] min-h-[120px] "+(s.id?"bg-white/10":"bg-white/5 border-2 border-dashed border-white/20"),children:s.id?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-xl",children:s.isBot?t.jsx(y,{className:"w-5 h-5"}):t.jsx(k,{className:"w-5 h-5"})}),t.jsx("p",{className:"text-sm mt-1 truncate",children:s.username}),r&&s.id!==n&&t.jsxs("button",{onClick:()=>s.isBot?e.requestRemoveBot(a):e.requestLeaveSlot(a),className:"text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30 px-2 py-1 rounded-lg mt-1 flex items-center justify-center gap-1",children:[t.jsx(u,{className:"w-3 h-3"})," ",c({vi:"X√≥a",en:"Remove"})]})]}):t.jsx("div",{className:"py-2",children:-1===m?t.jsxs("button",{onClick:()=>e.requestJoinSlot(a,d||`Guest ${Date.now().toString().slice(-4)}`),className:"text-xs bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 px-3 py-1.5 rounded-lg flex items-center justify-center gap-1",children:[t.jsx(k,{className:"w-3 h-3 inline"})," ",c({vi:"Tham gia",en:"Join"})]}):r?t.jsxs("button",{onClick:()=>e.requestAddBot(a),className:"text-xs bg-green-500/20 text-green-400 hover:bg-green-500/30 px-3 py-1.5 rounded-lg flex items-center justify-center gap-1",children:[t.jsx(y,{className:"w-3 h-3"})," ",c({vi:"Th√™m Bot",en:"Add Bot"})]}):t.jsx("span",{className:"text-xs text-white/40",children:c({vi:"Tr·ªëng",en:"Empty"})})})},a))}),r&&t.jsxs("div",{className:"w-full max-w-[300px] flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-white/5 p-2 rounded-lg",children:[t.jsx("label",{className:"text-xs text-white/60 whitespace-nowrap",children:c({vi:"Ch·ªçn vai tr√≤:",en:"Select Role:"})}),t.jsxs("select",{value:h,onChange:e=>x(e.target.value),className:"flex-1 bg-white/10 text-white text-sm rounded outline-none p-1 border border-white/10",children:[t.jsx("option",{value:"",children:c({vi:"Ng·∫´u nhi√™n",en:"Random"})}),Object.keys($).map(e=>t.jsxs("option",{value:e,children:[$[e]?.icon," ",c($[e]?.name)]},e))]})]}),t.jsxs("button",{onClick:()=>e.requestStartGame(""===h?void 0:h),disabled:!e.canStartGame(),className:"w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 "+(e.canStartGame()?"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:[t.jsx(o,{className:"w-5 h-5"})," ",c({vi:"B·∫Øt ƒë·∫ßu game",en:"Start game"})]})]})]})},Q=({game:e,state:a,currentUserId:l,selectedTarget:n,secondSelectedTarget:r})=>{const{ti:c}=s(),[o,d]=i.useState(!1),[h,x]=i.useState(!1),m=a.players.find(e=>e.id===l),u=m?.role,g=u===a.nightSubPhase||"wolf"===u&&"wolf"===a.nightSubPhase,f=u?$[u]:null,v="witch"===u&&l?a.witchPotions[l]:null,b=a.nightActions.wolfTarget?a.players.find(e=>e.id===a.nightActions.wolfTarget):null,w=a.players.find(e=>e.id===n);if(!m)return t.jsx("div",{className:"flex flex-col items-center justify-center h-full text-white/50 pt-10",children:c({vi:"B·∫°n l√† kh√°ch, kh√¥ng th·ªÉ tham gia h√†nh ƒë·ªông",en:"You are a guest, you cannot participate in actions"})});if(!m?.isAlive)return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/50",children:[t.jsx(p,{className:"w-16 h-16 mb-4"}),t.jsxs("p",{children:[c({vi:"B·∫°n ƒë√£ ch·∫øt",en:"You are dead"}),"."," ",c({vi:"ƒêang ch·ªù ƒë√™m k·∫øt th√∫c...",en:"Waiting for night to end..."})]})]});if(!f?.hasNightAction||!g){const e="seer"===u?m.history.find(e=>"info"===e.type&&e.day===a.day):null;return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(j,{className:"w-16 h-16 text-indigo-400 mb-4 animate-pulse"}),t.jsxs("p",{className:"text-white/70 flex items-center justify-center gap-2",children:[t.jsx(j,{className:"w-4 h-4"})," ",c({vi:"L√†ng ƒëang ng·ªß",en:"Village is sleeping"})]}),t.jsxs("p",{className:"text-white/50 text-sm mt-2",children:[c({vi:"Ch·ªù c√°c vai tr√≤ kh√°c h√†nh ƒë·ªông",en:"Waiting for other roles to act"}),"..."]}),e&&t.jsxs("div",{className:"mt-6 p-4 bg-indigo-500/20 rounded-xl border border-indigo-500/50 max-w-xs",children:[t.jsxs("p",{className:"text-indigo-300 font-bold mb-1 flex items-center justify-center gap-2",children:[t.jsx(H,{className:"w-4 h-4"}),c({vi:"K·∫øt qu·∫£ soi:",en:"Seer Result:"})]}),t.jsx("p",{className:"text-white font-medium text-center",children:c(e.content)})]})]})}return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("span",{className:"text-3xl",children:f.icon}),t.jsx("h3",{className:"text-lg font-bold",style:{color:f.color},children:c(f.name)}),t.jsx("p",{className:"text-sm text-white/60",children:c(f.nightActionDescription)}),n&&t.jsxs("p",{className:"text-sm mt-2 text-yellow-400 flex items-center justify-center gap-1",children:[t.jsx(R,{className:"w-4 h-4"})," ",a.players.find(e=>e.id===n)?.username,r&&t.jsxs("span",{children:[" ","&"," ",a.players.find(e=>e.id===r)?.username]})]})]}),"witch"===u&&v&&t.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[a.nightActions.wolfTarget&&t.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg text-center mb-1",children:t.jsxs("p",{className:"text-sm text-red-200",children:[c({vi:"N·∫°n nh√¢n ƒë√™m nay:",en:"Tonight's victim:"})," ",t.jsx("span",{className:"font-bold",children:b?.username})]})}),t.jsxs("div",{className:"flex gap-2",children:[v.hasHealPotion&&a.nightActions.wolfTarget&&t.jsxs("button",{onClick:()=>{d(!o),o||x(!1)},className:"flex-1 p-3 rounded-xl flex flex-col items-center transition-all "+(o?"bg-green-500/30 ring-2 ring-green-400":"bg-white/10 hover:bg-white/30"),children:[t.jsx(L,{className:"w-6 h-6 text-green-400"}),t.jsxs("span",{className:"text-xs mt-1",children:[c({vi:"C·ª©u n·∫°n nh√¢n",en:"Heal victim"}),":"," ",b?.username]})]}),v.hasKillPotion&&t.jsxs("button",{onClick:()=>{x(!h),h||d(!1)},disabled:!n,className:"flex-1 p-3 rounded-xl flex flex-col items-center transition-all "+(h?"bg-red-500/30 ring-2 ring-red-400":n?"bg-white/10 hover:bg-white/30":"bg-slate-500/10 cursor-not-allowed"),children:[t.jsx(p,{className:"w-6 h-6 text-red-400"}),t.jsxs("span",{className:"text-xs mt-1",children:[c({vi:"Gi·∫øt ng∆∞·ªùi ƒë∆∞·ª£c ch·ªçn",en:"Kill selected"}),":"," ",w?.username||c({vi:"[Ch∆∞a ch·ªçn]",en:"[Please select]"})]})]})]})]}),t.jsxs("button",{onClick:()=>{u&&("cupid"===u&&n&&r?e.requestNightAction(u,n,!1,!1,r):"witch"===u?e.requestNightAction(u,h?n:null,o,h,void 0):n&&e.requestNightAction(u,n,!1,!1,void 0))},disabled:"cupid"===u?!n||!r:"witch"!==u&&!n,className:"w-full py-3 rounded-xl font-bold bg-gradient-to-r from-indigo-500 to-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(P,{className:"w-5 h-5 inline mr-2"}),c({vi:"X√°c nh·∫≠n",en:"Confirm"})]})]})},X=({game:e,state:a,currentUserId:l,selectedTarget:n})=>{const[r,c]=i.useState(""),[o,d]=i.useState(!1),{ti:h,ts:x}=s(),m=a.players.find(e=>e.id===l),u=a.players.find(e=>e.id===n),g=()=>{r.trim()&&m?.isAlive&&(e.requestSendMessage(r.trim(),"text"),c(""))},p=a.suspicionMarkers.some(e=>e.fromPlayerId===l&&e.toPlayerId===n);return t.jsxs("div",{className:"flex flex-col h-full p-2",children:[n&&t.jsxs("div",{className:"text-center mb-2 text-sm text-yellow-400 flex items-center justify-center gap-1",children:[t.jsx(q,{className:"w-4 h-4"})," ",h({vi:"ƒêang ch·ªçn:",en:"Selected:"})," ",a.players.find(e=>e.id===n)?.username]}),n&&m?.isAlive&&t.jsxs("button",{onClick:()=>e.requestAddSuspicion(n),className:"w-full mb-2 py-2 rounded-lg text-sm transition-colors "+(p?"bg-gray-500/20 text-gray-400 hover:bg-gray-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"),children:[t.jsx(N,{className:"w-4 h-4 inline mr-1"}),h(p?{vi:"B·ªè nghi ng·ªù",en:"Unsuspect"}:{vi:"Nghi ng·ªù",en:"Suspect"})," ",u?.username]}),t.jsxs("button",{onClick:()=>d(!o),className:"flex items-center justify-between w-full p-2 bg-white/5 rounded-lg mb-2 text-sm",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(f,{className:"w-4 h-4"})," ",h({vi:"Tin nh·∫Øn nhanh",en:"Quick messages"})]}),o?t.jsx(B,{className:"w-4 h-4"}):t.jsx(M,{className:"w-4 h-4"})]}),o&&t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-2",children:E.map(s=>t.jsxs("button",{onClick:()=>(s=>{if(!m?.isAlive)return;if(s.targetRequired&&!n)return;const t=s.targetRequired&&n?x(s.text).replace("{target}",a.players.find(e=>e.id===n)?.username||""):x(s.text);e.requestSendMessage(t,"quick",n||void 0,s.id)})(s),disabled:s.targetRequired&&!n,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm text-left flex items-center gap-2 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:[t.jsx("span",{className:"text-lg",children:s.icon}),t.jsx("span",{className:"",children:s.targetRequired?x(s.text).replace("{target}",n?a.players.find(e=>e.id===n)?.username||"...":x({vi:"[ch·ªçn ng∆∞·ªùi]",en:"[select]"})):x(s.text)})]},s.id))}),t.jsx("div",{className:"flex-1 overflow-auto bg-black/20 rounded-lg p-2 mb-2 min-h-[100px] max-h-[200px]",children:a.chatMessages.slice(-20).map(e=>t.jsxs("div",{className:"mb-1 text-sm text-left",children:[t.jsxs("span",{className:"font-medium text-blue-400",children:[e.playerName,":"]})," ",t.jsx("span",{className:"text-white/80",children:e.content})]},e.id))}),m?.isAlive&&(m.messagesRemaining||0)>0&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:r,onChange:e=>c(e.target.value.slice(0,100)),onKeyDown:e=>"Enter"===e.key&&g(),placeholder:x({vi:`Nh·∫≠p tin nh·∫Øn... (${m.messagesRemaining}/${U.chatLimit})`,en:`Type message... (${m.messagesRemaining}/${U.chatLimit})`}),className:"flex-1 bg-white/10 rounded-lg px-3 py-2 text-sm outline-none"}),t.jsx("button",{onClick:g,className:"p-2 bg-blue-500 rounded-lg",children:t.jsx(V,{className:"w-5 h-5"})})]})]})},J=({game:e,state:a,currentUserId:i,selectedTarget:l})=>{const{ti:r}=s(),c=a.players.find(e=>e.id===i),o="hunterRevenge"===a.phase,d=o&&"hunter"===c?.role&&a.pendingElimination===c.id;if(o&&!d)return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(R,{className:"w-16 h-16 text-red-500 mb-4 animate-pulse"}),t.jsx("p",{className:"text-white/70 text-center",children:r({vi:"Th·ª£ sƒÉn ƒëang t√¨m m·ª•c ti√™u...",en:"Hunter is choosing a target..."})})]});if(c?.hasVoted){const e=a.eliminationVotes?.find(e=>e.voterId===i),s=e?.targetId?a.players.find(s=>s.id===e.targetId):null;return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(P,{className:"w-16 h-16 text-green-400 mb-4"}),t.jsx("p",{className:"text-white/70",children:r(o?{vi:"ƒê√£ b·∫Øn!",en:"Shot fired!"}:{vi:"ƒê√£ b√¨nh ch·ªçn! ƒêang ch·ªù ng∆∞·ªùi kh√°c...",en:"Voted! Waiting for others..."})}),s&&!o&&t.jsx("p",{className:"text-yellow-400 mt-2 text-sm font-medium",children:r({vi:`B·∫°n ƒë√£ ch·ªçn: ${s.username}`,en:`You voted for: ${s.username}`})})]})}return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"text-center mb-4",children:[o?t.jsx(R,{className:"w-10 h-10 mx-auto text-red-500 mb-2"}):t.jsx(n,{className:"w-10 h-10 mx-auto text-orange-400 mb-2"}),t.jsx("h3",{className:"text-lg font-bold",children:r(o?{vi:"K√©o ai ƒëi c√πng?",en:"Who to take with you?"}:{vi:"B√¨nh ch·ªçn lo·∫°i ai?",en:"Who do you vote?"})}),l&&t.jsxs("p",{className:"text-sm mt-2 text-yellow-400 flex items-center justify-center gap-1",children:[t.jsx(R,{className:"w-4 h-4"})," ",a.players.find(e=>e.id===l)?.username]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{o?e.requestHunterShoot(""):e.requestCastVote(null)},className:"flex-1 py-3 bg-gray-600 rounded-xl font-bold",children:r({vi:"B·ªè qua",en:"Skip"})}),t.jsx("button",{onClick:()=>{o?l&&e.requestHunterShoot(l):l&&e.requestCastVote(l)},disabled:!l,className:"flex-1 py-3 rounded-xl font-bold disabled:opacity-50 "+(o?"bg-gradient-to-r from-red-600 to-red-800":"bg-gradient-to-r from-orange-500 to-red-500"),children:r(o?{vi:"B·∫Øn!",en:"Shoot!"}:{vi:"B√¨nh ch·ªçn",en:"Vote"})})]})]})},_=({game:e,state:a,isHost:i})=>{const{ts:l}=s(),n="wolf"===a.winner?l({vi:"Ma S√≥i th·∫Øng!",en:"Wolf wins!"}):"village"===a.winner?l({vi:"D√¢n L√†ng th·∫Øng!",en:"Village wins!"}):l({vi:"T√¨nh Nh√¢n th·∫Øng!",en:"Lover wins!"}),r="wolf"===a.winner?p:"village"===a.winner?I:C;return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsxs("h2",{className:"text-3xl font-bold mb-4 flex items-center justify-center gap-2",children:[t.jsx(r,{className:"w-8 h-8"})," ",n]}),i&&t.jsxs("button",{onClick:()=>e.requestResetGame(),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl font-bold flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5"})," Ch∆°i l·∫°i"]})]})},Z=({game:a,currentUserId:g=""})=>{const{confirm:p}=e(),{ti:f,ts:j}=s(),v=a,[b,w]=i.useState(v.getState()),[N,y]=i.useState(!1),[k,S]=i.useState(!1),[C,T]=i.useState(null),[R,A]=i.useState(null),[P,I]=i.useState(""),[q,B]=i.useState(null),M=b.players.find(e=>e.id===g),V=M?.role?$[M.role]:null;i.useEffect(()=>v.onUpdate(w),[v]),i.useEffect(()=>{T(null),A(null)},[b.phase,b.nightSubPhase]),i.useEffect(()=>{const e=(e=>{switch(e){case"setup":return"bg-gradient-to-b from-slate-900 to-slate-800";case"night":return"bg-gradient-to-b from-slate-950 to-indigo-950";case"voting":return"bg-gradient-to-b from-orange-950 to-blue-800";case"elimination":return"bg-gradient-to-b from-red-950 to-brown-800";default:return"bg-gradient-to-b from-slate-800 to-slate-700"}})(b.phase);""===P?I(e):e!==P&&e!==q&&B(e)},[b.phase]);const H=()=>t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full max-h-[80vh] overflow-y-auto shadow-2xl relative",children:[t.jsx("button",{onClick:()=>y(!1),className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(u,{className:"w-5 h-5"})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(m,{className:"w-6 h-6 text-yellow-500"}),f({en:"Werewolf Rules",vi:"Lu·∫≠t Ma S√≥i"})]}),t.jsxs("div",{className:"space-y-4 text-slate-300 leading-relaxed",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:f({en:"Objective",vi:"M·ª•c ti√™u"})}),t.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-sm",children:[t.jsxs("li",{children:[t.jsxs("strong",{className:"text-red-400",children:["üê∫ ",f({en:"Werewolves",vi:"Ma S√≥i"})]}),":"," ",f({en:"Kill villagers until wolves equal villagers.",vi:"Gi·∫øt d√¢n l√†ng cho ƒë·∫øn khi s·ªë s√≥i b·∫±ng s·ªë d√¢n."})]}),t.jsxs("li",{children:[t.jsxs("strong",{className:"text-blue-400",children:["üë§ ",f({en:"Villagers",vi:"D√¢n L√†ng"})]}),":"," ",f({en:"Find and eliminate all wolves.",vi:"T√¨m v√† lo·∫°i b·ªè t·∫•t c·∫£ ma s√≥i."})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:f({en:"Roles",vi:"Vai Tr√≤"})}),t.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-sm",children:[t.jsxs("li",{children:[t.jsxs("strong",{children:["üîÆ ",f({en:"Seer",vi:"Ti√™n Tri"})]}),":"," ",f({en:"Check one player's role each night.",vi:"Soi vai tr√≤ c·ªßa m·ªôt ng∆∞·ªùi ch∆°i m·ªói ƒë√™m."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["üõ°Ô∏è ",f({en:"Bodyguard",vi:"B·∫£o V·ªá"})]}),":"," ",f({en:"Protect one player from wolves each night.",vi:"B·∫£o v·ªá m·ªôt ng∆∞·ªùi kh·ªèi s√≥i m·ªói ƒë√™m."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["üßô ",f({en:"Witch",vi:"Ph√π Th·ªßy"})]}),":"," ",f({en:"Has one healing potion and one killing potion.",vi:"C√≥ m·ªôt b√¨nh thu·ªëc c·ª©u v√† m·ªôt b√¨nh thu·ªëc ƒë·ªôc."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["üèπ ",f({en:"Hunter",vi:"Th·ª£ SƒÉn"})]}),":"," ",f({en:"Can shoot one person when dying.",vi:"C√≥ th·ªÉ b·∫Øn m·ªôt ng∆∞·ªùi khi ch·∫øt."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["üíò ",f({en:"Cupid",vi:"Th·∫ßn T√¨nh Y√™u"})]}),":"," ",f({en:"Links two lovers. If one dies, the other follows.",vi:"K·∫øt ƒë√¥i hai ng∆∞·ªùi. N·∫øu m·ªôt ng∆∞·ªùi ch·∫øt, ng∆∞·ªùi kia ch·∫øt theo."})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:f({en:"Phases",vi:"Giai ƒêo·∫°n"})}),t.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-sm",children:[t.jsxs("li",{children:[t.jsxs("strong",{children:["üåô ",f({en:"Night",vi:"ƒê√™m"})]}),":"," ",f({en:"Special roles wake up and perform actions.",vi:"C√°c vai tr√≤ ƒë·∫∑c bi·ªát th·ª©c d·∫≠y v√† h√†nh ƒë·ªông."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["‚òÄÔ∏è ",f({en:"Morning",vi:"S√°ng"})]}),":"," ",f({en:"Announce who died last night.",vi:"Th√¥ng b√°o ai ƒë√£ ch·∫øt ƒë√™m qua."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["üí¨ ",f({en:"Discussion",vi:"Th·∫£o Lu·∫≠n"})]}),":"," ",f({en:"Players discuss to find the wolves.",vi:"Ng∆∞·ªùi ch∆°i th·∫£o lu·∫≠n ƒë·ªÉ t√¨m ra s√≥i."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["üëé ",f({en:"Voting",vi:"B√¨nh Ch·ªçn"})]}),":"," ",f({en:"Vote to eliminate one suspect.",vi:"B√¨nh ch·ªçn ƒë·ªÉ treo c·ªï m·ªôt k·∫ª t√¨nh nghi."})]})]})]})]})]})]})});return t.jsxs("div",{className:`relative flex flex-col h-full ${P} rounded-lg text-white overflow-hidden`,children:[N&&H(),q&&t.jsx("div",{className:`absolute inset-0 ${q} animate-slide-in z-0`,onAnimationEnd:()=>{I(q),B(null)}}),t.jsxs("div",{className:"relative z-10 flex flex-col h-full w-full pb-20 overflow-y-auto min-h-[500px] pt-2",children:["night"===b.phase?t.jsx(l,{className:"w-16 h-16 text-white absolute top-4 left-4 z-[-1]"}):"voting"==b.phase?t.jsx(n,{className:"w-16 h-16 text-yellow-500 absolute top-4 left-4 z-[-1]"}):"setup"!=b.phase?t.jsx(r,{className:"w-16 h-16 text-yellow-500 absolute top-4 left-4 z-[-1]"}):null,t.jsx("div",{className:"flex items-center gap-2 w-full justify-center",children:v.isHost&&b.isGameStarted&&t.jsxs("button",{onClick:async()=>{await p(j({vi:"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ch∆°i l·∫°i v√°n n√†y?",en:"Are you sure you want to reset this game?"}),j({vi:"Ch∆°i l·∫°i",en:"Play again"}))&&v.requestResetGame()},className:"p-2 bg-slate-500/20 text-slate-400 hover:bg-slate-500/30 rounded-lg text-xs flex items-center gap-1",children:[t.jsx(c,{className:"w-3 h-3"})," ",f({vi:"V√°n m·ªõi",en:"New Game"})]})}),b.isGameStarted&&V&&t.jsx("div",{className:"flex flex-col items-center justify-center gap-4 mb-3 py-2",children:t.jsxs("div",{className:"px-4 py-2 rounded-xl flex flex-col items-center gap-2",style:{backgroundColor:V.color+"30",border:`2px solid ${V.color}`},children:[t.jsx("span",{className:"text-sm text-white/60",children:f({en:"You are",vi:"B·∫°n l√†:"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:V.icon}),t.jsx("span",{className:"font-bold text-lg",style:{color:V.color},children:f(V.name)})]}),t.jsx("span",{className:"text-sm text-white/60",children:f(V.description)})]})}),b.isGameStarted&&t.jsx("div",{className:"flex justify-center w-full mb-3",children:t.jsxs("div",{className:"flex justify-between w-full max-w-[450px] bg-slate-900/60 backdrop-blur-md p-2 px-4 rounded-xl border border-white/10 shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[W(b.phase),t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-2",children:[t.jsx("span",{className:"font-bold",children:f((L=b.phase,{setup:{en:"Setup",vi:"Thi·∫øt l·∫≠p"},night:{en:"Night",vi:"ƒê√™m"},morning:{en:"Morning",vi:"S√°ng"},discussion:{en:"Discussion",vi:"Th·∫£o lu·∫≠n"},voting:{en:"Voting",vi:"B√¨nh ch·ªçn"},elimination:{en:"Elimination",vi:"Lo·∫°i b·ªè"},hunterRevenge:{en:"Hunter's Revenge",vi:"Th·ª£ SƒÉn tr·∫£ th√π"},end:{en:"Game Over",vi:"K·∫øt th√∫c"}}[L]||L))}),b.day>0&&t.jsxs("span",{className:"text-white/60 text-sm",children:[f({vi:"Ng√†y",en:"Day"})," ",b.day]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(D,{endTime:b.phaseEndTime,isPaused:b.isPaused,pausedTimeRemaining:b.pausedTimeRemaining}),v.isHost&&"end"!==b.phase&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>b.isPaused?v.requestResumeGame():v.requestPauseGame(),className:"p-2 rounded-full transition-colors "+(b.isPaused?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-white/10 text-white/60 hover:bg-white/20"),title:b.isPaused?"Resume":"Pause",children:b.isPaused?t.jsx(o,{className:"w-5 h-5"}):t.jsx(d,{className:"w-5 h-5"})}),t.jsx("button",{onClick:async()=>{await p(j({vi:"ƒê·∫øm ng∆∞·ª£c s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t v·ªÅ 5 gi√¢y",en:"The countdown will be reset to 5 seconds"}),j({vi:"TƒÉng t·ªëc giai ƒëo·∫°n?",en:"Skip phase?"}))&&v.requestSkipPhase()},className:"p-2 rounded-full transition-colors bg-white/10 text-white/60 hover:bg-white/20",title:"Skip",children:t.jsx(h,{className:"w-5 h-5"})})]})]})]})}),b.isGameStarted&&"setup"!==b.phase&&t.jsx(Y,{state:b,currentUserId:g,selectedTargetIds:[C,R],showRoles:"end"===b.phase,canSelectPlayer:e=>{const s=b.players.find(e=>e.id===g),t="hunterRevenge"===b.phase&&"hunter"===s?.role&&b.pendingElimination===s.id;return!(!s?.isAlive&&!t)&&(!(!e.isAlive&&"night"!==b.phase)&&("night"===b.phase?"cupid"===s?.role?e.isAlive:"seer"===s?.role?e.id!==g&&e.isAlive:"bodyguard"===s?.role?e.isAlive&&e.id!==b.nightActions.lastBodyguardTarget:("wolf"===s?.role||"witch"===s?.role)&&e.isAlive:("discussion"===b.phase||"voting"===b.phase||"hunterRevenge"===b.phase)&&(("voting"!==b.phase&&"hunterRevenge"!==b.phase||!s?.hasVoted)&&(e.isAlive&&e.id!==g))))},onPlayerClick:e=>{const s=b.players.find(e=>e.id===g);"night"===b.phase&&"cupid"===s?.role?C?C===e?T(null):R?R===e&&A(null):A(e):T(e):T(C===e?null:e)}}),t.jsx("div",{className:"flex-1",children:(()=>{switch(b.phase){case"setup":return t.jsx(F,{game:v,state:b,currentUserId:g,isHost:v.isHost});case"night":return t.jsx(Q,{game:v,state:b,currentUserId:g,selectedTarget:C,secondSelectedTarget:R});case"morning":case"elimination":return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(r,{className:"w-16 h-16 text-yellow-400 mb-4"}),b.logs.slice(-3).map(e=>t.jsx("p",{className:"text-center mb-2",children:f(e.message)},e.id)),"morning"===b.phase&&"seer"===M?.role&&b.nightResult?.seerCheck&&t.jsxs("div",{className:"mt-4 p-4 bg-indigo-500/20 rounded-xl border border-indigo-500/50",children:[t.jsx("p",{className:"text-center text-indigo-300 font-bold mb-1",children:f({vi:"K·∫øt qu·∫£ soi:",en:"Seer Result:"})}),t.jsxs("p",{className:"text-center",children:[t.jsx("span",{className:"font-bold text-white",children:b.players.find(e=>e.id===b.nightResult?.seerCheck?.targetId)?.username})," ",b.nightResult.seerCheck.isWolf?t.jsx("span",{className:"text-red-400 font-bold",children:f({vi:"l√† MA S√ìI!",en:"is a WEREWOLF!"})}):t.jsx("span",{className:"text-green-400 font-bold",children:f({vi:"l√† D√¢n L√†ng",en:"is a Villager"})})]})]})]});case"discussion":return t.jsx(X,{game:v,state:b,currentUserId:g,selectedTarget:C});case"voting":case"hunterRevenge":return t.jsx(J,{game:v,state:b,currentUserId:g,selectedTarget:C});case"end":return t.jsx(_,{game:v,state:b,currentUserId:g,isHost:v.isHost});default:return null}})()})]}),b.isGameStarted&&t.jsx("button",{onClick:()=>S(!0),className:"fixed bottom-4 left-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-blue-400 transition-colors z-40 shadow-lg border border-slate-500",title:j({en:"History",vi:"L·ªãch s·ª≠"}),children:t.jsx(x,{size:24})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl max-w-lg w-full h-[80vh] max-h-[90%] overflow-hidden shadow-2xl flex flex-col",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between bg-slate-900",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center font-bold text-base",children:t.jsx(x,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-sm",children:f({en:"Game History",vi:"L·ªãch s·ª≠ v√°n ƒë·∫•u"})}),t.jsx("p",{className:"text-[10px] text-white/60",children:f({vi:"Nh·∫≠t k√Ω tr√≤ ch∆°i",en:"Game Log"})})]})]}),t.jsx("button",{onClick:()=>S(!1),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:t.jsx(u,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex-1 overflow-hidden p-2",children:t.jsx(z,{state:b,currentUserId:g})})]})}),N&&H(),t.jsx("button",{onClick:()=>y(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:j({en:"Game Rules",vi:"Lu·∫≠t ch∆°i"}),children:t.jsx(m,{size:24})})]});var L};export{Z as default};
