import{b as e,u as s,S as t,j as a,a as n,e as i}from"./index-lqVnuPzo.js";import{b as l,c as r,aM as o,aN as c,aO as d,a5 as h,aP as x,as as m,X as u,x as g,av as p,aC as f,K as v,aQ as j,I as b,z as w,aR as y,V as N,M as k,aS as S,aK as C,aT as R,R as T,ao as P,U as I,u as A,aU as M,aq as B,d as q,$ as V,aV as E,v as G,w as L,Z as $,aW as W,aX as H,aY as D}from"./react-vendor-Do69iInB.js";import"./BaseGame-B3WT17lS.js";import{a as z,Q as U,D as K}from"./types-CsNQcsE1.js";import{u as O}from"./useGameState-DkmzPUgx.js";import{u as Y}from"./usePrevious-C4yIiP9X.js";import"./socket-DRbsQkF5.js";import"./zustand-CCNgd6Y3.js";const F=e=>{switch(e){case"night":return a.jsx(k,{className:"w-5 h-5"});case"morning":return a.jsx(d,{className:"w-5 h-5"});case"discussion":return a.jsx(N,{className:"w-5 h-5"});case"voting":return a.jsx(c,{className:"w-5 h-5"});case"elimination":case"hunterRevenge":return a.jsx(y,{className:"w-5 h-5"});default:return a.jsx(w,{className:"w-5 h-5"})}},X=({endTime:e,isPaused:s,pausedTimeRemaining:t})=>{const[n,i]=l.useState(0);if(l.useEffect(()=>{if(s&&null!=t)return void i(Math.max(0,Math.floor(t/1e3)));if(!e)return;const a=()=>i(Math.max(0,Math.floor((e-Date.now())/1e3)));a();const n=setInterval(a,1e3);return()=>clearInterval(n)},[e,s,t]),!e&&!t)return null;const r=Math.floor(n/60),o=n%60;return a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full text-lg font-bold font-mono transition-colors "+(s?"bg-yellow-500/30 text-yellow-400":n<=15?"bg-red-500/30 text-red-400 animate-bounce":"bg-white/15 text-white"),children:[s?a.jsx(p,{className:"w-5 h-5"}):a.jsx(S,{className:"w-5 h-5"}),r,":",o.toString().padStart(2,"0")]})},Q=({state:e,currentUserId:t})=>{const{ti:n}=s(),i=l.useMemo(()=>{const s={};e.logs.forEach(e=>{s[e.day]||(s[e.day]=[]),s[e.day].push({type:"log",data:e})}),e.chatMessages.forEach(e=>{const t=e.day||1;s[t]||(s[t]=[]),s[t].push({type:"chat",data:e})});const a=e.players.find(e=>e.id===t);return a?.history&&a.history.forEach(e=>{s[e.day]||(s[e.day]=[]),s[e.day].push({type:"log",data:{id:e.id,message:e.content,type:e.type,timestamp:e.timestamp,day:e.day}})}),Object.keys(s).forEach(e=>{const t=Number(e);s[t].sort((e,s)=>s.data.timestamp-e.data.timestamp)}),s},[e.logs,e.chatMessages,e.players,t]),r=Object.keys(i).map(Number).sort((e,s)=>s-e);return 0===e.logs.length&&0===e.chatMessages.length?null:a.jsx("div",{className:"h-full overflow-y-auto pb-16 px-2 pt-0",children:r.map(e=>{const s=i[e],t=[];return s.forEach(e=>{const s=t[t.length-1];"chat"===e.type&&"chat"===s?.type&&s.data[0].playerName===e.data.playerName?s.data.push(e.data):"chat"===e.type?t.push({type:"chat",data:[e.data]}):t.push(e)}),a.jsxs("div",{className:"mb-4 relative",children:[a.jsxs("div",{className:"sticky top-0 z-10 py-1.5 bg-slate-900/95 glass-blur border-b border-white/10 mb-2 flex items-center gap-2",children:[a.jsx("div",{className:"p-1 rounded bg-blue-500/20 text-blue-400",children:0===e?a.jsx(v,{className:"w-4 h-4"}):a.jsx(j,{className:"w-4 h-4"})}),a.jsx("span",{className:"font-bold text-blue-100",children:n(0===e?{vi:"Báº¯t Ä‘áº§u game",en:"Start game"}:{vi:`NgÃ y ${e}`,en:`Day ${e}`})})]}),a.jsx("div",{className:"ml-2 pl-4 border-l-2 border-white/10 space-y-1",children:t.map((e,s)=>{if("chat"===e.type){const t=e.data,n=t[0];return a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full border-2 border-slate-900 bg-blue-500"}),a.jsxs("div",{className:"bg-white/5 rounded-lg ml-1 overflow-hidden",children:[a.jsx("div",{className:"px-2 py-1 bg-white/5 border-b border-white/5 flex items-center justify-between",children:a.jsx("span",{className:"text-blue-400 font-bold text-xs",children:n.playerName})}),a.jsx("div",{className:"p-1 space-y-0.5",children:t.map(e=>a.jsx("div",{className:"px-2 py-1 hover:bg-white/5 rounded transition-colors",children:a.jsxs("div",{className:"flex justify-between items-baseline gap-2",children:[a.jsx("p",{className:"text-sm text-white/90 wrap-break-word leading-tight flex-1",children:e.content}),a.jsx("span",{className:"text-[10px] text-white/40 shrink-0",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id))})]})]},`chat-group-${s}`)}const t=e.data;let i=b,l="text-gray-400 bg-gray-500/10",r="border-gray-500/20";return"death"===t.type?(i=y,l="text-red-400 bg-red-500/10",r="border-red-500/20"):"vote"===t.type&&(i=D,l="text-orange-400 bg-orange-500/10",r="border-orange-500/20"),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full border-2 border-slate-900 "+("death"===t.type?"bg-red-500":"vote"===t.type?"bg-orange-500":"bg-gray-500")}),a.jsxs("div",{className:`p-2 rounded-lg border flex flex-col gap-1 ${r} ${l}`,children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(i,{className:"w-4 h-4 mt-0.5 shrink-0"}),a.jsx("p",{className:"text-sm leading-tight text-white/90",children:n(t.message)})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("span",{className:"text-[10px] text-white/40",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})})]})]},t.id)})})]},e)})})},_=({player:e,onClose:t})=>{const{ti:i}=s(),l=n(e=>e.userId)===e.id;return a.jsx("div",{className:"fixed inset-0 z-100 flex items-center justify-center p-4 bg-black/80 glass-blur",children:a.jsxs("div",{className:"bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between bg-slate-900",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-linear-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold text-base",children:e.username.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white text-sm",children:e.username}),a.jsx("p",{className:"text-[10px] text-white/60",children:i({vi:"Lá»‹ch sá»­ hoáº¡t Ä‘á»™ng",en:"Activity History"})})]})]}),a.jsx("button",{onClick:t,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:a.jsx(u,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:0===e.history.length?a.jsx("div",{className:"text-center text-white/40 py-8 italic text-xs",children:i({vi:"ChÆ°a cÃ³ hoáº¡t Ä‘á»™ng nÃ o",en:"No activity recorded"})}):[...e.history].filter(e=>!e.isSecret||l).reverse().map(e=>a.jsxs("div",{className:"relative pl-3 border-l border-white/10 py-0.5",children:[a.jsx("div",{className:"absolute -left-[5px] top-3 w-2.5 h-2.5 rounded-full bg-slate-600 border-2 border-slate-800"}),a.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-0.5",children:[a.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded uppercase font-bold "+("chat"===e.type?"bg-blue-500/20 text-blue-400":"vote"===e.type?"bg-orange-500/20 text-orange-400":"action"===e.type?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"),children:[e.type," ",e.isSecret&&i({vi:"(bÃ­ máº­t)",en:"(secret)"})]}),a.jsxs("span",{className:"text-[10px] text-white/40",children:[i({vi:`NgÃ y ${e.day}`,en:`Day ${e.day}`})," ","â€¢"," ",new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),a.jsx("p",{className:"text-sm text-white/90 leading-tight",children:i(e.content)})]})]},e.id))})]})})},J=({players:e,hoveredPlayerId:s,suspicionMarkers:t,votes:n,playerRefs:i})=>{const[r,o]=l.useState([]);return l.useEffect(()=>{if(!s)return void o([]);const e=()=>{const e=[],a=i.current.get(s)?.parentElement?.getBoundingClientRect();if(!a)return;const l=e=>{const s=i.current.get(e);if(!s)return null;const t=s.getBoundingClientRect();return{x:t.left+t.width/2-a.left,y:t.top+t.height/2-a.top}};l(s)&&(t.forEach(t=>{if(t.fromPlayerId===s||t.toPlayerId===s){const s=l(t.fromPlayerId),a=l(t.toPlayerId);s&&a&&e.push({x1:s.x,y1:s.y,x2:a.x,y2:a.y,color:"#fb923c",moving:!0})}}),n.forEach(t=>{const a=t.playerId||t.voterId,n=t.targetId;if(a===s||n===s){const s=l(a),t=l(n);s&&t&&e.push({x1:s.x,y1:s.y,x2:t.x,y2:t.y,color:"#ef4444",moving:!1})}}),o(e))};e();const a=setInterval(e,100);return()=>{clearInterval(a)}},[s,e,t,n]),s&&0!==r.length?a.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-10 overflow-visible",children:[r.map((e,s)=>a.jsxs(T.Fragment,{children:[a.jsx("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:e.color,strokeWidth:"2",strokeDasharray:e.moving?"5,5":"none",className:e.moving?"animate-[dash_0.3s_linear_infinite]":"",markerEnd:`url(#arrowhead-${e.color.replace("#","")})`}),a.jsx("circle",{cx:e.x1,cy:e.y1,r:"3",fill:e.color})]},s)),a.jsxs("defs",{children:[a.jsx("marker",{id:"arrowhead-fb923c",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:a.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#fb923c"})}),a.jsx("marker",{id:"arrowhead-ef4444",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:a.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ef4444"})})]}),a.jsx("style",{children:"\n        @keyframes dash {\n          to {\n            stroke-dashoffset: -10;\n          }\n        }\n      "})]}):null},Z=({player:e,isMe:t,isSelected:n,canSelect:i,showRole:l,suspicionCount:r,voteCount:o,phase:d,isWolfTarget:h,isProtected:x,onViewHistory:m,onClick:u,innerRef:g,onMouseEnter:p,onMouseLeave:f})=>{const{ti:v,ts:j}=s(),b=e.role?z[e.role]:null,w=!e.isAlive;return a.jsxs("div",{ref:g,onMouseEnter:p,onMouseLeave:f,onTouchStart:p,onTouchEnd:f,onTouchCancel:f,className:"relative group/card",children:[a.jsxs("button",{onClick:u,disabled:!i,className:`relative flex flex-col items-center p-2 rounded-xl transition-all w-[100px] min-h-[120px] border border-slate-700 ${w?"opacity-80":"bg-white/5"} ${n?"ring-2 ring-yellow-400 bg-yellow-400/20":i?" hover:bg-white/10":""} ${i?"cursor-pointer":"cursor-default"} ${t?"ring-2 ring-blue-400":""}`,children:[a.jsxs("div",{className:"relative w-12 h-12 rounded-full flex items-center justify-center text-xl "+(w?"bg-gray-700":"bg-linear-to-br from-green-500 to-blue-500"),children:[(l||t)&&b?b.icon:e.isBot?a.jsx(P,{className:"w-5 h-5"}):a.jsx(I,{className:"w-5 h-5"}),w&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full hover:opacity-10 transition-opacity",children:a.jsx(y,{className:"w-6 h-6 text-red-400"})})]}),a.jsxs("span",{className:"mt-1 text-xs font-medium max-w-full text-center flex items-center justify-center",children:[e.username,t&&a.jsx(A,{className:"w-4 h-4 text-blue-400 ml-1 inline"})]}),(l||t)&&b&&a.jsx("span",{className:"text-xs mt-0.5 px-1.5 py-0.5 rounded-full max-w-full",style:{backgroundColor:b.color+"30",color:b.color},children:v(b.name)}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-1 mt-1",children:[e.loverId&&a.jsxs("span",{className:"text-[10px] bg-pink-500/30 text-pink-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[a.jsx(R,{className:"w-3 h-3"}),a.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"Cáº·p Ä‘Ã´i",en:"Lover"})})]}),x&&a.jsxs("span",{className:"text-[10px] bg-green-500/30 text-green-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[a.jsx(M,{className:"w-3 h-3"}),a.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"ÄÆ°á»£c báº£o vá»‡",en:"Protected"})})]}),h&&a.jsxs("span",{className:"text-[10px] bg-red-500/30 text-red-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[a.jsx(B,{className:"w-3 h-3"}),a.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[100px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"Má»¥c tiÃªu cá»§a sÃ³i",en:"Wolf target"})})]}),r>0&&a.jsxs("span",{className:"text-[10px] bg-red-500/30 px-1.5 py-0.5 rounded flex items-center gap-1",children:[a.jsx(q,{className:"w-3 h-3"}),a.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"Bá»‹ nghi ngá»",en:"Suspicion"})}),r]}),o>0&&a.jsxs("span",{className:"text-[10px] bg-orange-500/30 px-1.5 py-0.5 rounded flex items-center gap-1",children:[a.jsx(c,{className:"w-3 h-3"}),a.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"Sá»‘ phiáº¿u",en:"Vote count"})}),o]}),e.hasVoted&&"voting"===d&&a.jsxs("span",{className:"text-[10px] bg-green-500/30 text-green-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[a.jsx(V,{className:"w-3 h-3"}),a.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[60px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"ÄÃ£ vote",en:"Voted"})})]})]})]}),e.history.length>0&&a.jsx("button",{onClick:e=>{m?.(),e.stopPropagation()},className:"absolute -top-1 -right-1 p-1 bg-slate-600/80 rounded-full hover:bg-slate-500 transition-colors flex items-center justify-center w-6 h-6",title:j({vi:"Xem lá»‹ch sá»­",en:"View history"}),children:a.jsx("span",{className:"text-xs text-white/70",children:e.history.filter(e=>!e.isSecret).length})})]})},ee=({state:e,currentUserId:s,selectedTargetIds:t,onPlayerClick:n,canSelectPlayer:i,showRoles:r=!1})=>{const[o,c]=l.useState(null),[d,h]=l.useState(null),x=l.useRef(new Map),m=e.players.filter(e=>null!==e.id),u=e.players.find(e=>e.id===s),g="wolf"===u?.role,p=s=>"night"===e.phase&&g?e.nightActions.wolfVotes.filter(e=>e.targetId===s).length:"voting"===e.phase||"hunterRevenge"===e.phase?e.eliminationVotes.filter(e=>e.targetId===s).length:0,f=l.useMemo(()=>{let s=[];return"night"===e.phase&&g?s=[...e.nightActions.wolfVotes]:"voting"!==e.phase&&"hunterRevenge"!==e.phase||(s=[...e.eliminationVotes]),s},[e.phase,e.nightActions.wolfVotes,e.eliminationVotes,g]);return a.jsxs("div",{className:"relative flex flex-wrap justify-center gap-1 @md:gap-2 @md:p-2",children:[a.jsx(J,{players:m,hoveredPlayerId:d,suspicionMarkers:e.suspicionMarkers,votes:f,playerRefs:x}),o&&a.jsx(_,{player:o,onClose:()=>c(null)}),m.map(l=>{const o=!!i&&i(l),d=t.includes(l.id),m=g&&e.nightActions.wolfTarget===l.id,f=e.nightActions.bodyguardTarget===l.id&&("bodyguard"===u?.role||"end"===e.phase);return a.jsx(Z,{player:l,isMe:l.id===s,isSelected:d,canSelect:o,showRole:r||"end"===e.phase||e.config.revealRolesOnDeath&&!l.isAlive||g&&"wolf"===l.role||"seer"===u?.role&&u.history.some(e=>"info"===e.type&&e.content.en.startsWith("Seer Result:")&&e.content.en.includes(l.username)),suspicionCount:(v=l.id,e.suspicionMarkers.filter(e=>e.toPlayerId===v).length),voteCount:p(l.id),phase:e.phase,isWolfTarget:m,isProtected:f,onViewHistory:()=>{c(l)},onClick:()=>o&&l.id&&n?.(l.id),innerRef:e=>{e&&l.id?x.current.set(l.id,e):l.id&&x.current.delete(l.id)},onMouseEnter:()=>l.id&&h(l.id),onMouseLeave:()=>h(null)},l.id);var v})]})},se=({game:e,state:t,currentUserId:r,isHost:o})=>{const{ti:c}=s(),d=n(e=>e.username),h=i(e=>e.currentRoom),x=h?.players.some(e=>e.id===r),[m,p]=l.useState(""),f=t.players.findIndex(e=>e.id===r),v=t.players.filter(e=>null!==e.id).length;return a.jsxs("div",{className:"flex flex-col h-full items-center",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center justify-center gap-2",children:[a.jsx(k,{className:"w-6 h-6"})," ",c({vi:"Ma SÃ³i Online",en:"Werewolf Online"})]}),a.jsxs("p",{className:"text-white/60 text-sm pt-2",style:{color:v<t.minPlayers?"#ee5555":"white"},children:[c({vi:"Chá» ngÆ°á»i chÆ¡i...",en:"Waiting for players..."})," (",v,"/",t.minPlayers," ",c({vi:"tá»‘i thiá»ƒu",en:"minimum"}),")"]})]}),a.jsx("div",{className:"flex flex-wrap justify-center gap-1 @md:gap-2 mb-4",children:t.players.slice(0,12).map((s,t)=>a.jsx("div",{className:"p-2 rounded-xl flex flex-col items-center justify-center w-[100px] min-h-[120px] "+(s.id?"bg-white/10":"bg-white/5 border-2 border-dashed border-white/20"),children:s.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-linear-to-br from-purple-500 to-pink-500 flex items-center justify-center text-xl",children:s.isBot?a.jsx(P,{className:"w-5 h-5"}):a.jsx(I,{className:"w-5 h-5"})}),a.jsx("p",{className:"text-sm mt-1 truncate",children:s.username}),o&&s.id!==r&&a.jsxs("button",{onClick:()=>s.isBot?e.requestRemoveBot(t):e.requestLeaveSlot(t),className:"text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30 px-2 py-1 rounded-lg mt-1 flex items-center justify-center gap-1",children:[a.jsx(u,{className:"w-3 h-3"})," ",c({vi:"XÃ³a",en:"Remove"})]})]}):a.jsx("div",{className:"py-2",children:-1===f?x?a.jsxs("button",{onClick:()=>e.requestJoinSlot(t,d||`Guest ${Date.now().toString().slice(-4)}`),className:"text-xs bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 px-3 py-1.5 rounded-lg flex items-center justify-center gap-1",children:[a.jsx(I,{className:"w-3 h-3 inline"})," ",c({vi:"Tham gia",en:"Join"})]}):a.jsx("span",{className:"text-xs text-white/40",children:c({vi:"KhÃ¡ch",en:"Spectator"})}):o?a.jsxs("button",{onClick:()=>e.requestAddBot(t),className:"text-xs bg-green-500/20 text-green-400 hover:bg-green-500/30 px-3 py-1.5 rounded-lg flex items-center justify-center gap-1",children:[a.jsx(P,{className:"w-3 h-3"})," ",c({vi:"ThÃªm Bot",en:"Add Bot"})]}):a.jsx("span",{className:"text-xs text-white/40",children:c({vi:"Trá»‘ng",en:"Empty"})})})},t))}),o&&a.jsxs("div",{className:"w-full max-w-[300px] flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/5 p-2 rounded-lg",children:[a.jsx("label",{className:"text-xs text-white/60 whitespace-nowrap",children:c({vi:"Chá»n vai trÃ²:",en:"Select Role:"})}),a.jsxs("select",{value:m,onChange:e=>p(e.target.value),className:"flex-1 bg-white/10 text-white text-sm rounded outline-none p-1 border border-white/10",children:[a.jsx("option",{value:"",children:c({vi:"Ngáº«u nhiÃªn",en:"Random"})}),Object.keys(z).map(e=>a.jsxs("option",{value:e,children:[z[e]?.icon," ",c(z[e]?.name)]},e))]})]}),a.jsxs("button",{onClick:()=>e.requestStartGame(""===m?void 0:m),disabled:!e.canStartGame(),className:"w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 "+(e.canStartGame()?"bg-linear-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:[a.jsx(g,{className:"w-5 h-5"})," ",c({vi:"Báº¯t Ä‘áº§u game",en:"Start game"})]})]})]})},te=({game:e,state:t,currentUserId:n,selectedTarget:i,secondSelectedTarget:r})=>{const{ti:o}=s(),[c,d]=l.useState(!1),[h,x]=l.useState(!1),m=t.players.find(e=>e.id===n),u=m?.role,g=u===t.nightSubPhase||"wolf"===u&&"wolf"===t.nightSubPhase,p=u?z[u]:null,f="witch"===u&&n?t.witchPotions[n]:null,v=t.nightActions.wolfTarget?t.players.find(e=>e.id===t.nightActions.wolfTarget):null,j=t.players.find(e=>e.id===i);if(!m)return a.jsx("div",{className:"flex flex-col items-center justify-center h-full text-white/50 pt-10",children:o({vi:"Báº¡n lÃ  khÃ¡ch, khÃ´ng thá»ƒ tham gia hÃ nh Ä‘á»™ng",en:"You are a guest, you cannot participate in actions"})});if(!m?.isAlive)return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/50",children:[a.jsx(y,{className:"w-16 h-16 mb-4"}),a.jsxs("p",{children:[o({vi:"Báº¡n Ä‘Ã£ cháº¿t",en:"You are dead"}),"."," ",o({vi:"Äang chá» Ä‘Ãªm káº¿t thÃºc...",en:"Waiting for night to end..."})]})]});if(!p?.hasNightAction||!g){const e="seer"===u?m.history.find(e=>"info"===e.type&&e.day===t.day):null;return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx(k,{className:"w-16 h-16 text-indigo-400 mb-4 animate-pulse"}),a.jsxs("p",{className:"text-white/70 flex items-center justify-center gap-2",children:[a.jsx(k,{className:"w-4 h-4"})," ",o({vi:"LÃ ng Ä‘ang ngá»§",en:"Village is sleeping"})]}),a.jsxs("p",{className:"text-white/50 text-sm mt-2",children:[o({vi:"Chá» cÃ¡c vai trÃ² khÃ¡c hÃ nh Ä‘á»™ng",en:"Waiting for other roles to act"}),"..."]}),e&&a.jsxs("div",{className:"mt-6 p-4 bg-indigo-500/20 rounded-xl border border-indigo-500/50 max-w-xs",children:[a.jsxs("p",{className:"text-indigo-300 font-bold mb-1 flex items-center justify-center gap-2",children:[a.jsx(W,{className:"w-4 h-4"}),o({vi:"Káº¿t quáº£ soi:",en:"Seer Result:"})]}),a.jsx("p",{className:"text-white font-medium text-center",children:o(e.content)})]})]})}return a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("span",{className:"text-3xl",children:p.icon}),a.jsx("h3",{className:"text-lg font-bold",style:{color:p.color},children:o(p.name)}),a.jsx("p",{className:"text-sm text-white/60",children:o(p.nightActionDescription)}),i&&a.jsxs("p",{className:"text-sm mt-2 text-yellow-400 flex items-center justify-center gap-1",children:[a.jsx(B,{className:"w-4 h-4"})," ",t.players.find(e=>e.id===i)?.username,r&&a.jsxs("span",{children:[" ","&"," ",t.players.find(e=>e.id===r)?.username]})]})]}),"witch"===u&&f&&a.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[t.nightActions.wolfTarget&&a.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg text-center mb-1",children:a.jsxs("p",{className:"text-sm text-red-200",children:[o({vi:"Náº¡n nhÃ¢n Ä‘Ãªm nay:",en:"Tonight's victim:"})," ",a.jsx("span",{className:"font-bold",children:v?.username})]})}),a.jsxs("div",{className:"flex gap-2",children:[f.hasHealPotion&&t.nightActions.wolfTarget&&a.jsxs("button",{onClick:()=>{d(!c),c||x(!1)},className:"flex-1 p-3 rounded-xl flex flex-col items-center transition-all "+(c?"bg-green-500/30 ring-2 ring-green-400":"bg-white/10 hover:bg-white/30"),children:[a.jsx(H,{className:"w-6 h-6 text-green-400"}),a.jsxs("span",{className:"text-xs mt-1",children:[o({vi:"Cá»©u náº¡n nhÃ¢n",en:"Heal victim"}),":"," ",v?.username]})]}),f.hasKillPotion&&a.jsxs("button",{onClick:()=>{x(!h),h||d(!1)},disabled:!i,className:"flex-1 p-3 rounded-xl flex flex-col items-center transition-all "+(h?"bg-red-500/30 ring-2 ring-red-400":i?"bg-white/10 hover:bg-white/30":"bg-slate-500/10 cursor-not-allowed"),children:[a.jsx(y,{className:"w-6 h-6 text-red-400"}),a.jsxs("span",{className:"text-xs mt-1",children:[o({vi:"Giáº¿t ngÆ°á»i Ä‘Æ°á»£c chá»n",en:"Kill selected"}),":"," ",j?.username||o({vi:"[ChÆ°a chá»n]",en:"[Please select]"})]})]})]})]}),a.jsxs("button",{onClick:()=>{u&&("cupid"===u&&i&&r?e.requestNightAction(u,i,!1,!1,r):"witch"===u?e.requestNightAction(u,h?i:null,c,h,void 0):i&&e.requestNightAction(u,i,!1,!1,void 0))},disabled:"cupid"===u?!i||!r:"witch"!==u&&!i,className:"w-full py-3 rounded-xl font-bold bg-linear-to-r from-indigo-500 to-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(V,{className:"w-5 h-5 inline mr-2"}),o({vi:"XÃ¡c nháº­n",en:"Confirm"})]})]})},ae=({game:e,state:t,currentUserId:n,selectedTarget:i})=>{const[r,o]=l.useState(""),[c,d]=l.useState(!1),{ti:h,ts:x}=s(),m=t.players.find(e=>e.id===n),u=t.players.find(e=>e.id===i),g=()=>{r.trim()&&m?.isAlive&&(e.requestSendMessage(r.trim(),"text"),o(""))},p=t.suspicionMarkers.some(e=>e.fromPlayerId===n&&e.toPlayerId===i);return a.jsxs("div",{className:"flex flex-col h-full p-2",children:[i&&a.jsxs("div",{className:"text-center mb-2 text-sm text-yellow-400 flex items-center justify-center gap-1",children:[a.jsx(E,{className:"w-4 h-4"})," ",h({vi:"Äang chá»n:",en:"Selected:"})," ",t.players.find(e=>e.id===i)?.username]}),i&&m?.isAlive&&a.jsxs("button",{onClick:()=>e.requestAddSuspicion(i),className:"w-full mb-2 py-2 rounded-lg text-sm transition-colors "+(p?"bg-gray-500/20 text-gray-400 hover:bg-gray-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"),children:[a.jsx(b,{className:"w-4 h-4 inline mr-1"}),h(p?{vi:"Bá» nghi ngá»",en:"Unsuspect"}:{vi:"Nghi ngá»",en:"Suspect"})," ",u?.username]}),a.jsxs("button",{onClick:()=>d(!c),className:"flex items-center justify-between w-full p-2 bg-white/5 rounded-lg mb-2 text-sm",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(N,{className:"w-4 h-4"})," ",h({vi:"Tin nháº¯n nhanh",en:"Quick messages"})]}),c?a.jsx(G,{className:"w-4 h-4"}):a.jsx(L,{className:"w-4 h-4"})]}),c&&a.jsx("div",{className:"grid grid-cols-2 @md:grid-cols-4 gap-2 mb-2",children:U.map(s=>a.jsxs("button",{onClick:()=>(s=>{if(!m?.isAlive)return;if(s.targetRequired&&!i)return;const a=s.targetRequired&&i?x(s.text).replace("{target}",t.players.find(e=>e.id===i)?.username||""):x(s.text);e.requestSendMessage(a,"quick",i||void 0,s.id)})(s),disabled:s.targetRequired&&!i,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm text-left flex items-center gap-2 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:[a.jsx("span",{className:"text-lg",children:s.icon}),a.jsx("span",{className:"",children:s.targetRequired?x(s.text).replace("{target}",i?t.players.find(e=>e.id===i)?.username||"...":x({vi:"[chá»n ngÆ°á»i]",en:"[select]"})):x(s.text)})]},s.id))}),a.jsx("div",{className:"flex-1 overflow-auto bg-black/20 rounded-lg p-2 mb-2 min-h-[100px] max-h-[200px]",children:t.chatMessages.slice(-20).map(e=>a.jsxs("div",{className:"mb-1 text-sm text-left",children:[a.jsxs("span",{className:"font-medium text-blue-400",children:[e.playerName,":"]})," ",a.jsx("span",{className:"text-white/80",children:e.content})]},e.id))}),m?.isAlive&&(m.messagesRemaining||0)>0&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:r,onChange:e=>o(e.target.value.slice(0,100)),onKeyDown:e=>"Enter"===e.key&&g(),placeholder:x({vi:`Nháº­p tin nháº¯n... (${m.messagesRemaining}/${K.chatLimit})`,en:`Type message... (${m.messagesRemaining}/${K.chatLimit})`}),className:"flex-1 bg-white/10 rounded-lg px-3 py-2 text-sm outline-none"}),a.jsx("button",{onClick:g,className:"p-2 bg-blue-500 rounded-lg",children:a.jsx($,{className:"w-5 h-5"})})]})]})},ne=({game:e,state:t,currentUserId:n,selectedTarget:i})=>{const{ti:l}=s(),r=t.players.find(e=>e.id===n),o="hunterRevenge"===t.phase,d=o&&"hunter"===r?.role&&t.pendingElimination===r.id;if(o&&!d)return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx(B,{className:"w-16 h-16 text-red-500 mb-4 animate-pulse"}),a.jsx("p",{className:"text-white/70 text-center",children:l({vi:"Thá»£ sÄƒn Ä‘ang tÃ¬m má»¥c tiÃªu...",en:"Hunter is choosing a target..."})})]});if(r?.hasVoted){const e=t.eliminationVotes?.find(e=>e.voterId===n),s=e?.targetId?t.players.find(s=>s.id===e.targetId):null;return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx(V,{className:"w-16 h-16 text-green-400 mb-4"}),a.jsx("p",{className:"text-white/70",children:l(o?{vi:"ÄÃ£ báº¯n!",en:"Shot fired!"}:{vi:"ÄÃ£ bÃ¬nh chá»n! Äang chá» ngÆ°á»i khÃ¡c...",en:"Voted! Waiting for others..."})}),s&&!o&&a.jsx("p",{className:"text-yellow-400 mt-2 text-sm font-medium",children:l({vi:`Báº¡n Ä‘Ã£ chá»n: ${s.username}`,en:`You voted for: ${s.username}`})})]})}return a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"text-center mb-4",children:[o?a.jsx(B,{className:"w-10 h-10 mx-auto text-red-500 mb-2"}):a.jsx(c,{className:"w-10 h-10 mx-auto text-orange-400 mb-2"}),a.jsx("h3",{className:"text-lg font-bold",children:l(o?{vi:"KÃ©o ai Ä‘i cÃ¹ng?",en:"Who to take with you?"}:{vi:"BÃ¬nh chá»n loáº¡i ai?",en:"Who do you vote?"})}),i&&a.jsxs("p",{className:"text-sm mt-2 text-yellow-400 flex items-center justify-center gap-1",children:[a.jsx(B,{className:"w-4 h-4"})," ",t.players.find(e=>e.id===i)?.username]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{o?e.requestHunterShoot(""):e.requestCastVote(null)},className:"flex-1 py-3 bg-gray-600 rounded-xl font-bold",children:l({vi:"Bá» qua",en:"Skip"})}),a.jsx("button",{onClick:()=>{o?i&&e.requestHunterShoot(i):i&&e.requestCastVote(i)},disabled:!i,className:"flex-1 py-3 rounded-xl font-bold disabled:opacity-50 "+(o?"bg-linear-to-r from-red-600 to-red-800":"bg-linear-to-r from-orange-500 to-red-500"),children:l(o?{vi:"Báº¯n!",en:"Shoot!"}:{vi:"BÃ¬nh chá»n",en:"Vote"})})]})]})},ie=({game:e,state:t,showResetButton:n})=>{const{ts:i}=s(),l="wolf"===t.winner?i({vi:"Ma SÃ³i tháº¯ng!",en:"Wolf wins!"}):"village"===t.winner?i({vi:"DÃ¢n LÃ ng tháº¯ng!",en:"Village wins!"}):i({vi:"TÃ¬nh NhÃ¢n tháº¯ng!",en:"Lover wins!"}),r="wolf"===t.winner?y:"village"===t.winner?C:R;return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsxs("h2",{className:"text-xl font-bold flex items-center justify-center gap-2",children:[a.jsx(r,{className:"w-8 h-8"})," ",l]}),n&&a.jsxs("button",{onClick:()=>e.requestResetGame(),className:"mt-4 px-6 py-3 bg-linear-to-r from-green-500 to-emerald-500 rounded-xl font-bold flex items-center gap-2",children:[a.jsx(h,{className:"w-5 h-5"})," ChÆ¡i láº¡i"]})]})},le=({game:n,currentUserId:i=""})=>{const v=n,{confirm:j}=e(),{ti:b,ts:w}=s(),[y]=O(v),[N,k]=l.useState(!1),[S,C]=l.useState(!1),[R,T]=l.useState(null),[P,I]=l.useState(null),[A,M]=l.useState(!1),B=l.useRef(null);l.useEffect(()=>{const e=new IntersectionObserver(([e])=>{M(!e.isIntersecting&&e.boundingClientRect.top<0)},{threshold:0});return B.current&&e.observe(B.current),()=>e.disconnect()},[y.isGameStarted]);const[q,V]=l.useState(""),[E,G]=l.useState(null),L=y.players.find(e=>e.id===i),$=L?.role?z[L.role]:null,W="night"===y.phase?!!L?.isAlive&&L?.role===y.nightSubPhase:"hunterRevenge"===y.phase&&y.pendingElimination===i,H="night"===y.phase?`night-${y.nightSubPhase}`:"hunterRevenge"===y.phase?`hunter-${y.pendingElimination}`:y.phase;Y(H,(e,s)=>{y.isGameOver||null!==e&&t.playTurnSwitch(W)}),l.useEffect(()=>{T(null),I(null)},[y.phase,y.nightSubPhase]),l.useEffect(()=>{const e=(e=>{switch(e){case"setup":return"bg-linear-to-b from-slate-900 to-slate-800";case"night":return"bg-linear-to-b from-slate-950 to-indigo-950";case"voting":return"bg-linear-to-b from-orange-950 to-blue-800";case"elimination":return"bg-linear-to-b from-red-950 to-brown-800";default:return"bg-linear-to-b from-slate-800 to-slate-700"}})(y.phase);""===q?V(e):e!==q&&e!==E&&G(e)},[y.phase]);const D=e=>{return a.jsx("div",{className:(e?"fixed top-0 left-0 right-0 z-100 bg-slate-900/95 glass-blur border-b border-white/10 py-2 animate-in slide-in-from-top duration-300 shadow-2xl":"mb-3")+" flex justify-center w-full",children:a.jsxs("div",{className:"flex justify-between w-full max-w-[450px] "+(e?"px-4":"bg-slate-900/60 glass-blur p-2 px-4 rounded-xl border border-white/10 shadow-lg"),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[F(y.phase),a.jsxs("div",{className:"flex flex-col @md:flex-row @md:items-center @md:gap-2",children:[a.jsx("span",{className:"font-bold",children:b((s=y.phase,{setup:{en:"Setup",vi:"Thiáº¿t láº­p"},night:{en:"Night",vi:"ÄÃªm"},morning:{en:"Morning",vi:"SÃ¡ng"},discussion:{en:"Discussion",vi:"Tháº£o luáº­n"},voting:{en:"Voting",vi:"BÃ¬nh chá»n"},elimination:{en:"Elimination",vi:"Loáº¡i bá»"},hunterRevenge:{en:"Hunter's Revenge",vi:"Thá»£ SÄƒn tráº£ thÃ¹"},end:{en:"Game Over",vi:"Káº¿t thÃºc"}}[s]||s))}),y.day>0&&a.jsxs("span",{className:"text-white/60 text-sm",children:[b({vi:"NgÃ y",en:"Day"})," ",y.day]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:["end"!==y.phase?a.jsx(X,{endTime:y.phaseEndTime,isPaused:y.isPaused,pausedTimeRemaining:y.pausedTimeRemaining}):a.jsx(ie,{game:v,state:y,showResetButton:!1}),v.isHost&&"end"!==y.phase&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>y.isPaused?v.requestResumeGame():v.requestPauseGame(),className:"p-2 rounded-full transition-colors "+(y.isPaused?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-white/10 text-white/60 hover:bg-white/20"),title:y.isPaused?"Resume":"Pause",children:y.isPaused?a.jsx(g,{className:"w-5 h-5"}):a.jsx(p,{className:"w-5 h-5"})}),a.jsx("button",{onClick:async()=>{await j(w({vi:"Äáº¿m ngÆ°á»£c sáº½ Ä‘Æ°á»£c Ä‘áº·t vá» 5 giÃ¢y",en:"The countdown will be reset to 5 seconds"}),w({vi:"TÄƒng tá»‘c giai Ä‘oáº¡n?",en:"Skip phase?"}))&&v.requestSkipPhase()},className:"p-2 rounded-full transition-colors bg-white/10 text-white/60 hover:bg-white/20",title:"Skip",children:a.jsx(f,{className:"w-5 h-5"})})]})]})]})});var s};return a.jsxs("div",{className:`relative flex flex-col h-full ${q} rounded-lg text-white overflow-hidden pb-16!`,children:[E&&a.jsx("div",{className:`absolute inset-0 ${E} animate-slide-in z-0`,onAnimationEnd:()=>{V(E),G(null)}}),a.jsxs("div",{className:"relative z-10 flex flex-col h-full w-full pb-20 overflow-y-auto min-h-[500px] pt-2",children:["night"===y.phase?a.jsx(o,{className:"w-16 h-16 text-white absolute top-4 left-4 z-[-1]"}):"voting"==y.phase?a.jsx(c,{className:"w-16 h-16 text-yellow-500 absolute top-4 left-4 z-[-1]"}):"setup"!=y.phase?a.jsx(d,{className:"w-16 h-16 text-yellow-500 absolute top-4 left-4 z-[-1]"}):null,a.jsx("div",{className:"flex items-center gap-2 w-full justify-center",children:v.isHost&&y.isGameStarted&&a.jsxs("button",{onClick:async()=>{await j(w({vi:"Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n chÆ¡i láº¡i vÃ¡n nÃ y?",en:"Are you sure you want to reset this game?"}),w({vi:"ChÆ¡i láº¡i",en:"Play again"}))&&v.requestResetGame()},className:"p-2 bg-slate-500/20 text-slate-400 hover:bg-slate-500/30 rounded-lg text-xs flex items-center gap-1",children:[a.jsx(h,{className:"w-3 h-3"})," ",b({vi:"VÃ¡n má»›i",en:"New Game"})]})}),y.isGameStarted&&$&&a.jsx("div",{className:"flex flex-col items-center justify-center gap-4 mb-3 py-2",children:a.jsxs("div",{className:"px-4 py-2 rounded-xl flex flex-col items-center gap-2",style:{backgroundColor:$.color+"30",border:`2px solid ${$.color}`},children:[a.jsx("span",{className:"text-sm text-white/60",children:b({en:"You are",vi:"Báº¡n lÃ :"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:$.icon}),a.jsx("span",{className:"font-bold text-lg",style:{color:$.color},children:b($.name)})]}),a.jsx("span",{className:"text-sm text-white/60",children:b($.description)})]})}),y.isGameStarted&&a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:B,className:"w-full h-px -mt-2 pointer-events-none"}),A&&r.createPortal(D(!0),document.body),D(!1)]}),y.isGameStarted&&"setup"!==y.phase&&a.jsx(ee,{state:y,currentUserId:i,selectedTargetIds:[R,P],showRoles:"end"===y.phase,canSelectPlayer:e=>{const s=y.players.find(e=>e.id===i),t="hunterRevenge"===y.phase&&"hunter"===s?.role&&y.pendingElimination===s.id;return!(!s?.isAlive&&!t)&&(!(!e.isAlive&&"night"!==y.phase)&&("night"===y.phase?"cupid"===s?.role?e.isAlive:"seer"===s?.role?e.id!==i&&e.isAlive:"bodyguard"===s?.role?e.isAlive&&e.id!==y.nightActions.lastBodyguardTarget:("wolf"===s?.role||"witch"===s?.role)&&e.isAlive:("discussion"===y.phase||"voting"===y.phase||"hunterRevenge"===y.phase)&&(("voting"!==y.phase&&"hunterRevenge"!==y.phase||!s?.hasVoted)&&(e.isAlive&&e.id!==i))))},onPlayerClick:e=>{const s=y.players.find(e=>e.id===i);"night"===y.phase&&"cupid"===s?.role?R?R===e?T(null):P?P===e&&I(null):I(e):T(e):T(R===e?null:e)}}),a.jsx("div",{className:"flex-1",children:(()=>{switch(y.phase){case"setup":return a.jsx(se,{game:v,state:y,currentUserId:i,isHost:v.isHost});case"night":return a.jsx(te,{game:v,state:y,currentUserId:i,selectedTarget:R,secondSelectedTarget:P});case"morning":case"elimination":return a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx(d,{className:"w-16 h-16 text-yellow-400 mb-4"}),y.logs.slice(-3).map(e=>a.jsx("p",{className:"text-center mb-2",children:b(e.message)},e.id)),"morning"===y.phase&&"seer"===L?.role&&y.nightResult?.seerCheck&&a.jsxs("div",{className:"mt-4 p-4 bg-indigo-500/20 rounded-xl border border-indigo-500/50",children:[a.jsx("p",{className:"text-center text-indigo-300 font-bold mb-1",children:b({vi:"Káº¿t quáº£ soi:",en:"Seer Result:"})}),a.jsxs("p",{className:"text-center",children:[a.jsx("span",{className:"font-bold text-white",children:y.players.find(e=>e.id===y.nightResult?.seerCheck?.targetId)?.username})," ",y.nightResult.seerCheck.isWolf?a.jsx("span",{className:"text-red-400 font-bold",children:b({vi:"lÃ  MA SÃ“I!",en:"is a WEREWOLF!"})}):a.jsx("span",{className:"text-green-400 font-bold",children:b({vi:"lÃ  DÃ¢n LÃ ng",en:"is a Villager"})})]})]})]});case"discussion":return a.jsx(ae,{game:v,state:y,currentUserId:i,selectedTarget:R});case"voting":case"hunterRevenge":return a.jsx(ne,{game:v,state:y,currentUserId:i,selectedTarget:R});case"end":return a.jsx(ie,{game:v,state:y,showResetButton:v.isHost});default:return null}})()})]}),y.isGameStarted&&a.jsx("button",{onClick:()=>C(!0),className:"fixed bottom-4 left-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-blue-400 transition-colors z-40 shadow-lg border border-slate-500",title:w({en:"History",vi:"Lá»‹ch sá»­"}),children:a.jsx(x,{size:24})}),S&&a.jsx("div",{className:"fixed inset-0 bg-black/80 glass-blur z-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl max-w-lg w-full h-[80vh] max-h-[90%] overflow-hidden shadow-2xl flex flex-col",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between bg-slate-900",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-linear-to-br from-blue-500 to-cyan-500 flex items-center justify-center font-bold text-base",children:a.jsx(x,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white text-sm",children:b({en:"Game History",vi:"Lá»‹ch sá»­ vÃ¡n Ä‘áº¥u"})}),a.jsx("p",{className:"text-[10px] text-white/60",children:b({vi:"Nháº­t kÃ½ trÃ² chÆ¡i",en:"Game Log"})})]})]}),a.jsx("button",{onClick:()=>C(!1),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:a.jsx(u,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"flex-1 overflow-hidden p-2",children:a.jsx(Q,{state:y,currentUserId:i})})]})}),a.jsx("button",{onClick:()=>k(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:w({en:"Game Rules",vi:"Luáº­t chÆ¡i"}),children:a.jsx(m,{size:24})}),N&&r.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 glass-blur z-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full shadow-2xl relative",children:[a.jsxs("div",{className:"flex justify-between p-4 pr-2",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(m,{className:"w-6 h-6 text-yellow-500"}),b({en:"Game Rules: Werewolf",vi:"Luáº­t ChÆ¡i: Ma SÃ³i"})]}),a.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:a.jsx(u,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 pt-0 space-y-4 text-slate-300 leading-relaxed max-h-[80vh] overflow-y-auto",children:a.jsxs("div",{className:"space-y-4 text-slate-300 leading-relaxed",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:b({en:"Objective",vi:"Má»¥c tiÃªu"})}),a.jsxs("ul",{className:"list-disc pl-4 text-sm",children:[a.jsxs("li",{children:[a.jsxs("strong",{className:"text-red-400",children:["ğŸº ",b({en:"Werewolves",vi:"Ma SÃ³i"})]}),":"," ",b({en:"Kill villagers until wolves equal villagers.",vi:"Giáº¿t dÃ¢n lÃ ng cho Ä‘áº¿n khi sá»‘ sÃ³i báº±ng sá»‘ dÃ¢n."})]}),a.jsxs("li",{children:[a.jsxs("strong",{className:"text-blue-400",children:["ğŸ‘¤ ",b({en:"Villagers",vi:"DÃ¢n LÃ ng"})]}),":"," ",b({en:"Find and eliminate all wolves.",vi:"TÃ¬m vÃ  loáº¡i bá» táº¥t cáº£ ma sÃ³i."})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:b({en:"Roles",vi:"Vai TrÃ²"})}),a.jsxs("ul",{className:"list-disc pl-4 text-sm",children:[a.jsxs("li",{children:[a.jsxs("strong",{children:["ğŸ”® ",b({en:"Seer",vi:"TiÃªn Tri"})]}),":"," ",b({en:"Check one player's role each night.",vi:"Soi vai trÃ² cá»§a má»™t ngÆ°á»i chÆ¡i má»—i Ä‘Ãªm."})]}),a.jsxs("li",{children:[a.jsxs("strong",{children:["ğŸ›¡ï¸ ",b({en:"Bodyguard",vi:"Báº£o Vá»‡"})]}),":"," ",b({en:"Protect one player from wolves each night.",vi:"Báº£o vá»‡ má»™t ngÆ°á»i khá»i sÃ³i má»—i Ä‘Ãªm."})]}),a.jsxs("li",{children:[a.jsxs("strong",{children:["ğŸ§™ ",b({en:"Witch",vi:"PhÃ¹ Thá»§y"})]}),":"," ",b({en:"Has one healing potion and one killing potion.",vi:"CÃ³ má»™t bÃ¬nh thuá»‘c cá»©u vÃ  má»™t bÃ¬nh thuá»‘c Ä‘á»™c."})]}),a.jsxs("li",{children:[a.jsxs("strong",{children:["ğŸ¹ ",b({en:"Hunter",vi:"Thá»£ SÄƒn"})]}),":"," ",b({en:"Can shoot one person when dying.",vi:"CÃ³ thá»ƒ báº¯n má»™t ngÆ°á»i khi cháº¿t."})]}),a.jsxs("li",{children:[a.jsxs("strong",{children:["ğŸ’˜ ",b({en:"Cupid",vi:"Tháº§n TÃ¬nh YÃªu"})]}),":"," ",b({en:"Links two lovers. If one dies, the other follows.",vi:"Káº¿t Ä‘Ã´i hai ngÆ°á»i. Náº¿u má»™t ngÆ°á»i cháº¿t, ngÆ°á»i kia cháº¿t theo."})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:b({en:"Phases",vi:"Giai Äoáº¡n"})}),a.jsxs("ul",{className:"list-disc pl-4 text-sm",children:[a.jsxs("li",{children:[a.jsxs("strong",{children:["ğŸŒ™ ",b({en:"Night",vi:"ÄÃªm"})]}),":"," ",b({en:"Special roles wake up and perform actions.",vi:"CÃ¡c vai trÃ² Ä‘áº·c biá»‡t thá»©c dáº­y vÃ  hÃ nh Ä‘á»™ng."})]}),a.jsxs("li",{children:[a.jsxs("strong",{children:["â˜€ï¸ ",b({en:"Morning",vi:"SÃ¡ng"})]}),":"," ",b({en:"Announce who died last night.",vi:"ThÃ´ng bÃ¡o ai Ä‘Ã£ cháº¿t Ä‘Ãªm qua."})]}),a.jsxs("li",{children:[a.jsxs("strong",{children:["ğŸ’¬ ",b({en:"Discussion",vi:"Tháº£o Luáº­n"})]}),":"," ",b({en:"Players discuss to find the wolves.",vi:"NgÆ°á»i chÆ¡i tháº£o luáº­n Ä‘á»ƒ tÃ¬m ra sÃ³i."})]}),a.jsxs("li",{children:[a.jsxs("strong",{children:["ğŸ‘ ",b({en:"Voting",vi:"BÃ¬nh Chá»n"})]}),":"," ",b({en:"Vote to eliminate one suspect.",vi:"BÃ¬nh chá»n Ä‘á»ƒ treo cá»• má»™t káº» tÃ¬nh nghi."})]})]})]})]})})]})}),document.body)]})};export{le as default};
