import{u as e,j as t,b as s,d as l}from"./index-D69VEbX5.js";import{c as n,ab as a,X as r,J as i,$ as c,ae as o,B as d,a9 as x,a3 as m,u as h,az as u,ax as b,aC as g}from"./react-vendor-BYtLKAeB.js";import{S as p,b as v,f,M as j,c as y,A as N,P as w,J as B,a as k}from"./index-DR0znP1R.js";import"./socket-DRbsQkF5.js";import"./zustand-BLoNJECv.js";function P({isOpen:s,onClose:l,onConfirm:c,onClear:o,symbol:d,currentBalance:x,currentBet:m,currentBets:h}){const{ti:u}=e(),[b,g]=n.useState(m);if(n.useEffect(()=>{s&&g(m)},[s,m]),!s||!d)return null;const y=x;return a.createPortal(t.jsx("div",{className:"fixed inset-0 z-100 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:t.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-700 rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-800 bg-slate-800/50",children:[t.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[t.jsx("span",{children:p[d].emoji}),t.jsx("span",{children:u({vi:`C∆∞·ª£c v√†o ${p[d].vi}`,en:`Bet on ${p[d].en}`})})]}),t.jsx("button",{onClick:l,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",children:t.jsx(r,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"relative",children:[h.length>=v&&!h.find(e=>e.symbol===d)&&t.jsx("div",{className:"absolute inset-0 bg-black/50 z-10 flex items-center justify-center text-red-500",children:u({en:`Can only have max ${v} bets`,vi:`Ch·ªâ c√≥ th·ªÉ c∆∞·ª£c nhi·ªÅu nh·∫•t ${v} linh v·∫≠t`})}),t.jsxs("div",{className:" p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm text-slate-400",children:[t.jsx("label",{children:u({vi:"S·ªë ti·ªÅn c∆∞·ª£c",en:"Bet Amount"})}),t.jsxs("span",{children:[u({vi:"S·ªë d∆∞:",en:"Balance:"})," ",t.jsx("span",{className:"text-green-400 font-bold",children:f(x)})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:b,onChange:e=>{let t=Number(e.target.value);t>x&&(t=x),g(t)},min:0,max:y,className:"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-xl font-bold text-white focus:outline-hidden focus:ring-2 focus:ring-blue-500"}),t.jsx("button",{onClick:()=>g(y),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-lg transition-colors text-sm",children:u({vi:"X·∫¢ L√ÅNG",en:"MAX"})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("input",{type:"range",min:0,max:y,step:10,value:b,onChange:e=>{g(Number(e.target.value))},className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),t.jsxs("div",{className:"flex justify-between text-xs text-slate-500 font-mono",children:[t.jsx("span",{children:f(0)}),t.jsx("span",{children:f(y/2)}),t.jsx("span",{children:f(y)})]})]}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:[100,500,1e3,5e3].map(e=>t.jsxs("button",{onClick:()=>g(t=>Math.min(t+e,y)),disabled:b+e>y,className:"px-2 py-2 bg-slate-800 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 text-xs font-semibold rounded-lg transition-colors border border-slate-700",children:["+",f(e)]},e))})]}),t.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-800/50 flex gap-3",children:[t.jsx("button",{onClick:o,className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-lg transition-colors",children:u({vi:"Xo√° c∆∞·ª£c",en:"Clear bet"})}),t.jsxs("button",{onClick:()=>{b>=j&&b<=x&&(c(b),l())},disabled:b<j||b>y,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-700 disabled:text-slate-500 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[t.jsx(i,{className:"w-5 h-5"}),u({vi:"X√°c nh·∫≠n",en:"Confirm"})]})]})]})]})}),document.body)}function C({game:i,currentUserId:f=""}){const C=i,[R,S]=n.useState(C.getState()),{confirm:H,show:M}=s(),{ti:$,ts:T}=e(),{currentRoom:I}=l(),[U,q]=n.useState(!0),[W,G]=n.useState([]),[A,O]=n.useState(null),[E,z]=n.useState(null),L=E?R.playerPowerUps[f||""]?.[E]:void 0,[J,_]=n.useState(!1),[D,K]=n.useState([[],[],[]]),[V,F]=n.useState([0,0,0]),[X,Y]=n.useState(!1),[Q,Z]=n.useState(null),[ee,te]=n.useState(null),[se,le]=n.useState(null),ne=null!==ee?ee:f&&R.playersReady[f]||!1,ae=f?R.playerBalances[f]:void 0,re=(f?ne?R.currentBets[f]||[]:W:[]).filter(e=>e.amount>0),ie=Q?re.filter(e=>e.symbol===Q).reduce((e,t)=>e+t.amount,0):0,ce=re.reduce((e,t)=>e+t.amount,0),oe=ae?ae.currentBalance-ae.balanceHistory[ae.balanceHistory.length-2]:0,de=ae?ae.currentBalance-ce:0;n.useEffect(()=>C.onUpdate(e=>{if("rolling"===e.gamePhase&&"betting"===R.gamePhase){_(!0);const t=e=>{const t=[];for(let s=0;s<20;s++)t.push(N[Math.floor(Math.random()*N.length)]);return t.push(e),t},s=e.diceRoll;K([t(s[0]),t(s[1]),t(s[2])]),F([0,0,0]),[0,1,2].forEach(e=>{const t=1500+500*e,s=setInterval(()=>{F(t=>{const s=[...t];return s[e]=(s[e]+1)%21,s})},100);setTimeout(()=>{clearInterval(s),F(t=>{const s=[...t];return s[e]=20,s})},t)}),setTimeout(()=>{_(!1)},3e3)}S(e),"betting"===e.gamePhase&&e.currentRound!==R.currentRound&&(G([]),z(null)),"betting"!==e.gamePhase&&"betting"===R.gamePhase&&z(null),f&&null!==ee&&e.playersReady[f]===ee&&te(null),f&&null!==se&&e.activePowerUps[f]===se&&le(null)}),[C,R.currentRound,R.gamePhase]);const xe=e=>{const t=[];return Object.entries(R.currentBets).forEach(([s,l])=>{const n=l.find(t=>t.symbol===e);if(n){const e=R.playerBalances[s];e&&t.push({playerId:s,username:e.username,amount:n.amount,isBot:e.isBot})}}),t.sort((e,t)=>t.amount-e.amount)},me=async()=>{if(!C.isHost)return;W.length>0&&!ne&&C.requestSyncBets(W);const e=Object.values(R.playerBalances).filter(e=>!e.isBot).filter(e=>(e.playerId!==f||!(W.length>0||ne))&&(!(e.currentBalance<j)&&(0===(R.currentBets[e.playerId]||[]).length||!R.playersReady[e.playerId])));if(e.length>0){if(!(await H(T({vi:`C√≥ ${e.length} ng∆∞·ªùi ch∆∞a s·∫µn s√†ng (${e.map(e=>e.username).join(", ")}). B·∫°n c√≥ mu·ªën l·∫Øc x√∫c x·∫Øc lu√¥n kh√¥ng? `,en:`${e.length} player(s) haven't ready yet (${e.map(e=>e.username).join(", ")}). Roll dice anyway? `}),T({vi:"L·∫Øc x√∫c x·∫Øc",en:"Roll Dice"}))))return}C.requestRollDice()},he=e=>{if(e.length<2)return t.jsx("div",{className:"w-16 h-8"});const s=Math.max(...e),l=Math.min(...e),n=s-l||1,a=e.map((t,l)=>`${2+l/(e.length-1)*60},${2+(s-t)/n*28}`).join(" "),r=e[e.length-1],i=e[e.length-2],c=r===i?"#6b7280":r>i?"#10b981":"#ef4444";return t.jsx("svg",{width:64,height:32,className:"inline-block",children:t.jsx("polyline",{points:a,fill:"none",stroke:c,strokeWidth:"2",strokeLinejoin:"round"})})},ue=()=>t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 text-center",children:$({vi:"K·∫øt qu·∫£ x√∫c x·∫Øc",en:"Dice Roll"})}),t.jsx("div",{className:"flex justify-center gap-2 mb-4",children:J||R.diceRoll?D.map((e,s)=>{const l=V[s],n=R.diceRoll?R.diceRoll[s]:e[e.length-1],a=!J&&R.diceRoll&&re.some(e=>e.symbol===n);return t.jsx("div",{className:"relative w-20 h-20 bg-white rounded-xl overflow-hidden shadow-lg "+(a?"bg-linear-to-t from-green-300 to-blue-200 border-3 border-green-500":""),children:J&&e.length>0?t.jsx("div",{className:"absolute transition-transform duration-100 ease-linear",style:{transform:`translateY(-${80*l}px)`},children:e.map((e,s)=>t.jsx("div",{className:"w-20 h-20 flex items-center justify-center text-5xl border-b border-slate-200",children:p[e].emoji},s))}):t.jsx("div",{className:"w-20 h-20 flex items-center justify-center text-5xl "+(a?"animate-bounce":""),children:p[n].emoji})},s)}):t.jsx("div",{className:"text-slate-500 text-center",children:ne?$({vi:"ƒêang ch·ªù ch·ªß ph√≤ng quay x√∫c x·∫Øc...",en:"Waiting for host roll..."}):re.length?C.isHost?null:$({vi:"Vui l√≤ng b·∫•m S·∫µn s√†ng...",en:"Please press Ready..."}):$(de<j?{vi:"B·∫°n ƒë√£ h·∫øt ti·ªÅn...",en:"You are out of money..."}:{vi:"Vui l√≤ng ƒë·∫∑t c∆∞·ª£c tr∆∞·ªõc...",en:"Please place bets first..."})})}),C.isHost&&"betting"===R.gamePhase&&t.jsxs("button",{onClick:me,className:"w-full px-6 py-3 bg-linear-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 rounded-lg font-bold text-lg transition-all transform hover:scale-105",disabled:J,children:["üé≤ ",$({vi:"L·∫Øc x√∫c x·∫Øc",en:"Roll Dice"})," üé≤"]}),C.isHost&&"results"===R.gamePhase&&t.jsx("button",{onClick:()=>C.requestStartNewRound(),className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-bold transition-colors",children:$({vi:"V√≤ng ti·∫øp theo",en:"Next Round"})})]}),be=()=>t.jsxs("div",{className:"grid grid-cols-3 @md:gap-3 gap-1 relative",children:[ne&&"betting"===R.gamePhase&&t.jsx("div",{className:"absolute inset-0 bg-black/50 z-10 flex items-center justify-center",children:t.jsx("p",{className:"text-md text-orange-500 pt-2 animate-bounce",children:$({vi:"ƒêang ch·ªù ch·ªß ph√≤ng quay x√∫c x·∫Øc..",en:"Waiting for host to roll dice.."})})}),N.map(e=>{const s=(e=>{const t=re.find(t=>t.symbol===e);return t?.amount||0})(e),l=xe(e),n=(e=>xe(e).reduce((e,t)=>e+t.amount,0))(e),a=R.diceRoll?.includes(e)&&"results"===R.gamePhase,r=(()=>{if(0===R.recentRolls.length)return[];const e={gourd:0,crab:0,shrimp:0,fish:0,chicken:0,deer:0};return R.recentRolls.forEach(t=>{t.forEach(t=>{e[t]++})}),N.map(t=>({symbol:t,count:e[t]})).sort((e,t)=>t.count-e.count)})(),i=r.find(t=>t.symbol===e),c=i?.count||0,o=3*R.recentRolls.length,d=r.findIndex(t=>t.symbol===e),x=d<2&&R.recentRolls.length>=3,m=d>=4&&R.recentRolls.length>=3,h=(ne||C.isHost)&&ae?.currentBalance&&s>=(ae?.currentBalance||0)||l.filter(e=>{const t=R.playerBalances[e.playerId],s=R.currentBets[e.playerId];return t&&t.totalBet>=t.currentBalance&&1===s.length}).length>0;return t.jsxs("button",{onClick:()=>(e=>{if("betting"!==R.gamePhase)return;if(!ae)return;ae.currentBalance-ce<j&&!re.find(t=>t.symbol===e)?M(T({vi:"B·∫°n kh√¥ng ƒë·ªß ti·ªÅn ƒë·ªÉ ƒë·∫∑t c∆∞·ª£c (t·ªëi thi·ªÉu "+y(j)+")",en:"Insufficient funds (minimum "+y(j)+")"}),{type:"error",title:T({vi:"H·∫øt ti·ªÅn!",en:"Out of money!"})}):Z(e)})(e),disabled:"betting"!==R.gamePhase,className:`relative p-4 rounded-xl border-2 transition-all transform active:scale-95 ${a?"bg-linear-to-br from-yellow-500 to-orange-500 border-yellow-400 animate-pulse":s>0?"bg-linear-to-br from-blue-600 to-purple-600 border-blue-400":"bg-slate-800/50 border-slate-700 hover:border-slate-500"} ${"betting"===R.gamePhase?"cursor-pointer":"cursor-not-allowed opacity-75"} ${h&&"betting"===R.gamePhase?"ring-4 ring-red-500 ring-opacity-75 shadow-lg shadow-red-500/50 animate-pulse":""}`,children:[t.jsx("div",{className:"text-4xl mb-2",children:p[e].emoji}),R.recentRolls.length>=3&&t.jsxs("div",{className:"absolute @md:top-2 @md:left-2 top-1 left-1 flex items-center gap-1 bg-black/60 px-2 py-1 rounded-full text-xs font-bold",children:[x&&"üî•",m&&"‚ùÑÔ∏è",t.jsxs("span",{className:x?"text-orange-400":m?"text-cyan-400":"text-slate-300",children:[c,"/",o]})]}),h&&"betting"===R.gamePhase&&t.jsx("div",{className:"absolute @md:top-2 @md:left-2 top-1 left-1 bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-bounce flex items-center gap-1",children:"üî• ALL-IN"}),t.jsx("div",{className:"text-sm font-semibold mb-2",children:$(p[e])}),s>0&&t.jsx("div",{className:"absolute @md:top-2 @md:right-2 top-1 right-1 bg-white text-black px-2 py-1 rounded-full text-xs font-bold",children:y(s)}),l.length>0&&t.jsxs("div",{className:"mt-2 space-y-1",children:[t.jsxs("div",{className:"text-xs font-bold text-yellow-400 border-t border-slate-600 pt-2",children:[$({vi:"T·ªïng: ",en:"Total: "}),y(n)]}),t.jsx("div",{className:"max-h-20 overflow-y-auto space-y-0.5",children:l.map(e=>t.jsxs("div",{className:"text-xs flex justify-between items-center gap-1",children:[t.jsxs("span",{className:"truncate flex-1 text-left",children:[e.username,e.isBot&&" ü§ñ"]}),t.jsx("span",{className:"font-semibold text-green-400",children:y(e.amount)})]},e.playerId))})]})]},e)})]});return t.jsxs(t.Fragment,{children:[t.jsx(P,{isOpen:!!Q,onClose:()=>Z(null),onConfirm:e=>{if(!Q)return;const t=Q;if("betting"!==R.gamePhase)return;if(!ae)return;const s=Math.min(e,ae.currentBalance-ce);if(s<j)O(T({en:"Minimum bet is ",vi:"C∆∞·ª£c t·ªëi thi·ªÉu "})+y(j));else if(ne)O(T({en:"Cancel your bet to change the symbol",vi:"B·∫•m Hu·ª∑ c∆∞·ª£c ƒë·ªÉ thay ƒë·ªïi linh v·∫≠t"}));else{if(console.log(W),W.length>=v)return void O(T({en:"Maximum 3 bets only",vi:"Ch·ªâ ƒë∆∞·ª£c ƒë·∫∑t t·ªëi ƒëa 3 linh v·∫≠t "}));const e=W.findIndex(e=>e.symbol===t),l=[...W];e>=0?l[e].amount=s:l.push({symbol:t,amount:s}),G(l),O(null)}},onClear:()=>{G(e=>e.filter(e=>e.symbol!==Q)),Z(null)},currentBets:W,symbol:Q,currentBalance:ae?ae.currentBalance-ce:0,currentBet:ie}),t.jsxs("div",{className:"relative w-full h-full flex flex-col @md:gap-4 gap-2 @md:p-2 pb-20 overflow-y-auto",children:[!R.isMegaRound||"betting"!==R.gamePhase&&"rolling"!==R.gamePhase&&"results"!==R.gamePhase?t.jsxs("div",{className:"bg-linear-to-r from-slate-600 to-slate-800 rounded-xl p-2 text-white",children:[t.jsxs("h2",{className:"text-2xl font-bold text-center",children:["üé≤ ",$({vi:"B·∫ßu Cua",en:"Bau Cua"})," üé≤"]}),t.jsxs("p",{className:"text-center text-sm opacity-90",children:[$({vi:`V√≤ng ${R.currentRound}`,en:`Round ${R.currentRound}`}),R.jackpotPool>0&&` ‚Ä¢ ${$({vi:"H≈©",en:"Jackpot"})}: ${y(R.jackpotPool)} üíé`]}),t.jsx("div",{className:"text-center text-xs mt-1 text-yellow-300 font-semibold bg-black/20 py-1 rounded-lg",children:0===R.minBalanceToWin?t.jsxs("span",{children:["‚ò†Ô∏è ",$({vi:"Ch·∫ø ƒë·ªô: Sinh t·ªìn",en:"Mode: Survival"})]}):t.jsxs("span",{children:["üèÜ ",$({vi:"Ch·∫ø ƒë·ªô: ƒêua top",en:"Mode: Rich"})," (",$({vi:"M·ª•c ti√™u: ",en:"Goal: "}),y(R.minBalanceToWin),")"]})})]}):t.jsxs("div",{className:"bg-linear-to-r from-yellow-600 via-orange-500 to-yellow-600 rounded-xl p-4 text-white border-4 border-yellow-400 shadow-lg shadow-yellow-500/50 animate-pulse",children:[t.jsxs("h2",{className:"text-3xl font-bold text-center flex items-center justify-center gap-2",children:[t.jsx("span",{className:"animate-bounce",children:"üåü"}),$({vi:"V√íNG N·ªî H≈®",en:"MEGA ROUND"}),t.jsx("span",{className:"animate-bounce",children:"üåü"})]}),t.jsxs("p",{className:"text-center text-lg font-bold mt-2",children:[$({vi:"H≈©: ",en:"Jackpot: "}),y(R.jackpotPool)]}),t.jsx("p",{className:"text-center text-sm opacity-90",children:$({vi:"Ra 3 con gi·ªëng nhau = ƒÇn h·∫øt H≈©!",en:"Triple match = Win the Jackpot!"})})]}),"waiting"===R.gamePhase&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl @md:p-6 p-2 py-6 border border-slate-700",children:[t.jsx("p",{className:"text-xl mb-4 text-center",children:$({vi:"ƒêang ch·ªù b·∫Øt ƒë·∫ßu game...",en:"Waiting to start game..."})}),C.isHost&&t.jsxs("div",{className:"mb-6 p-4 bg-slate-700/50 rounded-xl border border-slate-600",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3 text-white text-center",children:$({vi:"C√†i ƒë·∫∑t ph√≤ng",en:"Room Settings"})}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t.jsxs("button",{onClick:()=>C.requestSetGameMode(0),className:"px-4 py-2 rounded-lg font-bold transition-all "+(0===R.minBalanceToWin?"bg-red-600 text-white ring-2 ring-red-400":"bg-slate-600 text-slate-300 hover:bg-slate-500"),children:["‚ò†Ô∏è ",$({vi:"Sinh t·ªìn",en:"Survival"})]}),t.jsxs("button",{onClick:()=>C.requestSetGameMode(1e8),className:"px-4 py-2 rounded-lg font-bold transition-all "+(R.minBalanceToWin>0?"bg-yellow-600 text-white ring-2 ring-yellow-400":"bg-slate-600 text-slate-300 hover:bg-slate-500"),children:["üèÜ ",$({vi:"Gi√†u c√≥",en:"Rich"})]})]}),R.minBalanceToWin>0&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[t.jsx("div",{className:"text-sm text-center text-slate-300 mb-2",children:$({vi:"M·ª•c ti√™u chi·∫øn th·∫Øng:",en:"Winning Goal:"})}),t.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:[1e4,1e5,1e6,1e8,5e8,1e9,2e9].map(e=>t.jsx("button",{onClick:()=>C.requestSetGameMode(e),className:"px-3 py-1 text-xs rounded-full border "+(R.minBalanceToWin===e?"bg-yellow-500/20 border-yellow-500 text-yellow-300":"bg-slate-800 border-slate-600 text-slate-400 hover:border-slate-400"),children:y(e)},e))})]}),t.jsx("div",{className:"text-xs text-center text-slate-400 mt-2 italic",children:0===R.minBalanceToWin?$({vi:"Ng∆∞·ªùi s·ªëng s√≥t cu·ªëi c√πng s·∫Ω chi·∫øn th·∫Øng.",en:"The last player with money wins."}):$({vi:"Ng∆∞·ªùi ƒë·∫ßu ti√™n ƒë·∫°t m·ª©c ti·ªÅn n√†y s·∫Ω chi·∫øn th·∫Øng.",en:"First player to reach this balance wins."})})]})]}),!C.isHost&&t.jsx("div",{className:"mb-6 text-center",children:t.jsx("div",{className:"inline-block px-4 py-2 rounded-lg bg-black/30 border border-slate-600",children:0===R.minBalanceToWin?t.jsxs("div",{className:"text-red-400 font-bold flex items-center gap-2",children:[t.jsx("span",{children:"‚ò†Ô∏è"})," ",$({vi:"Ch·∫ø ƒë·ªô: Sinh t·ªìn",en:"Mode: Survival"})]}):t.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-2",children:[t.jsx("span",{children:"üèÜ"})," ",$({vi:"Ch·∫ø ƒë·ªô: ƒêua top",en:"Rich Mode"}),t.jsxs("span",{className:"text-white",children:["(",y(R.minBalanceToWin),")"]})]})})}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-300",children:$({vi:`Ng∆∞·ªùi ch∆°i (${Object.keys(R.playerBalances).length}/${I?.maxPlayers})`,en:`Players (${Object.keys(R.playerBalances).length}/${I?.maxPlayers})`})}),t.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Object.values(R.playerBalances).map(e=>t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-3 flex items-center justify-between w-[150px]",children:[t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("p",{className:"font-semibold text-sm truncate",children:e.username}),t.jsxs("p",{className:"text-xs text-slate-400",children:[y(e.currentBalance),"üí∞"]})]}),e.isBot&&t.jsx("span",{className:"text-lg ml-2",children:"ü§ñ"}),C.isHost&&e.isBot&&t.jsx("button",{onClick:()=>C.requestRemoveBot(e.playerId),className:"p-2 text-red-400 hover:bg-slate-600 rounded-lg hover:cursor-pointer",children:t.jsx(d,{className:"w-4 h-4"})})]},e.playerId))})]}),C.isHost&&t.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[t.jsxs("button",{onClick:()=>C.requestAddBot(),className:"flex items-center gap-1 px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded-lg transition-colors disabled:bg-slate-800",disabled:Object.keys(R.playerBalances).length>=20,children:[$({vi:"Th√™m Bot",en:"Add Bot"}),t.jsx(x,{className:"w-4 h-4"})]}),t.jsxs("button",{onClick:()=>C.requestStartNewRound(),className:"flex items-center gap-1 px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg transition-colors disabled:bg-slate-800",disabled:0===Object.keys(R.playerBalances).length,children:[$({vi:"B·∫Øt ƒë·∫ßu",en:"Start Game"}),t.jsx(m,{className:"w-4 h-4"})]})]})]})}),"waiting"!==R.gamePhase&&t.jsxs("div",{className:"flex flex-col @md:grid @md:grid-cols-[1fr_300px] gap-4",children:[t.jsxs("div",{className:"flex flex-col gap-4",children:[ae&&t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400",children:$({vi:"S·ªë d∆∞",en:"Your Balance"})}),t.jsxs("p",{className:"text-2xl font-bold text-green-400 flex items-center gap-0",children:[y(ae.currentBalance),ae.balanceHistory.length>1&&t.jsxs("span",{className:"ml-2 text-sm font-bold animate-pulse "+(oe>=0?"text-green-300":"text-red-400"),children:[oe>=0?"+":"",y(oe)]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-slate-400",children:$({vi:"T·ªïng c∆∞·ª£c",en:"Total Bet"})}),t.jsx("p",{className:"text-xl font-semibold text-orange-400",children:y(ce)})]})]}),"betting"===R.gamePhase&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex gap-2",children:[!ne&&t.jsxs("button",{onClick:()=>{O(null),ne||G([]),C.requestClearBets()},className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors disabled:bg-slate-800 disabled:cursor-not-allowed",disabled:0===re.length,children:[$({vi:"X√≥a c∆∞·ª£c",en:"Clear Bets"})," ",re.length||""]}),!C.isHost&&t.jsx("button",{onClick:()=>{!ne&&W.length>0&&C.requestSyncBets(W),O(null),C.requestToggleReady(),te(!ne)},className:"flex-1 px-4 py-2 rounded-lg transition-colors disabled:bg-slate-800 disabled:cursor-not-allowed "+(ne?"bg-red-700 hover:bg-red-800":"bg-blue-700 hover:bg-blue-800"),disabled:0===re.length,children:ne?$({vi:"Hu·ª∑ s·∫µn s√†ng",en:"Cancel Ready"}):de<j&&0===re.length?$({vi:"H·∫øt ti·ªÅn",en:"Out of money"}):$({vi:"S·∫µn s√†ng",en:"Ready"})})]}),0===re.length?de<j?t.jsx("p",{className:"text-sm text-red-500 pt-2 animate-bounce",children:$({vi:"B·∫°n kh√¥ng ƒë·ªß ti·ªÅn c∆∞·ª£c",en:"Insufficient funds"})}):t.jsx("p",{className:"text-sm text-orange-500 pt-2 animate-bounce",children:$({vi:"Vui l√≤ng ch·ªçn linh v·∫≠t",en:"Please select a symbol"})}):ne||C.isHost?null:t.jsx("p",{className:"text-sm text-orange-500 pt-2 animate-bounce",children:$({vi:"B·∫•m S·∫µn s√†ng khi ƒë·∫∑t c∆∞·ª£c xong",en:"Press Ready when you finish betting"})}),A&&t.jsx("p",{className:"text-sm text-red-500 pt-2 animate-bounce",children:A})]})]}),be(),ae&&R.playerPowerUps[f]&&t.jsxs("div",{className:"flex flex-col gap-2 bg-slate-800/50 backdrop-blur-sm rounded-xl @md:p-4 p-2 border border-slate-700",children:[t.jsx("h3",{className:"font-semibold mb-3 text-slate-300",children:$({vi:"K·ªπ nƒÉng",en:"Power-ups"})}),t.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Object.keys(R.playerPowerUps[f]).map(e=>{const s=R.playerPowerUps[f][e],l=E===e,n=R.activePowerUps[f]===e,a=0===s.cooldown&&!n;return t.jsx("button",{onClick:()=>z(l?null:e),className:"relative p-3 rounded-lg border-2 transition-all cursor-pointer "+(n?"bg-linear-to-br from-green-600 to-emerald-600 border-green-400":l?"bg-linear-to-br from-blue-600 to-purple-600 border-blue-400 ring-2 ring-blue-300":a?"bg-slate-700 border-slate-600 hover:border-blue-400 hover:bg-slate-600":"bg-slate-800 border-slate-700 opacity-50"),children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[(r=e,{double_down:t.jsx(g,{className:"w-5 h-5"}),insurance:t.jsx(b,{className:"w-5 h-5"}),reveal_one:t.jsx(u,{className:"w-5 h-5"}),lucky_star:t.jsx(h,{className:"w-5 h-5"})}[r]),t.jsx("div",{className:"text-sm font-semibold truncate w-full text-center",children:$(w[e].name)}),!a&&!l&&!n&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 rounded-lg",children:t.jsx("span",{className:"text-2xl font-bold text-white",children:s.cooldown})}),n&&t.jsxs("div",{className:"text-xs text-green-300 font-bold",children:["‚úì ",$({vi:"ƒêang d√πng",en:"Active"})]})]})},e);var r})}),E&&t.jsxs("div",{className:"p-3 bg-purple-600/20 border border-purple-500 rounded-lg",children:[t.jsx("p",{className:"text-sm text-purple-300 font-semibold mb-1",children:$(w[E].name)}),t.jsx("p",{className:"text-sm text-slate-300",children:$(w[E].description)})]}),E&&!R.activePowerUps[f]&&"betting"===R.gamePhase&&t.jsx("button",{onClick:()=>{C.requestActivatePowerUp(E),le(E),z(null)},disabled:L&&L.cooldown>0,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-800 disabled:cursor-not-allowed rounded-lg font-bold text-white transition-colors",children:L&&L.cooldown>0?T({en:`ü™´ Wait for cooldown (${L.cooldown} rounds left)`,vi:`ü™´ ƒêang h·ªìi chi√™u (c√≤n ${L.cooldown} v√≤ng)`}):T({en:"‚ö° Use Power-up",vi:"‚ö° S·ª≠ d·ª•ng k·ªπ nƒÉng"})}),R.activePowerUps[f]&&R.playerPowerUps[f]&&"post_roll"===w[R.activePowerUps[f]]?.timing&&t.jsx("button",{onClick:()=>{C.requestDeactivatePowerUp(),le(null)},className:"w-full px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:$({vi:"Hu·ª∑ k·ªπ nƒÉng",en:"Cancel Power-up"})}),R.powerUpPredictions[f]&&t.jsxs("div",{className:"p-3 bg-green-600/20 border border-green-500 rounded-lg",children:[t.jsxs("p",{className:"text-xs text-green-300 font-semibold mb-2",children:["üîÆ"," ",$({vi:"D·ª± ƒëo√°n c·ªßa M·∫Øt Th·∫ßn",en:"Mystic Prediction"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-3xl flex items-center",children:[t.jsx("span",{className:"mr-2 text-xl",children:$(p[R.powerUpPredictions[f]?.symbol])}),p[R.powerUpPredictions[f]?.symbol]?.emoji]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-slate-400",children:$({vi:"ƒê·ªô ch√≠nh x√°c",en:"Accuracy"})}),t.jsxs("p",{className:"text-lg font-bold text-purple-300",children:[Math.round(100*R.powerUpPredictions[f]?.accuracy),"%"]})]})]})]}),R.playerPowerUps[f]?.lucky_star?.lastMultiplier&&"results"===R.gamePhase&&R.playerPowerUps[f].lucky_star.lastUsedRound===R.currentRound&&t.jsxs("div",{className:"p-3 bg-yellow-600/20 border border-yellow-500 rounded-lg mt-2",children:[t.jsxs("p",{className:"text-xs text-yellow-300 font-semibold mb-2",children:["üåü"," ",$({vi:"K·∫øt qu·∫£ Sao May M·∫Øn",en:"Lucky Star Result"})]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-2xl font-bold text-yellow-300",children:["x",R.playerPowerUps[f].lucky_star.lastMultiplier?.toFixed(1)]})})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[ue(),a.createPortal(t.jsx("div",{className:`fixed top-0 left-0 right-0 bottom-0 bg-slate-900/90 backdrop-blur-sm rounded-xl p-2 z-50 md:hidden ${J?"flex":"hidden"} items-center justify-center`,children:t.jsx("div",{className:"flex items-center justify-between",children:ue()})}),document.getElementById("root")),t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:$({vi:"B·∫£ng x·∫øp h·∫°ng",en:"Leaderboard"})}),t.jsx("div",{className:"space-y-2 max-h-120 overflow-y-auto",children:Object.values(R.playerBalances).sort((e,t)=>t.currentBalance-e.currentBalance).map((e,s)=>{const l=e.balanceHistory.length>1?e.currentBalance-e.balanceHistory[e.balanceHistory.length-2]:0;return t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg "+(e.playerId===f?"bg-blue-600/30 border border-blue-500":"bg-slate-700/50"),children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1 text-left",children:[t.jsxs("span",{className:"text-xl font-bold text-slate-400",children:["#",s+1]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"font-semibold",children:[e.username,e.isBot&&" ü§ñ"]}),t.jsxs("p",{className:"text-xs text-slate-400",children:[$({vi:"C∆∞·ª£c: ",en:"Bet: "}),y(e.totalBet),R.playersReady[e.playerId]&&" ‚úì"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 ",children:[R.currentRound>0&&he(e.balanceHistory),t.jsxs("div",{className:"flex flex-col items-end gap-0",children:[t.jsx("p",{className:"text-lg font-bold text-green-400",children:y(e.currentBalance)}),t.jsxs("span",{className:"text-xs "+(l>=0?"text-green-400":"text-red-400"),children:[l>0?"+":"",y(l)]})]})]})]},e.playerId)})})]})]})]}),"ended"===R.gamePhase&&(U?t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-300",children:t.jsx("div",{className:"bg-slate-900 border-2 border-yellow-500 rounded-2xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:t.jsxs("div",{className:"text-center space-y-6 relative z-10",children:[R.winners&&R.winners.length>0?t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-4xl font-bold text-yellow-500 animate-bounce",children:R.winners.length>1?$({vi:"CHI·∫æN TH·∫ÆNG",en:"WINNERS"}):$({vi:"CHI·∫æN TH·∫ÆNG",en:"WINNER"})}),t.jsx("div",{className:"flex flex-col gap-4 items-center justify-center py-4",children:R.winners.map(e=>{const s=R.playerBalances[e];return s?t.jsxs("div",{className:"bg-slate-800/80 p-4 rounded-xl border border-yellow-500/50 min-w-[200px] flex flex-col items-center gap-2 transform hover:scale-105 transition-transform",children:[t.jsx("div",{className:"text-4xl",children:"üëë"}),t.jsx("div",{className:"text-2xl font-bold text-white",children:s.username}),t.jsx("div",{className:"text-yellow-400 font-bold text-xl",children:y(s.currentBalance)})]},e):null})})]}):t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-4xl font-bold text-slate-400",children:$({vi:"K·∫æT TH√öC",en:"GAME OVER"})}),t.jsx("p",{className:"text-slate-300 text-lg",children:$({vi:"Kh√¥ng c√≥ ng∆∞·ªùi chi·∫øn th·∫Øng",en:"No winner this time"})}),t.jsx("p",{className:"text-slate-500 text-sm italic",children:$({vi:"T·∫•t c·∫£ ng∆∞·ªùi ch∆°i ƒë·ªÅu ƒë√£ h·∫øt ti·ªÅn",en:"All players ran out of money"})})]}),C.isHost&&t.jsx("div",{className:"flex justify-center pt-4",children:t.jsxs("button",{onClick:()=>C.requestResetGame(),className:"px-8 py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold text-xl shadow-lg hover:shadow-green-500/50 transition-all transform hover:-translate-y-1",children:[$({vi:"Ch∆°i l·∫°i",en:"Play Again"})," üîÑ"]})}),!C.isHost&&t.jsx("p",{className:"text-slate-500 animate-pulse",children:$({vi:"ƒêang ch·ªù ch·ªß ph√≤ng ch∆°i l·∫°i...",en:"Waiting for host to reset..."})}),t.jsx("button",{onClick:()=>q(!1),className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(r,{className:"w-6 h-6"})})]})})}):null),C.isHost&&"waiting"!==R.gamePhase&&t.jsx("div",{className:"flex gap-2 w-full items-center justify-center",children:t.jsxs("button",{onClick:async()=>{await H(T({en:"Are you sure you want to reset the game?",vi:"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ch∆°i l·∫°i kh√¥ng?"}),T({en:"Reset Game",vi:"Ch∆°i l·∫°i"}))&&C.requestResetGame()},className:"rounded-lg text-xs bg-slate-700 hover:bg-slate-600 px-4 py-2 flex items-center gap-2",children:[t.jsx(c,{className:"w-4 h-4"}),$({en:"Reset Game",vi:"Ch∆°i l·∫°i"})]})}),t.jsx("button",{onClick:()=>Y(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-50 shadow-lg border border-slate-500",title:T({en:"Rules",vi:"Lu·∫≠t ch∆°i"}),children:t.jsx(o,{size:24})}),X&&a.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full max-h-[80vh] overflow-y-auto shadow-2xl relative",children:[t.jsx("button",{onClick:()=>Y(!1),className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(r,{className:"w-5 h-5"})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(o,{className:"w-6 h-6 text-yellow-500"}),$({en:"Game Rules",vi:"Lu·∫≠t Ch∆°i"})]}),t.jsxs("div",{className:"space-y-4 text-slate-300 leading-relaxed",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:$({en:"Objective",vi:"M·ª•c ti√™u"})}),t.jsx("p",{children:$({en:"Place bets on the symbols you think will appear on the dice.",vi:"ƒê·∫∑t c∆∞·ª£c v√†o c√°c linh v·∫≠t b·∫°n nghƒ© s·∫Ω xu·∫•t hi·ªán tr√™n x√∫c x·∫Øc."})}),t.jsx("p",{children:$({vi:"2 ch·∫ø ƒë·ªô ch∆°i: ",en:"2 game modes: "})}),t.jsxs("ul",{className:"list-disc pl-4",children:[t.jsxs("li",{children:["üíÄ"," ",$({vi:"Sinh t·ªìn: Ai s·ªëng s√≥t (c√≤n ti·ªÅn) cu·ªëi c√πng s·∫Ω th·∫Øng.",en:"Survival: Last player standing (with money) wins."})]}),t.jsxs("li",{children:["üí∞"," ",$({vi:"Gi√†u c√≥: Ai ki·∫øm ƒë∆∞·ª£c ti·ªÅn ƒë·∫°t m·ª•c ti√™u tr∆∞·ªõc s·∫Ω th·∫Øng.",en:"Rich: The first player to reach the target amount wins."})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:$({en:"Rules",vi:"Quy T·∫Øc"})}),t.jsxs("ul",{className:"list-disc pl-4",children:[t.jsx("li",{children:$({en:"Max 3 bets each round.",vi:"ƒê·∫∑t c∆∞·ª£c nhi·ªÅu nh·∫•t 3 linh v·∫≠t m·ªói v√≤ng."})}),t.jsx("li",{children:$({en:"Press Ready and wait host to roll dices.",vi:"B·∫•m s·∫µn s√†ng v√† ƒë·ª£i ch·ªß ph√≤ng quay x√∫c x·∫Øc."})}),t.jsxs("li",{children:["‚úÖ"," ",$({en:"Each symbol matches: Win 2x your bet.",vi:"C∆∞·ª£c ƒë√∫ng linh v·∫≠t: Nh·∫≠n x2 ti·ªÅn c∆∞·ª£c c·ªßa linh v·∫≠t ƒë√≥."})]}),t.jsxs("li",{children:["‚ùå"," ",$({en:"Each symbol not matches: Lose bet on that symbol.",vi:"C∆∞·ª£c sai linh v·∫≠t: M·∫•t ti·ªÅn c∆∞·ª£c."})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:$({en:"Power-ups",vi:"K·ªπ NƒÉng"})}),t.jsx("p",{className:"mb-2",children:$({en:"Can use 1 power-up per round.",vi:"ƒê∆∞·ª£c d√πng 1 k·ªπ nƒÉng m·ªói v√≤ng."})}),t.jsx("ul",{className:"list-disc pl-4",children:Object.keys(w).map(e=>t.jsxs("li",{children:[t.jsxs("strong",{children:[$(w[e].emoji)," ",$(w[e].name),":"]})," ",$(w[e].description)]},e))})]}),t.jsxs("section",{children:[t.jsxs("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:[$({en:"Jackpot",vi:"N·ªï H≈©"})," üíé"]}),t.jsxs("ul",{className:"list-disc pl-4",children:[t.jsx("li",{children:$({en:`Jackpot is accumulated from ${100*B}% of all bets each round.`,vi:`H≈© ƒë∆∞·ª£c t√≠ch l≈©y t·ª´ ${100*B}% t·ªïng ti·ªÅn c∆∞·ª£c m·ªói v√≤ng.`})}),t.jsx("li",{children:$({en:`After every ${k} rounds, there will be a Jackpot round.`,vi:`Sau m·ªói ${k} v√≤ng, c√≥ 1 v√≤ng N·ªï H≈©.`})}),t.jsx("li",{children:$({en:"When 3 same symbols appear, the jackpot is triggered, split equally among those who has correct bet.",vi:"Khi 3 linh v·∫≠t gi·ªëng nhau xu·∫•t hi·ªán, h≈© s·∫Ω n·ªï, chia ƒë·ªÅu cho ai c∆∞·ª£c ƒë√∫ng."})})]})]})]})]})]})}),document.body)]})]})}export{C as default};
