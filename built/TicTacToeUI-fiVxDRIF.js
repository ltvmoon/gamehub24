import{u as e,a as s,j as t,g as a}from"./index-BrrJSH2n.js";import{j as r,u as n,v as l,X as o,e as i,K as c,M as m,O as x}from"./react-vendor-BZRLljed.js";import"./socket-DRbsQkF5.js";import"./zustand-B3oBTGP0.js";function d({game:d}){const g=d,[u,p]=r.useState(g.getState()),h=n(),{roomId:f}=l(),{setCurrentRoom:j}=e(),{clearMessages:v}=s(),b=g.getPlayerSymbol(),N=u.currentTurn===b,w=u.board,y=u.winningLine,O=u.lastMoveIndex;r.useEffect(()=>{g.onUpdate(e=>{p(e)})},[g]);return t.jsxs("div",{className:"flex flex-col items-center gap-6 p-4 w-full max-w-sm mx-auto",children:[t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx("div",{className:"text-xl font-bold flex items-center gap-2",children:u.gameOver?u.winner?t.jsx("span",{className:u.winner===b?"text-green-400":"text-red-400",children:u.winner===b?"You Won!":"Opponent Won!"}):t.jsx("span",{className:"text-yellow-400",children:"Draw!"}):t.jsx("span",{className:N?"text-primary-400":"text-slate-400",children:N?"Your Turn":"Opponent's Turn"})}),t.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-4",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(o,{className:"w-4 h-4 text-blue-400"})," You: ",b]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(i,{className:"w-4 h-4 text-red-400"})," Opponent:"," ","X"===b?"O":"X"]})]}),!u.gameOver&&u.players.O&&w.every(e=>null===e)&&N&&t.jsxs("button",{onClick:()=>{g.switchTurn()},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-300 text-sm font-medium transition-colors flex items-center gap-2",title:"Give first move to opponent",children:[t.jsx(c,{className:"w-4 h-4"}),"Give First Move"]})]}),g.isHostUser&&!u.players.O&&!u.gameOver&&t.jsxs("button",{onClick:()=>g.addBot(),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-300 text-sm font-medium transition-colors flex items-center gap-2",children:[t.jsx(m,{className:"w-4 h-4"}),"Play vs Bot"]}),t.jsx("div",{className:"grid grid-cols-3 gap-2 bg-slate-800 p-3 rounded-xl relative",children:w.map((e,s)=>{const a=y?.includes(s),r=O===s,n=N&&!e&&!u.gameOver;return t.jsxs("button",{onClick:()=>(e=>{u.gameOver||null===u.board[e]&&N&&g.requestMove(e)})(s),disabled:!n,className:`\n                w-20 h-20 sm:w-24 sm:h-24 rounded-lg flex items-center justify-center text-4xl transition-all\n                border border-slate-700\n                ${e?"bg-slate-700 shadow-inner":"bg-slate-750 hover:bg-slate-700"}\n                ${a?"bg-green-500/20 ring-2 ring-green-500":""}\n                ${r&&!a?"bg-amber-500/20 ring-2 ring-amber-500/50":""}\n                ${n?"cursor-pointer hover:ring-2 hover:ring-primary-500/50":"cursor-default"}\n              `,children:["X"===e&&t.jsx(o,{className:"w-12 h-12 "+(a?"text-green-400":"text-blue-400"),strokeWidth:2.5}),"O"===e&&t.jsx(i,{className:"w-10 h-10 "+(a?"text-green-400":"text-red-400"),strokeWidth:2.5})]},s)})}),u.gameOver&&t.jsxs("div",{className:"flex gap-3 w-full",children:[t.jsx("button",{onClick:()=>g.requestReset(),className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-slate-300 font-medium transition-colors flex items-center justify-center gap-2",children:"Play Again"}),t.jsxs("button",{onClick:()=>{f&&a().emit("room:leave",{roomId:f}),j(null),v(),h("/")},className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-slate-300 font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx(x,{className:"w-4 h-4"}),"Close Game"]})]})]})}export{d as default};
