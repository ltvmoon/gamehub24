import{b as e,a as s,u as t,S as l,j as n,g as a}from"./index-DXRPlG-o.js";import{bb as r,s as i,a5 as o,t as c,a3 as d,aW as x,az as h,bc as m,aC as u,b3 as p,aU as g,bd as b,b as f,aD as N,c as v,l as j,x as w,as as y,aE as C,ao as E,U as k,a1 as T,X as I,v as P,w as A,$ as D,be as S}from"./react-vendor-CUFzUArh.js";import"./BaseGame-k9e2yoZm.js";import{a as R,E as O,P as L}from"./types-B-DmnGr4.js";import{u as F}from"./useGameState-QolOp5k2.js";import{u as G}from"./usePrevious-BGcVKHLb.js";import{F as U,i as $}from"./FlyingCard-DylyB4Wx.js";import"./socket-DRbsQkF5.js";import"./zustand-D7bLx3wD.js";const B={[R.EXPLODING_KITTEN]:{name:{en:"EXPLODING KITTEN",vi:"MÃˆO Ná»”"},description:{en:"You explode! Unless you have a Defuse.",vi:"Báº¡n ná»• tung! Trá»« khi báº¡n cÃ³ lÃ¡ Gá»¡ Bom."},icon:b,bgColor:"bg-red-600",borderColor:"border-red-400",iconColor:"text-white",textColor:"text-white"},[R.DEFUSE]:{name:{en:"DEFUSE",vi:"Gá»  BOM"},description:{en:"Save yourself from a kitten.",vi:"Cá»©u báº£n thÃ¢n khá»i mÃ¨o ná»•."},icon:g,bgColor:"bg-green-600",borderColor:"border-green-400",iconColor:"text-white",textColor:"text-white"},[R.ATTACK]:{name:{en:"ATTACK",vi:"Táº¤N CÃ”NG"},description:{en:"End your turn and force next player to take 2 turns.",vi:"Káº¿t thÃºc lÆ°á»£t vÃ  báº¯t ngÆ°á»i chÆ¡i sau Ä‘i 2 lÆ°á»£t."},icon:p,bgColor:"bg-orange-600",borderColor:"border-orange-400",iconColor:"text-white",textColor:"text-white"},[R.SKIP]:{name:{en:"SKIP",vi:"Bá»Ž LÆ¯á»¢T"},description:{en:"End your turn without drawing a card.",vi:"Káº¿t thÃºc lÆ°á»£t mÃ  khÃ´ng cáº§n rÃºt bÃ i."},icon:u,bgColor:"bg-blue-600",borderColor:"border-blue-400",iconColor:"text-white",textColor:"text-white"},[R.FAVOR]:{name:{en:"FAVOR",vi:"THIá»†N Ã"},description:{en:"Choose a player to give you a card.",vi:"Chá»n má»™t ngÆ°á»i chÆ¡i Ä‘á»ƒ láº¥y 1 lÃ¡ bÃ i tá»« há»."},icon:m,bgColor:"bg-pink-600",borderColor:"border-pink-400",iconColor:"text-white",textColor:"text-white"},[R.SHUFFLE]:{name:{en:"SHUFFLE",vi:"XÃO BÃ€I"},description:{en:"Randomly mix the deck.",vi:"XÃ¡o trá»™n ngáº«u nhiÃªn xáº¥p bÃ i."},icon:h,bgColor:"bg-purple-600",borderColor:"border-purple-400",iconColor:"text-white",textColor:"text-white"},[R.SEE_THE_FUTURE]:{name:{en:"SEE FUTURE",vi:"XEM TRÆ¯á»šC"},description:{en:"Peek at the top 3 cards of the deck.",vi:"Xem 3 lÃ¡ bÃ i trÃªn cÃ¹ng cá»§a xáº¥p bÃ i."},icon:x,bgColor:"bg-cyan-600",borderColor:"border-cyan-400",iconColor:"text-white",textColor:"text-white"},[R.NOPE]:{name:{en:"NOPE",vi:"CHáº¶N!"},description:{en:"Stop other player's action.",vi:"Cháº·n hÃ nh Ä‘á»™ng cá»§a ngÆ°á»i chÆ¡i khÃ¡c."},icon:d,bgColor:"bg-slate-700",borderColor:"border-slate-500",iconColor:"text-white",textColor:"text-white"},[R.CAT_1]:{name:{en:"BLUE CAT",vi:"MÃˆO XANH"},description:{en:"Collect pairs for special actions.",vi:"Thu tháº­p Ä‘á»ƒ dÃ¹ng combo."},icon:c,bgColor:"bg-slate-800",borderColor:"border-slate-600",iconColor:"text-blue-400",textColor:"text-slate-300",isCombo:!0},[R.CAT_2]:{name:{en:"RED CAT",vi:"MÃˆO Äá»Ž"},description:{en:"Collect pairs for special actions.",vi:"Thu tháº­p Ä‘á»ƒ dÃ¹ng combo."},icon:c,bgColor:"bg-slate-800",borderColor:"border-slate-600",iconColor:"text-red-400",textColor:"text-slate-300",isCombo:!0},[R.CAT_3]:{name:{en:"PURPLE CAT",vi:"MÃˆO TÃM"},description:{en:"Collect pairs for special actions.",vi:"Thu tháº­p Ä‘á»ƒ dÃ¹ng combo."},icon:c,bgColor:"bg-slate-800",borderColor:"border-slate-600",iconColor:"text-purple-400",textColor:"text-slate-300",isCombo:!0},[R.CAT_4]:{name:{en:"YELLOW CAT",vi:"MÃˆO VÃ€NG"},description:{en:"Collect pairs for special actions.",vi:"Thu tháº­p Ä‘á»ƒ dÃ¹ng combo."},icon:c,bgColor:"bg-slate-800",borderColor:"border-slate-600",iconColor:"text-yellow-400",textColor:"text-slate-300",isCombo:!0},[R.CAT_5]:{name:{en:"GREEN CAT",vi:"MÃˆO LÃ"},description:{en:"Collect pairs for special actions.",vi:"Thu tháº­p Ä‘á»ƒ dÃ¹ng combo."},icon:c,bgColor:"bg-slate-800",borderColor:"border-slate-600",iconColor:"text-green-400",textColor:"text-slate-300",isCombo:!0},[R.REVERSE]:{name:{en:"REVERSE",vi:"Äáº¢O CHIá»€U"},description:{en:"Reverse direction, end turn without drawing.",vi:"Äáº£o chiá»u vÃ²ng chÆ¡i, káº¿t thÃºc lÆ°á»£t mÃ  khÃ´ng rÃºt bÃ i."},icon:o,bgColor:"bg-yellow-600",borderColor:"border-yellow-400",iconColor:"text-white",textColor:"text-white"},[R.TARGETED_ATTACK]:{name:{en:"TARGETED ATTACK",vi:"Táº¤N CÃ”NG ÄÃCH DANH"},description:{en:"Choose a player to take 2 turns.",vi:"Chá»n ngÆ°á»i pháº£i Ä‘i 2 lÆ°á»£t."},icon:i,bgColor:"bg-orange-600",borderColor:"border-orange-400",iconColor:"text-white",textColor:"text-white"},[R.ALTER_THE_FUTURE_3]:{name:{en:"ALTER FUTURE 3X",vi:"Äá»”I TÆ¯Æ NG LAI 3X"},description:{en:"View and reorder top 3 cards.",vi:"Xem vÃ  sáº¯p xáº¿p láº¡i 3 lÃ¡ trÃªn cÃ¹ng."},icon:r,bgColor:"bg-indigo-600",borderColor:"border-indigo-400",iconColor:"text-white",textColor:"text-white"},[R.ALTER_THE_FUTURE_5]:{name:{en:"ALTER FUTURE 5X",vi:"Äá»”I TÆ¯Æ NG LAI 5X"},description:{en:"View and reorder top 5 cards.",vi:"Xem vÃ  sáº¯p xáº¿p láº¡i 5 lÃ¡ trÃªn cÃ¹ng."},icon:r,bgColor:"bg-violet-600",borderColor:"border-violet-400",iconColor:"text-white",textColor:"text-white"}},H={2:{name:{en:"PAIR",vi:"Cáº¶P"},description:{en:"Steal a random card from another player.",vi:"CÆ°á»›p 1 lÃ¡ bÃ i ngáº«u nhiÃªn cá»§a ngÆ°á»i khÃ¡c."}},3:{name:{en:"THREE OF A KIND",vi:"Bá»˜ 3"},description:{en:"Name a card and steal it from another player.",vi:"Chá»n 1 loáº¡i bÃ i vÃ  cÆ°á»›p 1 lÃ¡ tá»« ngÆ°á»i chÆ¡i khÃ¡c."}},5:{name:{en:"FIVE DIFFERENT CARDS",vi:"Bá»˜ 5 KHÃC LOáº I"},description:{en:"Take any card from the discard pile.",vi:"Láº¥y báº¥t ká»³ lÃ¡ bÃ i nÃ o tá»« Ä‘á»‘ng bÃ i Ä‘Ã£ Ä‘Ã¡nh."}}},M=f.memo(({message:e,type:s,icon:t,isExiting:l})=>{const[a,r]=f.useState("enter");return f.useEffect(()=>{const e=setTimeout(()=>r("idle"),400);return()=>clearTimeout(e)},[]),f.useEffect(()=>{l&&r("exit")},[l]),n.jsxs("div",{className:`\n        flex items-center gap-3 px-4 py-3 rounded-2xl border-2 shadow-2xl\n        transition-all duration-400 ease-out\n        ${"exit"===a?"opacity-0 translate-y-8 scale-90":"enter"===a?"opacity-0 -translate-y-4 scale-95":"opacity-100 translate-y-0 scale-100"}\n        ${"success"===s?"bg-slate-900/90 border-green-500/50 text-green-400 backdrop-blur-md":"bg-slate-900/90 border-red-500/50 text-red-400 backdrop-blur-md"}\n      `,children:[n.jsx("div",{className:"p-2 rounded-xl "+("success"===s?"bg-green-500/20":"bg-red-500/20"),children:n.jsx(t,{className:"w-5 h-5"})}),n.jsx("span",{className:"text-xs font-black uppercase tracking-tight leading-tight",children:e})]})}),_=({state:e,game:s,mySlot:l})=>{const{ti:a}=t(),[r,i]=f.useState(Date.now());if(f.useEffect(()=>{const e=setInterval(()=>{i(Date.now())},100);return()=>clearInterval(e)},[]),e.gamePhase!==O.NOPE_WINDOW||!e.pendingAction)return null;const{action:c,timerStart:x,nopeCount:h,nopeChain:m,entryTimestamp:u}=e.pendingAction,p=c.targetPlayerId,g=p?e.players.find(e=>e.id===p):null,b=u?e.discardHistory.find(e=>e.timestamp===u):null,v=Math.max(0,L-(r-x)),j=l?.hand.filter(e=>e&&e[0]===R.NOPE).length||0,w="ALLOW"===e.pendingAction.responses[s.userId],y=h%2==1,C=m[m.length-1].playerId,E=s.userId===C||0===j,k=r-x,T=h>0&&k<2e3,P=Math.max(0,Math.ceil((2e3-k)/1e3));return n.jsx("div",{className:"fixed inset-0 z-70 flex items-center justify-center bg-black/70 backdrop-blur-xl",children:n.jsxs("div",{className:"bg-slate-950 border-4 border-slate-800 rounded-[2.5rem] p-4 shadow-[0_0_50px_rgba(0,0,0,0.5)] max-w-md w-full flex flex-col items-center gap-4 animate-in zoom-in duration-300 relative overflow-hidden",children:[n.jsx("div",{className:"absolute -top-24 -left-24 w-48 h-48 blur-[100px] opacity-20 rounded-full "+(y?"bg-red-500":"bg-green-500")}),n.jsxs("div",{className:"relative",children:[n.jsxs("svg",{className:"w-28 h-28 transform -rotate-90",children:[n.jsx("circle",{cx:"56",cy:"56",r:"52",fill:"transparent",stroke:"currentColor",strokeWidth:"4",className:"text-slate-800"}),n.jsx("circle",{cx:"56",cy:"56",r:"52",fill:"transparent",stroke:"currentColor",strokeWidth:"4",strokeDasharray:326.7,strokeDashoffset:326.7*(1-v/L),strokeLinecap:"round",className:"transition-all duration-100 "+(v<3e3?"text-red-500":"text-yellow-400")})]}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl font-black tabular-nums "+(v<3e3?"text-red-500 animate-pulse":"text-white"),children:(v/1e3).toFixed(1)})})]}),n.jsx("div",{className:"text-center w-full",children:n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full border mb-4 shadow-lg "+(y?"bg-red-600/20 text-red-400 border-red-500/30":"bg-green-600/20 text-green-400 border-green-500/30"),children:[y?n.jsx(I,{className:"w-5 h-5 font-black"}):n.jsx(N,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-black uppercase tracking-[0.2em]",children:a(y?{en:"BLOCKED!",vi:"ÄÃƒ CHáº¶N!"}:{en:"PROGRESSING...",vi:"Sáº®P THá»°C THI..."})})]})}),n.jsx("div",{className:"w-full flex flex-col gap-2 max-h-60 overflow-y-auto overflow-x-hidden custom-scrollbar pr-1 p-2",children:m.map((s,t)=>{const l=e.players.find(e=>e.id===s.playerId),r=s.cardType,i=0===t,o=B[r],c=o.isCombo&&b?.cards.length?H[b.cards.length]?.description:o.description;return n.jsxs("div",{className:"flex flex-wrap gap-2 p-3 rounded-2xl transition-all border "+(t===m.length-1?"bg-slate-800/80 border-slate-600 shadow-lg z-10 scale-[1.02]":"bg-slate-900/30 border-slate-800/50 opacity-60"),children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-wrap",children:[n.jsx("span",{className:"text-sm font-bold text-white truncate max-w-[100px] @md:max-w-none",children:l?.username||"Unknown"}),i&&g&&n.jsxs(n.Fragment,{children:[n.jsx(S,{className:"w-4 h-4 text-slate-500 shrink-0"}),n.jsx("span",{className:"text-sm font-bold text-blue-400 truncate max-w-[100px] @md:max-w-none",children:g.username})]})]}),n.jsx("span",{className:"text-xs text-slate-500 font-black tracking-tighter my-1",children:a(c)})]}),t===m.length-1&&n.jsx("div",{className:"absolute top-2 right-2 shrink-0 w-2 h-2 rounded-full bg-yellow-400 animate-ping"})]}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:i&&b&&b.cards.length>0?b.cards.map((e,s)=>n.jsx("div",{className:"shrink-0",children:K(e[0])},s)):n.jsx("div",{className:"shrink-0",children:K(r)})})]},t)})}),E?n.jsx("div",{className:"w-full h-24 flex items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),n.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),n.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full animate-bounce"})]}),n.jsx("span",{className:"text-md text-slate-400 animate-pulse",children:a({en:"Waiting for other players to react...",vi:"Chá» ngÆ°á»i chÆ¡i khÃ¡c pháº£n á»©ng..."})})]})}):n.jsxs("div",{className:"flex flex-col w-full gap-4 pt-2",children:[n.jsx("button",{onClick:()=>s.requestRespondNope("NOPE"),disabled:T||e.players.find(e=>e.id===s.userId)?.isExploded,className:`\n                group relative w-full py-5 rounded-2xl font-black text-2xl flex items-center justify-center gap-3 transition-all\n                ${T?"bg-slate-700 text-slate-400 cursor-not-allowed":y?"bg-green-600 hover:bg-green-500 text-white shadow-[0_10px_30px_rgba(34,197,94,0.4)] hover:-translate-y-1 active:scale-95":"bg-red-600 hover:bg-red-500 text-white shadow-[0_10px_30px_rgba(220,38,38,0.4)] hover:-translate-y-1 active:scale-95"}\n              `,children:T?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-8 h-8 border-4 border-slate-500 border-t-white rounded-full animate-spin"}),n.jsxs("div",{className:"flex flex-col items-start leading-none",children:[n.jsx("span",{className:"uppercase tracking-widest leading-none",children:a({en:"WAIT...",vi:"CHá»œ..."})}),n.jsxs("span",{className:"text-xs opacity-70 mt-1",children:[P,"s"]})]})]}):y?n.jsxs(n.Fragment,{children:[n.jsx(o,{className:"w-8 h-8 animate-wiggle"}),n.jsxs("div",{className:"flex flex-col items-start leading-none",children:[n.jsx("span",{className:"uppercase tracking-widest leading-none",children:a({en:"RE-NOPE!",vi:"Gá»  CHáº¶N!"})}),n.jsxs("span",{className:"text-xs opacity-70 mt-1",children:[a({en:"Cancel the block",vi:"Huá»· lá»‡nh cháº·n"})," (",a({en:j+" left",vi:"cÃ²n "+j}),")"]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(d,{className:"w-8 h-8 animate-wiggle"}),n.jsxs("div",{className:"flex flex-col items-start leading-none",children:[n.jsx("span",{className:"uppercase tracking-widest leading-none",children:a({en:"NOPE!",vi:"CHáº¶N!"})}),n.jsxs("span",{className:"text-xs opacity-70 mt-1",children:[a({en:"USE 1 CARD",vi:"DÃ™NG 1 LÃ"})," (",a({en:j+" left",vi:"cÃ²n "+j}),")"]})]})]})}),n.jsx("button",{onClick:()=>s.requestRespondNope("ALLOW"),disabled:w||e.players.find(e=>e.id===s.userId)?.isExploded,className:`\n                w-full py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all\n                ${w?"bg-slate-900 text-green-500/50 cursor-default border border-green-500/20":"bg-white/5 hover:bg-white/10 text-slate-300 border border-white/10"}\n              `,children:w?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex gap-1 mr-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-bounce [animation-delay:-0.3s]"}),n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-bounce"})]}),a({en:"READY",vi:"XONG"})]}):n.jsxs(n.Fragment,{children:[n.jsx(D,{className:"w-5 h-5"}),a({en:"SKIP / ALLOW",vi:"Bá»Ž QUA / Äá»’NG Ã"})]})})]})]})})},K=e=>{const s=B[e],t=s.icon;return n.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-md mx-1 align-baseline bg-slate-700",children:[n.jsx("span",{className:`${s.bgColor} ${s.borderColor} p-1.5 rounded-full`,children:n.jsx(t,{className:`w-4 h-4 ${s.iconColor}`})}),n.jsx("span",{className:`text-xs font-black uppercase tracking-tighter ${s.textColor}`,children:a(s.name)})]})};function Y({game:a}){const c=a,{confirm:h}=e(),[u]=F(c),[g,L]=f.useState(!1),{username:Y}=s(),{ti:X,ts:W}=t(),[z,q]=f.useState([]),[V,Q]=f.useState(null),[J,Z]=f.useState(null),[ee,se]=f.useState(null),[te,le]=f.useState([]),[ne,ae]=f.useState(null),[re,ie]=f.useState(null),[oe,ce]=f.useState(null),[de,xe]=f.useState(null),[he,me]=f.useState(!1),[ue,pe]=f.useState([]),ge=f.useRef(0),be=u.players.filter(e=>e.id),[fe,Ne]=f.useState(null),ve=f.useRef(Array(5).fill(null)),je=f.useRef(Array(5).fill(null)),we=f.useRef(null),ye=f.useRef(null),Ce=f.useRef(null),Ee=f.useRef(null),ke=f.useRef(u.discardPile.length),Te=f.useRef(u.players.map(e=>e.hand.length)),Ie=f.useRef(u.currentTurnIndex),Pe=u.players.findIndex(e=>e.id===c.userId),Ae=Pe>=0?u.players[Pe]:null,De=u.currentTurnIndex===Pe,Se=c.isHost;G(u.currentTurnIndex,(e,s)=>{u.gamePhase===O.PLAYING&&(null!==e&&l.playTurnSwitch(De),console.log(e,s))}),f.useEffect(()=>{if(u.lastAction&&!u.lastAction.isNoped&&u.lastAction.cardType===R.SEE_THE_FUTURE&&u.lastAction.playerId===c.userId&&Q(u.drawPile.slice(-3).reverse()),u.lastAction){const{action:e,playerId:s,isNoped:t,cardType:l}=u.lastAction,n=u.players.find(e=>e.id===s),a=n?.username||"Unknown";let i="",o=N;if("PLAY_CARD"===e.type){const e=B[l||R.EXPLODING_KITTEN];i=W(e.name),o=e.icon}else if("PLAY_COMBO"===e.type)i=2===e.cardIndices.length?W({en:"Pair Combo",vi:"Combo ÄÃ´i"}):W({en:"Triplet Combo",vi:"Combo Ba"}),o=j;else if("DRAW_CARD"===e.type)i=W({en:"Draw a card",vi:"RÃºt má»™t lÃ¡ bÃ i"}),o=C;else if("DEFUSE"===e.type)i=W({en:"Defuse the bomb",vi:"Gá»¡ bom"}),o=N;else if("REORDER_FUTURE"===e.type)i=W({en:"Alter the Future",vi:"Äá»•i TÆ°Æ¡ng Lai"}),o=r;else if("EXPLODE"===e.type){const e=++ge.current,s=W({en:`ðŸ’¥ ${a} EXPLODED!`,vi:`ðŸ’¥ ${a} Ä‘Ã£ Ná»” TUNG!`});return pe(t=>[...t,{id:e,message:s,type:"error",icon:b}]),void setTimeout(()=>{pe(s=>s.map(s=>s.id===e?{...s,isExiting:!0}:s)),setTimeout(()=>{pe(s=>s.filter(s=>s.id!==e))},500)},5e3)}const c=++ge.current,d=t?W({en:`${a}'s ${i} was BLOCKED!`,vi:`${i} cá»§a ${a} Ä‘Ã£ bá»‹ CHáº¶N!`}):"DRAW_CARD"===e.type?W({en:`${a} drew a card`,vi:`${a} Ä‘Ã£ rÃºt má»™t lÃ¡ bÃ i`}):W({en:`${a} executed ${i}`,vi:`${a} Ä‘Ã£ thá»±c hiá»‡n ${i}`});pe(e=>[...e,{id:c,message:d,type:t?"error":"success",icon:o}]),setTimeout(()=>{pe(e=>e.map(e=>e.id===c?{...e,isExiting:!0}:e)),setTimeout(()=>{pe(e=>e.filter(e=>e.id!==c))},500)},5e3)}},[u.lastAction,c.userId]);const Re=f.useMemo(()=>{if(!fe||!Ce.current)return null;const{fromPlayerIndex:e,direction:s,sourcePlayerIndex:t}=fe;let l=null,n=null;const a=e=>0===e&&$(Ee.current)?Ee.current:$(ve.current?.[e])?ve.current?.[e]:$(je.current?.[e])?je.current?.[e]:(0===e?Ee.current:ve.current?.[e]||je.current?.[e])||null;return"toDiscard"===s?(l=a(e),n=ye.current):"toHand"===s?(l=we.current,n=a(e)):"playerToPlayer"===s&&void 0!==t&&(l=a(t),n=a(e)),l&&n?{sourceRect:l.getBoundingClientRect(),targetRect:n.getBoundingClientRect()}:null},[fe]),Oe=f.useMemo(()=>{const e=[],s=Pe>=0?Pe:0;for(let t=0;t<5;t++){const l=(s+t)%5;e.push({slot:u.players[l],actualIndex:l})}return e},[u.players,Pe]);f.useEffect(()=>c.onUpdate(e=>{let s=null;if(e.discardPile.length>ke.current&&e.gamePhase===O.PLAYING){const t=e.discardPile[e.discardPile.length-1],l=Ie.current,n=Oe.findIndex(e=>e.actualIndex===l);s={card:t,fromPlayerIndex:n,direction:"toDiscard"}}e.players.forEach((t,l)=>{const n=Te.current[l]||0,a=t.hand.length;if(a>n&&(e.gamePhase===O.PLAYING||e.gamePhase===O.DEFUSING)){const n=l===Pe,r=Oe.findIndex(e=>e.actualIndex===l);let i;{const s=e.players.findIndex((e,s)=>{const t=Te.current[s]||0;return e.hand.length<t});-1!==s&&s!==l&&(i=Oe.findIndex(e=>e.actualIndex===s))}s={card:n?t.hand[a-1]:void 0,fromPlayerIndex:r,sourcePlayerIndex:i,direction:void 0!==i?"playerToPlayer":"toHand",hidden:!n}}}),s&&Ne(s),ke.current=e.discardPile.length,Te.current=e.players.map(e=>e.hand.length),Ie.current=e.currentTurnIndex}),[c,Pe,Oe]),f.useEffect(()=>{if(fe){const e=setTimeout(()=>{Ne(null)},400);return()=>clearTimeout(e)}},[fe]);const Le=(e,s=!1,t,l="medium",a=!1)=>{if(!e){const e={small:"w-12 h-16",medium:"w-20 h-28",large:"w-28 h-40"};return n.jsx("div",{className:`${e[l]} rounded-lg border-2 border-slate-700 bg-slate-800 flex items-center justify-center p-2 shadow-lg`,children:n.jsx("div",{className:"w-full h-full rounded bg-slate-700/50 flex items-center justify-center",children:n.jsx(b,{className:"w-1/2 h-1/2 text-slate-600 opacity-20"})})})}const[r]=e,i=B[r];if(!i)return null;const o=i.icon;return n.jsxs("div",{onClick:t,className:`${{small:"w-12 h-16 text-[10px]",medium:"w-20 h-28 text-xs",large:"w-28 h-40 text-sm"}[l]} relative rounded-lg border-2 ${i.borderColor} ${i.bgColor} flex flex-col items-center justify-center p-2 shadow-lg transition-all select-none ${s?"cursor-pointer hover:-translate-y-2 hover:shadow-xl":""}`,children:[a&&n.jsx("div",{className:"absolute top-1 left-1 opacity-80",children:n.jsx(o,{className:`${"small"===l?"w-3 h-3":"w-5 h-5"} ${i.iconColor}`})}),n.jsx(o,{className:`${"small"===l?"w-4 h-4":"w-8 h-8"} ${i.iconColor} mb-1`}),n.jsx("span",{className:`text-center font-bold ${i.textColor} ${"small"===l?"text-[8px]":"text-[10px] @md:text-xs"} leading-tight`,children:X(i.name)}),"large"===l&&n.jsx("span",{className:`text-xs text-center mt-1 opacity-80 ${i.textColor}`,children:X(i.description||{en:"",vi:""})})]})},Fe=()=>{if(!Ae)return null;const e=z.length,s=z.map(e=>Ae.hand[e]).filter(e=>!!e);if(0===s.length)return null;const t=s.every(e=>e[0]===s[0][0]),l=s[0][0];let a=!1,r="";return 1===e?l===R.NOPE?r=X({en:"CANNOT PLAY ALONE",vi:"CHá»ˆ DÃ™NG Äá»‚ CHáº¶N"}):l===R.DEFUSE?r=X({en:"DEFUSE ONLY ON BOMB",vi:"CHá»ˆ DÃ™NG KHI CÃ“ BOM"}):l>=R.CAT_1&&l<=R.CAT_5?r=X({en:"COMBO ONLY",vi:"Cáº¦N COMBO"}):a=!0:2===e||3===e?t?a=!0:r=X({en:"MUST BE SAME TYPE",vi:"PHáº¢I CÃ™NG LOáº I"}):r=X({en:"INVALID SELECTION",vi:"CHá»ŒN KHÃ”NG Há»¢P Lá»†"}),a&&!De&&(a=!1,r=X({en:"WAIT YOUR TURN",vi:"Äá»¢I Tá»šI LÆ¯á»¢T"})),n.jsxs("button",{onClick:()=>a&&(()=>{if(0!==z.length){if(1===z.length){const e=z[0],s=Ae.hand[e];s[0]===R.FAVOR?Z(e):s[0]===R.TARGETED_ATTACK?se(e):c.requestPlayCard(e)}else if(2===z.length||3===z.length){const e=z.map(e=>Ae.hand[e]);e.every(s=>s[0]===e[0][0])&&(ie(z),ce("target"))}q([])}})(),disabled:!a,className:`\n                    font-black py-2 px-6 rounded-full shadow-2xl border-2 flex items-center gap-2 transition-all w-max max-w-[90vw]\n                    ${a?"bg-green-600 hover:bg-green-500 text-white border-white animate-in zoom-in-50 duration-200":"bg-slate-700/80 text-slate-400 cursor-not-allowed border-slate-600 backdrop-blur-md"}\n                  `,children:[a?n.jsx(w,{className:"w-5 h-5 fill-current"}):n.jsx(I,{className:"w-5 h-5"}),n.jsx("span",{className:"uppercase",children:a?X(e>1?{en:`PLAY COMBO (${e})`,vi:`DÃ™NG COMBO (${e})`}:{en:"PLAY CARD",vi:"ÄÃNH BÃ€I"}):r})]})},Ge=(e,s)=>{const t=Oe[e],l=t.slot,a=u.currentTurnIndex===t.actualIndex,r=null===l.id;return n.jsx("div",{ref:t=>{s&&(s.current[e]=t)},className:`\n          p-2 @md:p-3 min-w-[100px] @md:min-w-[120px] rounded-xl transition-all border-2\n          ${a&&u.gamePhase===O.PLAYING?"border-primary-600 bg-primary-500/10 animate-bounce":"border-slate-700 bg-slate-800/50"}\n          ${r?"border-dashed":""}\n        `,children:r?n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("span",{className:"text-slate-500 text-[10px] text-center uppercase font-medium",children:["Slot ",t.actualIndex+1]}),n.jsxs("div",{className:"flex gap-1 mt-1",children:[Se&&u.gamePhase===O.WAITING&&n.jsx("button",{onClick:()=>c.requestAddBot(t.actualIndex),className:"flex-1 p-1 bg-slate-700 hover:bg-slate-600 rounded text-xs flex items-center justify-center",title:"Add Bot",children:n.jsx(E,{className:"w-5 h-5"})}),!Se&&u.gamePhase===O.WAITING&&!Ae&&n.jsxs("button",{onClick:()=>c.requestJoinSlot(t.actualIndex,Y),className:"flex-1 p-1 bg-slate-700 hover:bg-slate-600 rounded text-[10px] flex items-center justify-center gap-1",children:[n.jsx(k,{className:"w-4 h-4"}),"Join"]})]})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[l.isBot&&n.jsx(E,{className:"w-5 h-5 text-blue-400"}),l.isHost&&n.jsx(T,{className:"w-5 h-5 text-yellow-400"}),n.jsx("span",{className:"text-xs font-medium "+(l.isExploded?"text-red-400":"text-slate-200"),children:l.username}),Se&&u.gamePhase===O.WAITING&&l.isBot&&n.jsx("button",{onClick:()=>c.requestRemovePlayer(t.actualIndex),className:"p-0.5 hover:bg-slate-700 rounded ml-1",children:n.jsx(I,{className:"w-5 h-5 text-red-400"})})]}),u.gamePhase!==O.WAITING&&n.jsx("div",{className:"flex items-center gap-2",children:l.isExploded?n.jsx(b,{className:"w-4 h-4 text-red-500 animate-pulse"}):n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(j,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold",children:l.hand.length})]})})]})},t.actualIndex)},[Ue,$e]=f.useMemo(()=>{if(u.players.filter(e=>null!==e.id&&!e.isExploded).length<=1)return[null,null];const e=u.players.findIndex(e=>e.id===c.userId);if(-1===e)return[null,null];const s=u.players.length;let t=e;do{t=(t-u.direction+s)%s}while(null===u.players[t].id||u.players[t].isExploded);let l=e;do{l=(l+u.direction+s)%s}while(null===u.players[l].id||u.players[l].isExploded);return[u.players[t],u.players[l]]},[u.players,u.direction,c.userId]);return n.jsxs("div",{ref:Ce,className:"relative flex flex-col h-full p-2 @md:p-4 gap-2 @md:gap-4 overflow-hidden bg-slate-950 rounded-xl pb-16!",children:[n.jsxs("div",{className:"flex justify-center gap-2 @md:gap-8",children:[n.jsxs("div",{className:"flex @md:hidden flex-wrap justify-center gap-2 max-w-full px-2",children:[Ge(1,je),Ge(2,je),Ge(3,je),Ge(4,je)]}),n.jsxs("div",{className:"hidden @md:flex gap-8",children:[Ge(2,ve),Ge(3,ve)]})]}),n.jsxs("div",{className:"flex-1 flex items-center justify-between gap-4",children:[n.jsx("div",{className:"hidden @md:block",children:Ge(1,ve)}),n.jsxs("div",{className:"flex-1 flex flex-col items-center gap-6 justify-center",children:[n.jsxs("div",{className:"flex gap-4 @md:gap-8 items-center justify-center",children:[n.jsxs("button",{ref:we,onClick:()=>{De&&u.gamePhase===O.PLAYING&&c.requestDrawCard()},disabled:!De||u.gamePhase!==O.PLAYING,className:"relative w-20 h-28 @md:w-32 @md:h-44 rounded-xl bg-linear-to-br from-slate-800 to-slate-900 border-2 border-slate-700 shadow-2xl flex flex-col items-center justify-center transition-all hover:scale-105 active:scale-95 disabled:opacity-50 disabled:hover:scale-100",children:[n.jsx("div",{className:"bg-red-600 p-1.5 @md:p-2 rounded-lg mb-2",children:n.jsx(j,{className:"w-6 h-6 @md:w-8 @md:h-8 text-white"})}),n.jsx("span",{className:"text-[10px] @md:text-xs font-bold text-slate-400 uppercase tracking-widest",children:X({en:"DRAW",vi:"RÃšT BÃ€I"})}),n.jsx("span",{className:"absolute -top-2 -right-2 text-white text-[10px] @md:text-xs w-6 h-6 rounded-full flex items-center justify-center font-bold bg-slate-600",children:u.drawPile.length})]}),n.jsxs("div",{ref:ye,onClick:()=>me(!0),className:"relative w-20 h-28 @md:w-32 @md:h-44 rounded-xl bg-slate-900/50 border-2 border-dashed border-slate-700 flex items-center justify-center cursor-pointer hover:border-slate-500 transition-colors group",children:[n.jsx("div",{className:"absolute inset-x-0 -bottom-4 flex justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest whitespace-nowrap",children:X({en:"CLICK TO VIEW",vi:"Báº¤M Äá»‚ XEM"})})}),u.discardPile.length>0?n.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:u.discardPile.slice(-3).map((e,s)=>n.jsx("div",{className:"absolute transition-all",style:{transform:`rotate(${8*(s-1)}deg)`},children:Le(e,!1,void 0,"medium")},`${e[1]}-${s}`))}):n.jsx("span",{className:"text-[10px] text-center text-slate-600 font-bold uppercase tracking-widest",children:X({en:"DISCARD",vi:"BÃ€I ÄÃƒ ÄÃNH"})})]})]}),u.attackStack>1&&De&&n.jsxs("div",{className:"flex items-center gap-2 bg-orange-500/20 text-yellow-400 px-3 py-1 rounded-full border border-orange-500/30 animate-pulse",children:[n.jsx(p,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-xs font-bold uppercase",children:[u.attackStack," ",X({en:"TURNS REMAINING",vi:"LÆ¯á»¢T CÃ’N Láº I"})]})]})]}),n.jsx("div",{className:"hidden @md:block",children:Ge(4,ve)})]}),0===ue.length?null:n.jsx("div",{className:"flex flex-col gap-2 pointer-events-none w-full justify-center items-center px-4",children:[...ue].reverse().map(e=>n.jsx(M,{id:e.id,message:e.message,type:e.type,icon:e.icon,isExiting:e.isExiting},e.id))}),n.jsxs("div",{className:"flex flex-col items-center gap-2 @md:gap-4 bg-slate-900/80 backdrop-blur-md rounded-3xl p-3 @md:p-4 border-t border-slate-800 shadow-2xl z-10",children:[n.jsxs("div",{className:"text-xs text-center font-bold text-slate-400 bg-slate-800/50 px-4 py-1.5 rounded-full border border-slate-700/50",children:[Ae?.isExploded?X({en:"You exploded! You are out of the game.",vi:"Báº¡n Ä‘Ã£ Ná»• tung! Báº¡n Ä‘Ã£ bá»‹ loáº¡i khá»i trÃ² chÆ¡i."}):De?u.gamePhase===O.PLAYING?z.length>0?X({en:"Click 'PLAY' to use selected cards, or click to SELECT MORE.",vi:"Báº¥m 'ÄÃNH' Ä‘á»ƒ dÃ¹ng cÃ¡c lÃ¡ Ä‘Ã£ chá»n, hoáº·c CHá»ŒN THÃŠM."}):X({en:"Your turn! PLAY cards, or DRAW to end your turn.",vi:"Tá»›i lÆ°á»£t báº¡n! ÄÃNH BÃ€I, hoáº·c RÃšT BÃ€I Ä‘á»ƒ káº¿t thÃºc lÆ°á»£t."}):u.gamePhase===O.DEFUSING?X({en:"QUICK! Use a DEFUSE card or you'll explode!",vi:"NHANH LÃŠN! DÃ¹ng lÃ¡ Gá»  BOM náº¿u khÃ´ng báº¡n sáº½ ná»• tung!"}):u.gamePhase===O.INSERTING_KITTEN?X({en:"Choose where to put the kitten back in the deck.",vi:"Chá»n vá»‹ trÃ­ Ä‘á»ƒ Ä‘áº·t láº¡i mÃ¨o ná»• vÃ o xáº¥p bÃ i."}):u.gamePhase===O.NOPE_WINDOW?X({en:"Someone played a card! Can anyone NOPE it?",vi:"CÃ³ ngÆ°á»i vá»«a Ä‘Ã¡nh bÃ i! CÃ³ ai muá»‘n KHÃ”NG! (NOPE) khÃ´ng?"}):u.gamePhase===O.ALTER_THE_FUTURE?X({en:"Reorder the cards as you wish, then confirm.",vi:"Sáº¯p xáº¿p láº¡i cÃ¡c lÃ¡ bÃ i theo Ã½ muá»‘n, sau Ä‘Ã³ xÃ¡c nháº­n."}):"":X({en:`Waiting for ${u.players[u.currentTurnIndex]?.username}...`,vi:`Äang Ä‘á»£i ${u.players[u.currentTurnIndex]?.username}...`}),u.gamePhase===O.WAITING||u.gamePhase===O.ENDED?null:n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 w-full justify-center",children:[n.jsxs("span",{children:["â† ",X({en:"Prev",vi:"TrÆ°á»›c"}),": ",Ue?.username]}),n.jsx("span",{className:"text-slate-600",children:"|"}),n.jsxs("span",{children:[X({en:"Next",vi:"Sau"}),": ",$e?.username," â†’"]})]})]}),n.jsx("div",{className:"flex items-center gap-4",children:Pe>=0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"hidden @md:block",children:Ge(0,ve)}),n.jsx("div",{className:"flex @md:hidden",children:Ge(0,je)})]})}),u.gamePhase!==O.WAITING&&u.gamePhase!==O.ENDED&&(()=>{if(!Ae)return null;const e=[...Ae?.hand||[]].map((e,s)=>({card:e,originalIndex:s})).sort((e,s)=>e.card?s.card?e.card[0]!==s.card[0]?e.card[0]-s.card[0]:e.card[1]-s.card[1]:-1:1);return console.log("sorted",e),n.jsxs("div",{className:"w-full relative mt-4",children:[n.jsx("div",{ref:Ee,className:"flex justify-center h-32 @md:h-44 relative",children:e.map(({card:s,originalIndex:t},l)=>{if(!s)return console.error("Card is null",t,l,e),null;const a=z.includes(t),r=u.gamePhase===O.PLAYING||u.gamePhase===O.DEFUSING&&s[0]===R.DEFUSE,i=Ae.hand.length,o=l-(i-1)/2,d=2*o,x=i>12?.75:i>8?.85:1,h=o*(i>12?15:i>8?25:35);return n.jsx("div",{className:"absolute transition-all duration-300 ease-out",style:{transform:`translateX(${h}px) rotate(${d}deg) translateY(${a?-30:0}px) scale(${x})`,zIndex:a?30:l+10},children:Le(s,r,()=>{r&&(e=>{if(!Ae)return;const s=Ae.hand[e];if(s)if(u.gamePhase===O.PLAYING)if(z.includes(e))q(z.filter(s=>s!==e));else if(s&&s[0]>=R.CAT_1&&s[0]<=R.CAT_5){const e=Ae.hand.map((e,t)=>e&&e[0]===s[0]?t:-1).filter(e=>-1!==e),t=Array.from(new Set([...z,...e]));q(t)}else q([...z,e]);else u.gamePhase===O.DEFUSING&&s[0]===R.DEFUSE&&(c.requestDefuse(),q([]))})(t)},a?"large":"medium",i>1&&!a)},`${s[1]}-${l}`)})}),z.length>0&&n.jsx("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-50",children:Fe()})]})})(),u.gamePhase===O.WAITING&&Se&&n.jsxs("button",{onClick:()=>c.requestStartGame(),disabled:be.length<2,className:"px-12 py-3 bg-green-600 hover:bg-green-500 text-white rounded-full font-bold flex items-center gap-2 shadow-xl transition-all hover:scale-105 disabled:bg-slate-700 disabled:cursor-not-allowed",children:[n.jsx(w,{className:"w-5 h-5"}),be.length<2?X({en:"NEED 2+ PLAYERS/BOTS",vi:"Cáº¦N 2+ NGÆ¯á»œI CHÆ I/BOT"}):X({en:"START GAME",vi:"Báº®T Äáº¦U"})]}),Se&&u.gamePhase!==O.WAITING&&n.jsxs("button",{onClick:async()=>{await h(W({en:"Current game will be lost. Continue?",vi:"Tiáº¿n trÃ¬nh hiá»‡n táº¡i sáº½ bá»‹ máº¥t. Tiáº¿p tá»¥c?"}),W({vi:"ChÆ¡i láº¡i?",en:"New game?"}))&&c.requestNewGame()},className:"px-4 py-1 text-sm bg-slate-700 hover:bg-slate-600 text-slate-400 rounded-full flex items-center gap-2 transition-all hover:scale-105 cursor-pointer",children:[n.jsx(o,{className:"w-4 h-4"}),X({en:"New Game",vi:"ChÆ¡i láº¡i"})]})]}),u.gamePhase===O.DEFUSING&&De?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-slate-900 border-4 border-red-500 rounded-2xl p-8 shadow-2xl max-w-md w-full animate-pulse",children:[n.jsx("h3",{className:"text-3xl font-black text-red-500 mb-6 text-center tracking-widest",children:X({en:"EXPLODING!",vi:"MÃˆO Ná»”!"})}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsx(b,{className:"w-24 h-24 text-red-500 animate-bounce"})}),n.jsx("p",{className:"text-white text-center mb-8 font-bold",children:X({en:"You drew an Exploding Kitten! Use a Defuse now!",vi:"Báº¡n Ä‘Ã£ bá»‘c pháº£i MÃ¨o Ná»•! HÃ£y dÃ¹ng Gá»¡ Bom ngay!"})}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:()=>c.requestDefuse(),className:"px-12 py-4 bg-green-600 hover:bg-green-500 text-white rounded-full font-black text-xl shadow-lg transform hover:scale-105 transition-all",children:X({en:"DEFUSE!",vi:"Gá»  BOM!"})})})]})}):null,u.gamePhase===O.INSERTING_KITTEN&&De?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[n.jsxs("h3",{className:"text-xl font-bold text-red-400 mb-4 flex items-center gap-2",children:[n.jsx(b,{className:"w-6 h-6"}),X({en:"Re-insert Kitten",vi:"Äáº·t láº¡i Bomb mÃ¨o"})]}),n.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:X({en:"Choose where to hide the kitten back in the deck:",vi:"Chá»n vá»‹ trÃ­ Ä‘á»ƒ Ä‘áº·t láº¡i mÃ¨o ná»• vÃ o xáº¥p bÃ i:"})}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsx("button",{onClick:()=>c.requestInsertKitten(0),className:"py-3 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-600 text-sm font-medium transition-colors",children:X({en:"Top of deck",vi:"TrÃªn cÃ¹ng"})}),n.jsx("button",{onClick:()=>c.requestInsertKitten(Math.floor(u.drawPile.length/2)),className:"py-3 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-600 text-sm font-medium transition-colors",children:X({en:"Middle",vi:"á»ž giá»¯a"})}),n.jsx("button",{onClick:()=>c.requestInsertKitten(u.drawPile.length),className:"py-3 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-600 text-sm font-medium transition-colors",children:X({en:"Bottom",vi:"DÆ°á»›i cÃ¹ng"})}),n.jsx("button",{onClick:()=>c.requestInsertKitten(Math.floor(Math.random()*(u.drawPile.length+1))),className:"py-3 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-600 text-sm font-medium transition-colors",children:X({en:"Random",vi:"Ngáº«u nhiÃªn"})})]})]})}):null,(()=>{if(u.gamePhase!==O.FAVOR_GIVING||u.favorFrom!==c.userId&&u.favorTo!==c.userId)return null;const e=u.favorFrom===c.userId,s=u.players.find(s=>s.id===(e?u.favorTo:u.favorFrom))?.username||"Unknown";return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl p-6 shadow-2xl max-w-lg w-full",children:e?n.jsxs(n.Fragment,{children:[n.jsxs("h3",{className:"text-xl font-bold text-blue-400 mb-4 flex items-center gap-2",children:[n.jsx(m,{className:"w-6 h-6"}),X({en:"Give a Favor",vi:"Ban Æ¡n"})]}),n.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:X({en:`${s} requested a card. Pick one to give:`,vi:`${s} yÃªu cáº§u 1 lÃ¡ bÃ i. Chá»n 1 lÃ¡ Ä‘á»ƒ Ä‘Æ°a:`})}),n.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-h-60 overflow-y-auto p-2",children:Ae?.hand.map((e,s)=>n.jsx("div",{className:"shrink-0",children:Le(e,!0,()=>c.requestGiveFavor(s),"medium")},s))})]}):n.jsxs("div",{className:"flex flex-col items-center gap-6 py-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-slate-700 border-t-blue-500 animate-spin"}),n.jsx(m,{className:"absolute inset-0 m-auto w-6 h-6 text-blue-400 animate-pulse"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-bold text-white mb-2 uppercase tracking-widest",children:X({en:"FAVOR PENDING",vi:"ÄANG CHá»œ BAN Æ N"})}),n.jsx("p",{className:"text-slate-400 text-sm",children:X({en:`Waiting for ${s} to pick a card for you...`,vi:`Äang chá» ${s} chá»n bÃ i cho báº¡n...`})})]})]})})})})(),(()=>{if(null===J)return null;const e=u.players.filter(e=>null!==e.id&&e.id!==c.userId&&!e.isExploded);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[n.jsxs("h3",{className:"text-xl font-bold text-pink-400 mb-4 flex items-center gap-2",children:[n.jsx(m,{className:"w-6 h-6"}),X({en:"Choose Player",vi:"Chá»n ngÆ°á»i chÆ¡i"})]}),n.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:X({en:"Pick a player to give you a card:",vi:"Chá»n má»™t ngÆ°á»i chÆ¡i Ä‘á»ƒ láº¥y 1 lÃ¡ bÃ i tá»« há»:"})}),n.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:e.map(e=>n.jsxs("button",{onClick:()=>{c.requestPlayCard(J,e.id),Z(null)},className:"flex items-center justify-between p-4 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-600 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(k,{className:"w-5 h-5 text-slate-400"}),n.jsx("span",{className:"text-white font-bold",children:e.username})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(C,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-slate-400 text-xs font-bold",children:e.hand.length})]})]},e.id))}),n.jsx("button",{onClick:()=>Z(null),className:"w-full py-2 text-slate-400 hover:text-white transition-colors text-sm",children:X({en:"Cancel",vi:"Há»§y"})})]})})})(),(()=>{if(null===ee)return null;const e=u.players.filter(e=>null!==e.id&&e.id!==c.userId&&!e.isExploded);return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl p-6 shadow-2xl max-w-md w-full",children:[n.jsxs("h3",{className:"text-xl font-bold text-red-400 mb-4 flex items-center gap-2",children:[n.jsx(i,{className:"w-6 h-6"}),X({en:"Choose Target",vi:"Chá»n má»¥c tiÃªu"})]}),n.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:X({en:"Pick a player to take 2 turns:",vi:"Chá»n ngÆ°á»i pháº£i Ä‘i 2 lÆ°á»£t:"})}),n.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:e.map(e=>n.jsxs("button",{onClick:()=>{c.requestPlayCard(ee,e.id),se(null)},className:"flex items-center justify-between p-4 bg-slate-800 hover:bg-red-900/40 rounded-xl border border-slate-600 hover:border-red-500/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(k,{className:"w-5 h-5 text-slate-400"}),n.jsx("span",{className:"text-white font-bold",children:e.username})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(C,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-slate-400 text-xs font-bold",children:e.hand.length})]})]},e.id))}),n.jsx("button",{onClick:()=>se(null),className:"w-full py-2 text-slate-400 hover:text-white transition-colors text-sm",children:X({en:"Cancel",vi:"Há»§y"})})]})})})(),(()=>{if(u.gamePhase!==O.ALTER_THE_FUTURE||!u.alterCards||u.currentTurnIndex!==Pe)return null;if(te.length!==u.alterCount)return le(Array.from({length:u.alterCount},(e,s)=>s)),null;const e=(e,s)=>{if(e===s)return;const t=[...te],[l]=t.splice(e,1);t.splice(s,0,l),le(t)};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl p-6 shadow-2xl max-w-lg w-full",children:[n.jsxs("h3",{className:"text-xl font-bold text-indigo-400 mb-4 flex items-center gap-2",children:[n.jsx(r,{className:"w-6 h-6"}),X({en:"Alter the Future",vi:"Äá»•i TÆ°Æ¡ng Lai"})]}),n.jsx("p",{className:"text-slate-400 mb-4 text-sm",children:X({en:"Drag to reorder. Top card will be drawn first.",vi:"KÃ©o Ä‘á»ƒ sáº¯p xáº¿p. LÃ¡ trÃªn cÃ¹ng sáº½ Ä‘Æ°á»£c rÃºt trÆ°á»›c."})}),n.jsx("div",{className:"flex flex-col gap-3 mb-6",children:te.map((s,t)=>{const l=u.alterCards[s],a=B[l[0]],r=a.icon;return n.jsxs("div",{draggable:!0,onDragStart:()=>ae(t),onDragOver:e=>e.preventDefault(),onDrop:()=>{null!==ne&&(e(ne,t),ae(null))},onDragEnd:()=>ae(null),className:"flex items-center gap-3 p-3 rounded-xl border cursor-move transition-all "+(ne===t?"opacity-50 scale-95":"bg-slate-800 border-slate-600 hover:border-indigo-500/50"),children:[n.jsx("span",{className:"text-slate-500 font-bold w-6 text-center",children:t+1}),n.jsx("div",{className:`${a.bgColor} ${a.borderColor} p-2 rounded-lg`,children:n.jsx(r,{className:`w-5 h-5 ${a.iconColor}`})}),n.jsx("span",{className:`font-bold ${a.textColor} flex-1`,children:X(a.name)}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{type:"button",disabled:0===t,onClick:s=>{s.stopPropagation(),t>0&&e(t,t-1)},className:"p-1 rounded bg-slate-700 hover:bg-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:n.jsx(P,{className:"w-4 h-4 text-white"})}),n.jsx("button",{type:"button",disabled:t===te.length-1,onClick:s=>{s.stopPropagation(),t<te.length-1&&e(t,t+1)},className:"p-1 rounded bg-slate-700 hover:bg-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:n.jsx(A,{className:"w-4 h-4 text-white"})})]})]},s)})}),n.jsxs("button",{onClick:()=>{c.requestReorderFuture(te),le([])},className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2",children:[n.jsx(D,{className:"w-5 h-5"}),X({en:"Confirm Order",vi:"XÃ¡c nháº­n thá»© tá»±"})]})]})})})(),V?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl p-6 shadow-2xl max-w-md w-full relative",children:[n.jsx("button",{onClick:()=>Q(null),className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full text-slate-400 z-10",children:n.jsx(I,{className:"w-5 h-5"})}),n.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(x,{className:"w-6 h-6 text-blue-400"}),X({en:"See The Future",vi:"NhÃ¬n tháº¥u tÆ°Æ¡ng lai"})]}),n.jsx("p",{className:"text-slate-400 mb-6 text-sm",children:X({en:"Top 3 cards in the draw pile:",vi:"3 lÃ¡ bÃ i trÃªn cÃ¹ng cá»§a xáº¥p bÃ i:"})}),n.jsx("div",{className:"flex justify-center gap-2",children:V.map((e,s)=>n.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",style:{animationDelay:100*s+"ms"},children:Le(e)},s))}),n.jsx("div",{className:"mt-8 flex justify-center",children:n.jsx("button",{onClick:()=>Q(null),className:"px-8 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-full text-sm font-bold transition-all",children:X({en:"GOT IT",vi:"ÄÃƒ HIá»‚U"})})})]})}):null,n.jsx(_,{state:u,game:c,mySlot:Ae}),he?v.createPortal(n.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/80 backdrop-blur-md p-4",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl max-w-2xl w-full max-h-[80vh] flex flex-col shadow-2xl overflow-hidden animate-in zoom-in duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-700 bg-slate-900/50",children:[n.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(j,{className:"w-6 h-6 text-slate-400"}),X({en:"Discard History",vi:"Lá»‹ch sá»­ Ä‘Ã¡nh bÃ i"}),n.jsxs("span",{className:"text-sm font-normal text-slate-500 ml-2",children:["(",u.discardPile.length," ",X({en:"cards",vi:"lÃ¡"}),")"]})]}),n.jsx("button",{onClick:()=>me(!1),className:"p-2 hover:bg-white/10 rounded-full text-slate-400 transition-colors",children:n.jsx(I,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"p-4 @md:p-6 overflow-y-auto custom-scrollbar bg-slate-950/30",children:[n.jsx("div",{className:"flex flex-col gap-2",children:[...u.discardHistory].reverse().map((e,s)=>{const t=u.players.find(s=>s.id===e.playerId),l=e.targetPlayerId?u.players.find(s=>s.id===e.targetPlayerId):null,a=t?.id===c.userId;return n.jsxs("div",{className:`flex flex-col gap-3 p-4 bg-slate-800/40 rounded-2xl border ${e.isNoped?"border-red-500/30 bg-red-500/5":"border-slate-700/50"} animate-in fade-in slide-in-from-bottom-2`,style:{animationDelay:50*s+"ms"},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 border border-slate-600 flex items-center justify-center text-xs font-black text-white uppercase",children:t?.username?.[0]||"?"}),n.jsxs("span",{className:"text-sm font-black text-white leading-tight flex items-center gap-2 flex-wrap",children:[n.jsxs("span",{children:[t?.username||"Unknown",a&&W({en:" (You)",vi:" (Báº¡n)"})]}),l&&n.jsxs(n.Fragment,{children:[n.jsx(S,{className:"w-4 h-4 text-slate-500"}),n.jsxs("span",{className:"text-blue-400",children:[l.username,l.id===c.userId&&W({en:" (You)",vi:" (Báº¡n)"})]})]}),0===e.cards.length&&n.jsxs("span",{className:"text-slate-500 text-xs font-medium lowercase",children:["â€” ",X({en:"drew a card",vi:"vá»«a rÃºt bÃ i"})]}),n.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-tight",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]}),void 0!==e.isNoped&&n.jsx("div",{className:"px-2 py-1 rounded-md text-[10px] font-black uppercase tracking-widest flex items-center gap-1 shadow-sm border "+(e.isNoped?"bg-red-600/20 text-red-500 border-red-500/30":"bg-green-600/40 text-green-400 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.3)]"),children:e.isNoped?n.jsxs(n.Fragment,{children:[n.jsx(d,{className:"w-3 h-3"}),X({en:"Blocked",vi:"Bá»‹ cháº·n"})]}):n.jsxs(n.Fragment,{children:[n.jsx(D,{className:"w-3 h-3"}),X({en:"Executed",vi:"Xong"})]})})]}),e.cards.length>0&&n.jsxs("div",{className:"flex flex-col gap-3",children:[e.cards.length>1?n.jsxs("div",{className:"flex items-start gap-4 p-3 bg-slate-900/50 rounded-xl border border-slate-700/50 shadow-inner",children:[n.jsxs("div",{className:"relative shrink-0",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center border-2 ${B[e.cards[0][0]].borderColor} ${B[e.cards[0][0]].bgColor} shadow-lg`,children:n.jsx(j,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"absolute -bottom-1 -right-1 bg-yellow-400 text-slate-900 text-[10px] font-black px-1.5 py-0.5 rounded-md border-2 border-slate-900 shadow-sm",children:["x",e.cards.length]})]}),n.jsxs("div",{className:"flex flex-col justify-center",children:[n.jsxs("h4",{className:"text-xs font-black text-white uppercase tracking-wider mb-1",children:[W(H[e.cards.length]?.name)," ",W(B[e.cards?.[0]?.[0]]?.name)]}),n.jsx("span",{className:"text-xs text-slate-400 font-medium leading-relaxed",children:W(H[e.cards.length]?.description)})]})]}):null,n.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:n.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.cards.map((s,t)=>n.jsx("div",{children:Le(s,!1,void 0,e.cards.length>2?"small":"medium")},t))})})]}),e.nopeChain&&e.nopeChain.length>1&&n.jsx("div",{className:"mt-1 pt-2 border-t border-slate-700/30 flex flex-col gap-1.5",children:e.nopeChain.map((e,s)=>{if(0===s)return null;const t=u.players.find(s=>s.id===e.playerId);return n.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full "+(s%2==1?"bg-red-500":"bg-green-500")}),n.jsx("span",{className:"font-bold text-slate-300",children:t?.username||"Unknown"}),n.jsx("span",{className:"text-slate-500 uppercase font-black",children:W(s%2==1?{en:"Noped",vi:"Cháº·n"}:{en:"Re-Noped",vi:"Bá» cháº·n"})})]},s)})})]},`${e.timestamp}-${s}`)})}),0===u.discardHistory.length&&n.jsx("div",{className:"text-center py-20 text-slate-600 italic",children:X({en:"No cards played yet",vi:"ChÆ°a cÃ³ lÃ¡ bÃ i nÃ o Ä‘Æ°á»£c Ä‘Ã¡nh"})})]})]})}),document.body):null,"target"===oe&&re?n.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl max-w-sm w-full p-6 shadow-2xl animate-in zoom-in duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(p,{className:"w-6 h-6 text-red-500"}),W({en:"Choose Target",vi:"Chá»n Äá»‘i Thá»§"})]}),n.jsx("button",{onClick:()=>{ce(null),ie(null)},className:"p-1 hover:bg-white/10 rounded-full text-slate-400",children:n.jsx(I,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-md text-slate-400 mb-6 italic",children:X({en:n.jsxs(n.Fragment,{children:["Select a player to"," ",n.jsx("span",{className:"text-green-500 font-black",children:"STEAL A CARD"})," ","from using your ",re.length,"-card COMBO"]}),vi:n.jsxs(n.Fragment,{children:["Chá»n má»™t ngÆ°á»i chÆ¡i Ä‘á»ƒ"," ",n.jsx("span",{className:"text-green-500 font-black",children:"CÆ¯á»šP 1 LÃ BÃ€I"})," ","báº±ng COMBO ",re.length," LÃ cá»§a báº¡n."]})})}),n.jsx("div",{className:"space-y-3",children:be.filter(e=>e.id&&e.id!==c.userId&&!e.isExploded).map(e=>n.jsxs("button",{onClick:()=>{xe(e.id),2===re.length?(c.requestPlayCombo(re,e.id),ce(null),ie(null)):ce("card_type")},className:"w-full p-4 bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-xl flex items-center justify-between transition-all hover:scale-[1.02]",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(k,{className:"w-5 h-5 text-slate-400"}),n.jsx("span",{className:"font-bold text-white",children:e.username})]}),n.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-500 uppercase font-black",children:[n.jsx(j,{className:"w-3 h-3"}),e.hand.length]})]},e.id))})]})}):null,(()=>{if("card_type"!==oe||!re||!de)return null;const e=[R.DEFUSE,R.ATTACK,R.SKIP,R.FAVOR,R.SHUFFLE,R.SEE_THE_FUTURE,R.NOPE];return n.jsx("div",{className:"fixed inset-0 z-70 flex items-center justify-center bg-black/90 backdrop-blur-md p-4",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl max-w-lg w-full p-6 shadow-2xl animate-in zoom-in duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(m,{className:"w-6 h-6 text-yellow-500"}),W({en:"Name a Card",vi:"Äá»c TÃªn LÃ¡ BÃ i"})]}),n.jsx("button",{onClick:()=>ce("target"),className:"px-3 py-1 bg-slate-800 hover:bg-slate-700 rounded-full text-xs text-slate-400",children:W({en:"Back",vi:"Quay láº¡i"})})]}),n.jsx("p",{className:"text-md text-slate-400 mb-6 italic",children:X({en:n.jsxs(n.Fragment,{children:["If the target player has this card, you"," ",n.jsx("span",{className:"text-green-500 font-black",children:"STEAL IT!"})," ",re.length,"-card COMBO"]}),vi:n.jsxs(n.Fragment,{children:["Náº¿u Ä‘á»‘i thá»§ cÃ³ lÃ¡ bÃ i nÃ y, báº¡n sáº½"," ",n.jsx("span",{className:"text-green-500 font-black",children:"Láº¤Y ÄÆ¯á»¢C"})," ","nÃ³! COMBO ",re.length," LÃ cá»§a báº¡n."]})})}),n.jsx("div",{className:"grid grid-cols-2 @md:grid-cols-3 gap-3",children:e.map(e=>{const s=B[e],t=s.icon;return n.jsxs("button",{onClick:()=>{c.requestPlayCombo(re,de,e),ce(null),ie(null),xe(null)},className:`p-3 rounded-xl border-2 ${s.borderColor} ${s.bgColor} flex flex-col items-center gap-2 transition-all hover:scale-105 shadow-lg group`,children:[n.jsx(t,{className:`w-8 h-8 ${s.iconColor} group-hover:scale-110 transition-transform`}),n.jsx("span",{className:`text-[10px] font-black uppercase text-center ${s.textColor}`,children:W(s.name)})]},e)})})]})})})(),Ae?.isExploded&&u.gamePhase!==O.ENDED&&n.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 backdrop-blur-[2px] pointer-events-none",children:n.jsxs("div",{className:"bg-red-900/80 border-2 border-red-500 rounded-2xl p-6 shadow-2xl flex flex-col items-center gap-4 animate-in zoom-in duration-300 pointer-events-auto",children:[n.jsx(b,{className:"w-16 h-16 text-white animate-pulse"}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-2xl font-black text-white uppercase italic",children:X({en:"YOU EXPLODED!",vi:"Báº N ÄÃƒ Ná»” TUNG!"})}),n.jsx("p",{className:"text-red-200 font-bold",children:X({en:"Better luck next time!",vi:"ChÃºc báº¡n may máº¯n láº§n sau!"})})]})]})}),u.gamePhase===O.ENDED&&n.jsx("div",{className:"fixed inset-0 z-100 flex items-center justify-center bg-black/80 backdrop-blur-md",children:n.jsxs("div",{className:"flex flex-col items-center gap-8 animate-in zoom-in duration-500",children:[n.jsx("div",{className:"relative",children:n.jsx(N,{className:"w-32 h-32 text-yellow-400 animate-spin-slow"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-5xl font-black text-white mb-2 italic",children:u.players.find(e=>e.id===u.winner)?.username}),n.jsx("p",{className:"text-2xl text-yellow-400 font-bold tracking-widest uppercase",children:X({en:"VICTORIOUS!",vi:"CHIáº¾N THáº®NG!"})})]}),c.isHost?n.jsx("button",{onClick:()=>c.requestNewGame(),className:"px-8 py-3 bg-white text-slate-900 rounded-full font-black hover:bg-yellow-400 transition-colors cursor-pointer",children:X({en:"PLAY AGAIN",vi:"CHÆ I Láº I"})}):n.jsx("p",{className:"text-md text-slate-400",children:X({en:"Waiting for host..",vi:"Äang chá» chá»§ phÃ²ng.."})})]})}),n.jsx(U,{containerRef:Ce,sourceRect:Re?.sourceRect,targetRect:Re?.targetRect,isOpen:!!fe,children:n.jsxs("div",{className:"w-20 h-28 relative",children:[fe?.card&&Le(fe.card,!1,void 0,"medium"),fe?.hidden&&n.jsx("div",{className:"absolute inset-0 bg-slate-800 rounded-lg border-2 border-slate-600 flex items-center justify-center",children:n.jsx(j,{className:"w-8 h-8 text-slate-500"})})]})}),n.jsx("button",{onClick:()=>L(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-400 transition-colors z-40 shadow-lg border border-slate-500",title:"Rules",children:n.jsx(y,{size:24})}),g&&v.createPortal(n.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/80 p-4",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full shadow-2xl relative",children:[n.jsxs("div",{className:"flex justify-between p-4 pr-2",children:[n.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(y,{className:"w-6 h-6 text-yellow-500"}),X({en:"Game Rules: Exploding Kittens",vi:"Luáº­t ChÆ¡i: MÃ¨o Ná»•"})]}),n.jsx("button",{onClick:()=>L(!1),className:"p-2 hover:bg-white/10 rounded-full text-slate-400",children:n.jsx(I,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-4 pt-0 space-y-4 text-slate-300 leading-relaxed max-h-[80vh] overflow-y-auto",children:[n.jsx("p",{children:X({en:"Exploding Kittens is a highly-strategic, kitty-powered version of Russian Roulette.",vi:"MÃ¨o Ná»• (Exploding Kittens) lÃ  má»™t board game tháº» bÃ i chiáº¿n thuáº­t pha láº«n may rá»§i cá»±c ká»³ hÃ i hÆ°á»›c."})}),n.jsx("h3",{className:"text-lg font-bold text-yellow-400",children:X({en:"1. Goal",vi:"1. Má»¥c tiÃªu"})}),n.jsx("p",{children:X({en:n.jsxs(n.Fragment,{children:["Be the last player alive by avoiding the"," ",K(R.EXPLODING_KITTEN),". If you draw one without a ",K(R.DEFUSE),", you are out!"]}),vi:n.jsxs(n.Fragment,{children:["Sá»‘ng sÃ³t Ä‘áº¿n cuá»‘i cÃ¹ng báº±ng cÃ¡ch trÃ¡nh hoáº·c vÃ´ hiá»‡u hÃ³a cÃ¡c lÃ¡ bÃ i ",K(R.EXPLODING_KITTEN),". Náº¿u báº¡n rÃºt pháº£i lÃ¡ MÃ¨o Ná»• mÃ  khÃ´ng cÃ³ lÃ¡"," ",K(R.DEFUSE),", báº¡n sáº½ bá»‹ loáº¡i ngay láº­p tá»©c."]})})}),n.jsx("h3",{className:"text-lg font-bold text-yellow-400",children:X({en:"2. Setup",vi:"2. Thiáº¿t láº­p"})}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:X({en:n.jsxs(n.Fragment,{children:["Each player starts with 1"," ",K(R.DEFUSE)," and 6 random cards."]}),vi:n.jsxs(n.Fragment,{children:["Má»—i ngÆ°á»i nháº­n 1 lÃ¡ ",K(R.DEFUSE)," ","vÃ  6 lÃ¡ bÃ i ngáº«u nhiÃªn khÃ¡c."]})})}),n.jsx("li",{children:X({en:n.jsxs(n.Fragment,{children:["The deck contains (Players - 1)"," ",K(R.EXPLODING_KITTEN),"."]}),vi:n.jsxs(n.Fragment,{children:["Chá»“ng bÃ i rÃºt cÃ³ (sá»‘ ngÆ°á»i chÆ¡i - 1) lÃ¡"," ",K(R.EXPLODING_KITTEN),"."]})})})]}),n.jsx("h3",{className:"text-lg font-bold text-yellow-400",children:X({en:"3. How to Play",vi:"3. CÃ¡ch chÆ¡i"})}),n.jsx("p",{children:X({en:"Your turn has two phases:",vi:"Má»—i lÆ°á»£t chÆ¡i gá»“m 2 giai Ä‘oáº¡n chÃ­nh:"})}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:X({en:"Action (Optional):",vi:"HÃ nh Ä‘á»™ng (TÃ¹y chá»n):"})})," ",X({en:"Play as many cards as you want from your hand.",vi:"ÄÃ¡nh xuá»‘ng bao nhiÃªu lÃ¡ bÃ i tÃ¹y thÃ­ch Ä‘á»ƒ sá»­ dá»¥ng chá»©c nÄƒng cá»§a chÃºng, hoáº·c khÃ´ng Ä‘Ã¡nh lÃ¡ nÃ o."})]}),n.jsxs("li",{children:[n.jsx("strong",{children:X({en:"End Turn (Mandatory):",vi:"Káº¿t thÃºc lÆ°á»£t (Báº¯t buá»™c):"})})," ",X({en:n.jsxs(n.Fragment,{children:["Draw one card from the deck. If it's not a"," ",K(R.EXPLODING_KITTEN),", you're safe!"]}),vi:n.jsxs(n.Fragment,{children:["RÃºt má»™t lÃ¡ tá»« chá»“ng bÃ i chung. Náº¿u Ä‘Ã³ khÃ´ng pháº£i"," ",K(R.EXPLODING_KITTEN),", lÆ°á»£t cá»§a báº¡n káº¿t thÃºc an toÃ n."]})})]})]}),n.jsx("h3",{className:"text-lg font-bold text-yellow-400",children:X({en:"4. Combos",vi:"4. Combo"})}),n.jsx("p",{children:X({en:"Select multiple cards in your hand and click 'PLAY COMBO'.",vi:"Chá»n nhiá»u lÃ¡ trong tay vÃ  nháº¥n 'DÃ™NG COMBO'."})}),n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Pairs:",vi:"Cáº·p ÄÃ´i:"})})," ",X({en:n.jsxs(n.Fragment,{children:["Play 2 cards of the same type to"," ",n.jsx("span",{className:"font-bold text-green-500",children:"STEAL a RANDOM"})," ","card from another player."]}),vi:n.jsxs(n.Fragment,{children:["ÄÃ¡nh 2 lÃ¡ cÃ¹ng loáº¡i Ä‘á»ƒ"," ",n.jsx("span",{className:"font-bold text-green-500",children:"CÆ¯á»šP 1 lÃ¡ NGáºªU NHIÃŠN"})," ","tá»« ngÆ°á»i chÆ¡i khÃ¡c."]})})]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Triplets:",vi:"Bá»™ Ba:"})})," ",X({en:n.jsxs(n.Fragment,{children:["Play 3 cards of the same type to"," ",n.jsx("span",{className:"font-bold text-green-500",children:"NAME A CARD"}),". If the target has it, you"," ",n.jsx("span",{className:"font-bold text-green-500",children:"STEAL IT"}),"."]}),vi:n.jsxs(n.Fragment,{children:["ÄÃ¡nh 3 lÃ¡ cÃ¹ng loáº¡i vÃ "," ",n.jsx("span",{className:"font-bold text-green-500",children:"Äá»ŒC TÃŠN 1 LÃ"}),". Náº¿u Ä‘á»‘i thá»§ cÃ³ lÃ¡ Ä‘Ã³, báº¡n sáº½"," ",n.jsx("span",{className:"font-bold text-green-500",children:"Láº¤Y NÃ“"}),"."]})})]})]}),n.jsx("h3",{className:"text-lg font-bold text-yellow-400",children:X({en:"5. Cards",vi:"5. LÃ¡ bÃ i"})}),n.jsx("div",{className:"space-y-2",children:Object.entries(B).map(([e,s])=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`${s.bgColor} ${s.borderColor} p-2 rounded-full`,children:n.jsx(s.icon,{className:`w-6 h-6 ${s.iconColor} ${s.icon}`})}),n.jsxs("div",{children:[n.jsx("p",{className:`font-bold ${s.textColor}`,children:X(s.name)}),n.jsx("p",{className:"text-sm text-slate-500",children:X(s.description)})]})]},e))}),n.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-4",children:X({en:"6. Tips",vi:"6. Máº¹o"})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("section",{children:[n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsx("h4",{className:"font-bold text-white text-lg",children:X({en:"1. Strategic Card Management",vi:"1. Quáº£n lÃ½ lÃ¡ bÃ i chiáº¿n lÆ°á»£c"})})}),n.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-slate-700",children:[n.jsxs("p",{className:"leading-relaxed",children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Keep Defuse until the end:",vi:"Giá»¯ lÃ¡ Gá»¡ bom Ä‘áº¿n cuá»‘i:"})})," ",X({en:"Don't rush to use your",vi:"Äá»«ng vá»™i dÃ¹ng lÃ¡"}),K(R.DEFUSE),X({en:"in early turns. It's the most valuable insurance when the deck gets thin.",vi:"á»Ÿ nhá»¯ng lÆ°á»£t Ä‘áº§u náº¿u khÃ´ng cáº§n thiáº¿t, Ä‘Ã¢y lÃ  báº£o hiá»ƒm quÃ½ giÃ¡ nháº¥t vá» sau khi xáº¥p bÃ i Ä‘Ã£ má»ng."})]}),n.jsxs("p",{className:"leading-relaxed",children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Use Combos effectively:",vi:"Sá»­ dá»¥ng Combo:"})})," ",X({en:"Collect matching cat cards to steal a",vi:"Gom cÃ¡c lÃ¡ mÃ¨o thÆ°á»ng (cÃ¹ng mÃ u) Ä‘á»ƒ cÆ°á»›p lÃ¡ bÃ i"}),K(R.DEFUSE),X({en:"or other important function cards from other players.",vi:"hoáº·c cÃ¡c lÃ¡ bÃ i chá»©c nÄƒng quan trá»ng khÃ¡c tá»« tay ngÆ°á»i khÃ¡c."})]}),n.jsxs("p",{className:"leading-relaxed",children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Master the Nope card:",vi:"Táº­n dá»¥ng lÃ¡ KhÃ´ng (Nope):"})})," ",X({en:"Keep your",vi:"HÃ£y giá»¯ lÃ¡"}),K(R.NOPE),X({en:"to block incoming attacks or when someone tries to steal from you.",vi:"Ä‘á»ƒ cháº·n cÃ¡c hÃ nh Ä‘á»™ng táº¥n cÃ´ng hoáº·c khi ngÆ°á»i khÃ¡c Ä‘á»‹nh cÆ°á»›p bÃ i cá»§a báº¡n."})]})]})]}),n.jsxs("section",{children:[n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsx("h4",{className:"font-bold text-white text-lg",children:X({en:"2. Deck Management",vi:"2. Kiá»ƒm soÃ¡t xáº¥p bÃ i"})})}),n.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-slate-700",children:[n.jsxs("p",{className:"leading-relaxed",children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Combine See the Future + Shuffle/Skip:",vi:"Káº¿t há»£p Xem trÆ°á»›c + XÃ¡o bÃ i/Bá» lÆ°á»£t:"})})," ",X({en:"If you use",vi:"Náº¿u báº¡n sá»­ dá»¥ng"}),K(R.SEE_THE_FUTURE),X({en:"and see a Kitten on top, use",vi:"vÃ  tháº¥y MÃ¨o ná»• á»Ÿ trÃªn cÃ¹ng, hÃ£y dÃ¹ng"}),K(R.SHUFFLE),X({en:"to change its position, or",vi:"Ä‘á»ƒ Ä‘á»•i vá»‹ trÃ­, hoáº·c"}),K(R.SKIP),X({en:"to end your turn safely without drawing.",vi:"Ä‘á»ƒ káº¿t thÃºc lÆ°á»£t an toÃ n mÃ  khÃ´ng cáº§n rÃºt bÃ i."})]}),n.jsxs("p",{className:"leading-relaxed",children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Mind Games with Defuse:",vi:"ChÆ¡i khÄƒm báº±ng Gá»¡ bom:"})})," ",X({en:"When you use a",vi:"Khi báº¡n sá»­ dá»¥ng"}),K(R.DEFUSE),X({en:"to put back an Exploding Kitten, do it secretly. Place it on top or in a position where you want your opponent to draw it.",vi:"Ä‘á»ƒ Ä‘áº·t láº¡i lÃ¡ MÃ¨o ná»•, hÃ£y thá»±c hiá»‡n bÃ­ máº­t, Ä‘áº·t ngay lÃªn Ä‘áº§u hoáº·c vá»‹ trÃ­ mÃ  báº¡n muá»‘n Ä‘á»‘i thá»§ rÃºt pháº£i."})]}),n.jsxs("p",{className:"leading-relaxed",children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Track Defuses:",vi:"Theo dÃµi Gá»¡ bom:"})})," ",X({en:"Keep track of how many",vi:"HÃ£y theo dÃµi sá»‘ lÆ°á»£ng lÃ¡"}),K(R.DEFUSE),X({en:"cards have been used to predict when the bomb will reappear in the deck.",vi:"Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ dá»± Ä‘oÃ¡n khi nÃ o bom sáº½ xuáº¥t hiá»‡n trá»Ÿ láº¡i trong xáº¥p bÃ i."})]})]})]}),n.jsxs("section",{children:[n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsx("h4",{className:"font-bold text-white text-lg",children:X({en:"3. Offense and Defense",vi:"3. Táº¥n cÃ´ng vÃ  phÃ²ng thá»§"})})}),n.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-slate-700",children:[n.jsxs("p",{className:"leading-relaxed",children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Use Attack wisely:",vi:"Sá»­ dá»¥ng Táº¥n cÃ´ng há»£p lÃ½:"})})," ",X({en:"Use an",vi:"Sá»­ dá»¥ng lÃ¡"}),K(R.ATTACK),X({en:"to put pressure on the next player, especially when you suspect or know the top card is an Exploding Kitten.",vi:"Ä‘á»ƒ Ä‘áº©y Ã¡p lá»±c cho ngÆ°á»i tiáº¿p theo, Ä‘áº·c biá»‡t khi báº¡n biáº¿t cháº¯c hoáº·c nghi ngá» lÃ¡ trÃªn cÃ¹ng lÃ  MÃ¨o ná»•."})]}),n.jsxs("p",{className:"leading-relaxed",children:[n.jsx("strong",{className:"text-yellow-400",children:X({en:"Shuffle when in doubt:",vi:"Táº­n dá»¥ng XÃ¡o bÃ i khi hoang mang:"})})," ",X({en:"If you feel endangered and don't have a way to see the deck, use",vi:"Náº¿u báº¡n cáº£m tháº¥y nguy hiá»ƒm mÃ  khÃ´ng cÃ³ cÃ¡ch nÃ o xem trÆ°á»›c bÃ i, hÃ£y dÃ¹ng"}),K(R.SHUFFLE),X({en:"to try your luck and escape from a potential Kitten.",vi:"Ä‘á»ƒ thá»­ váº­n may vÃ  thoÃ¡t khá»i nguy cÆ¡ bá»‘c pháº£i MÃ¨o ná»•."})]})]})]})]})]})]})}),document.body)]})}export{Y as default};
