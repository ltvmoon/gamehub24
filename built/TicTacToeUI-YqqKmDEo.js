import{j as e,g as s}from"./index-CknsrN0a.js";import{b as t,u as r,e as a,X as n,f as l,k as o,l as i,L as m}from"./react-vendor-8v1eX67m.js";import"./socket-DRbsQkF5.js";import{u as c}from"./registry-DE2lkhG8.js";import{u as x}from"./Room-CRkwWl7Y.js";import"./zustand-BrUGvFZl.js";import"./chess-DTd62Tay.js";function d({game:d}){const[g,u]=t.useState(d.getState()),p=r(),{roomId:f}=a(),{setCurrentRoom:h}=c(),{clearMessages:j}=x(),b=d.getPlayerSymbol(),v=g.currentTurn===b,N=g.board,w=g.winningLine,y=g.lastMoveIndex;t.useEffect(()=>{d.onUpdate(e=>{u(e)})},[d]);return e.jsxs("div",{className:"flex flex-col items-center gap-6 p-4 w-full max-w-sm mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-xl font-bold flex items-center gap-2",children:g.gameOver?g.winner?e.jsx("span",{className:g.winner===b?"text-green-400":"text-red-400",children:g.winner===b?"You Won!":"Opponent Won!"}):e.jsx("span",{className:"text-yellow-400",children:"Draw!"}):e.jsx("span",{className:v?"text-primary-400":"text-slate-400",children:v?"Your Turn":"Opponent's Turn"})}),e.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(n,{className:"w-4 h-4 text-blue-400"})," You: ",b]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(l,{className:"w-4 h-4 text-red-400"})," Opponent:"," ","X"===b?"O":"X"]})]}),!g.gameOver&&g.players.O&&N.every(e=>null===e)&&v&&e.jsxs("button",{onClick:()=>{d.switchTurn()},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-300 text-sm font-medium transition-colors flex items-center gap-2",title:"Give first move to opponent",children:[e.jsx(o,{className:"w-4 h-4"}),"Give First Move"]})]}),d.isHostUser&&!g.players.O&&!g.gameOver&&e.jsxs("button",{onClick:()=>d.addBot(),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-300 text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4"}),"Play vs Bot"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 bg-slate-800 p-3 rounded-xl relative",children:N.map((s,t)=>{const r=w?.includes(t),a=y===t,o=v&&!s&&!g.gameOver;return e.jsxs("button",{onClick:()=>(e=>{g.gameOver||null===g.board[e]&&v&&d.requestMove(e)})(t),disabled:!o,className:`\n                w-20 h-20 sm:w-24 sm:h-24 rounded-lg flex items-center justify-center text-4xl transition-all\n                border border-slate-700\n                ${s?"bg-slate-700 shadow-inner":"bg-slate-750 hover:bg-slate-700"}\n                ${r?"bg-green-500/20 ring-2 ring-green-500":""}\n                ${a&&!r?"bg-amber-500/20 ring-2 ring-amber-500/50":""}\n                ${o?"cursor-pointer hover:ring-2 hover:ring-primary-500/50":"cursor-default"}\n              `,children:["X"===s&&e.jsx(n,{className:"w-12 h-12 "+(r?"text-green-400":"text-blue-400"),strokeWidth:2.5}),"O"===s&&e.jsx(l,{className:"w-10 h-10 "+(r?"text-green-400":"text-red-400"),strokeWidth:2.5})]},t)})}),g.gameOver&&e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx("button",{onClick:()=>d.requestReset(),className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-slate-300 font-medium transition-colors flex items-center justify-center gap-2",children:"Play Again"}),e.jsxs("button",{onClick:()=>{f&&s().emit("room:leave",{roomId:f}),h(null),j(),p("/")},className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-slate-300 font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"Close Game"]})]})]})}export{d as default};
