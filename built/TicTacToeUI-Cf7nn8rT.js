import{u as e,S as t,j as s}from"./index-DZL8eqPD.js";import"./BaseGame--ikFMc2v.js";import{u as a}from"./useGameState-fg1iI3Se.js";import{u as n}from"./usePrevious-DkXzSwiZ.js";import{X as r,k as i,aF as l,a9 as o,aG as c}from"./react-vendor-dLL3GPIb.js";import"./socket-DRbsQkF5.js";import"./zustand-DYnM1nWq.js";function m({game:m}){const g=m,[d]=a(g),{ti:x}=e(),h=g.getPlayerSymbol(),u=d.currentTurn===h;n(d.currentTurn,(e,s)=>{"playing"!==d.gamePhase||d.gameOver||null!==e&&t.playTurnSwitch(u)});const p=d.board,v=d.winningLine,b=d.lastMoveIndex;return s.jsxs("div",{className:"flex flex-col items-center gap-3 @md:p-4 w-full max-w-sm mx-auto",children:[s.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-800 rounded-lg w-full max-w-[400px] mx-auto",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:x({en:"Players",vi:"Ng∆∞·ªùi ch∆°i"})}),["X","O"].map(e=>{const t=d.players[e],a=d.currentTurn===e&&!d.gameOver,n=e===h,o=t?.isBot;return s.jsxs("div",{className:`\n                flex items-center justify-between p-2 rounded-lg\n                ${a?"bg-slate-600 ring-2 ring-blue-400":"bg-slate-700"}\n              `,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:"X"===e?s.jsx(r,{className:"w-5 h-5 text-blue-400",strokeWidth:2.5}):s.jsx(i,{className:"w-5 h-5 text-red-400",strokeWidth:2.5})}),s.jsxs("span",{className:"text-white",children:[o?"Bot":t?t.username:x({en:"(waiting...)",vi:"(ƒëang ch·ªù...)"}),o&&" ü§ñ",n&&t&&x({en:" (You)",vi:" (B·∫°n)"})]})]}),o&&g.isHost&&!d.gameOver&&s.jsx("button",{onClick:()=>g.removeBot(),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:x({en:"Remove",vi:"X√≥a"})}),!t&&g.isHost&&!d.gameOver&&"O"===e&&s.jsxs("button",{onClick:()=>g.addBot(),className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors flex items-center gap-1",children:[s.jsx(l,{className:"w-3 h-3"})," ",x({en:"Add Bot",vi:"Th√™m Bot"})]})]},e)})]}),"waiting"===d.gamePhase&&g.isHost&&s.jsx("div",{className:"flex flex-col items-center gap-2",children:g.canStartGame()?s.jsxs("button",{onClick:()=>g.startGame(),className:"px-6 py-3 bg-green-600 hover:bg-green-500 rounded-lg text-white font-medium transition-colors flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5"}),x({en:"Start Game",vi:"B·∫Øt ƒë·∫ßu"})]}):s.jsx("span",{className:"text-sm text-slate-400",children:x({en:"Waiting for opponent to join...",vi:"ƒêang ch·ªù ƒë·ªëi th·ªß tham gia..."})})}),"waiting"===d.gamePhase&&!g.isHost&&s.jsx("div",{className:"text-sm text-slate-400",children:x({en:"Waiting for host to start the game...",vi:"ƒêang ch·ªù ch·ªß ph√≤ng b·∫Øt ƒë·∫ßu..."})}),"playing"===d.gamePhase&&!d.gameOver&&s.jsx("div",{className:"text-lg text-gray-400",children:u?s.jsx("span",{className:"text-green-400",children:x({en:"Your turn! Click a cell.",vi:"L∆∞·ª£t c·ªßa b·∫°n! Ch·ªçn m·ªôt √¥."})}):s.jsx("span",{children:x({en:"Waiting for opponent...",vi:"ƒêang ch·ªù ƒë·ªëi th·ªß..."})})}),"playing"===d.gamePhase&&!d.gameOver&&p.every(e=>null===e)&&u&&s.jsxs("button",{onClick:()=>{g.switchTurn()},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-300 text-sm font-medium transition-colors flex items-center gap-2",title:x({en:"Give first move to opponent",vi:"Nh∆∞·ªùng n∆∞·ªõc ƒëi ƒë·∫ßu cho ƒë·ªëi th·ªß"}),children:[s.jsx(c,{className:"w-4 h-4"}),x({en:"Give First Move",vi:"Nh∆∞·ªùng ƒëi tr∆∞·ªõc"})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 bg-slate-800 p-3 rounded-xl relative",children:p.map((e,t)=>{const a=v?.includes(t),n=b===t,l=u&&!e&&!d.gameOver;return s.jsxs("button",{onClick:()=>(e=>{if(d.gameOver)return;if(null!==d.board[e])return;if(!u)return;const t={type:"MAKE_MOVE",cellIndex:e,playerId:g.userId};g.makeAction(t)})(t),disabled:!l,className:`\n                w-20 h-20 @md:w-24 @md:h-24 rounded-lg flex items-center justify-center text-4xl transition-all\n                border border-slate-700\n                ${e?"bg-slate-700 shadow-inner":"bg-slate-750 hover:bg-slate-700"}\n                ${a?"bg-green-500/20 ring-2 ring-green-500":""}\n                ${n&&!a?"bg-amber-500/20 ring-2 ring-amber-500/50":""}\n                ${l?"cursor-pointer hover:ring-2 hover:ring-primary-500/50":"cursor-default"}\n              `,children:["X"===e&&s.jsx(r,{className:"w-12 h-12 "+(a?"text-green-400":"text-blue-400"),strokeWidth:2.5}),"O"===e&&s.jsx(i,{className:"w-10 h-10 "+(a?"text-green-400":"text-red-400"),strokeWidth:2.5})]},t)})}),d.gameOver&&s.jsx("div",{className:"flex gap-3 w-full",children:s.jsx("button",{onClick:()=>g.requestReset(),className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-slate-300 font-medium transition-colors flex items-center justify-center gap-2",children:x({en:"Play Again",vi:"Ch∆°i l·∫°i"})})})]})}export{m as default};
