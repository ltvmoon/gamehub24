import{u as e,b as s,j as t}from"./index-BiWvX6AI.js";import{c as n,Y as a,ag as l,a0 as i,X as r,z as c,a6 as o,u as d,ak as h}from"./react-vendor-CyPxdFQK.js";import"./BaseGame-iDkECrzW.js";import{u as m}from"./useGameState-CG4d3mB9.js";import"./socket-DRbsQkF5.js";import"./zustand-BbtpVoJv.js";function x({game:x,currentUserId:g}){const u=x,[p]=m(u),[b,v]=n.useState(!1),{ti:j,ts:w}=e(),{confirm:y}=s(),f=u.getMyColor(),N=p.turn,k=N===f,q="playing"===p.gamePhase&&k?u.getValidMoves(f):[],C=u.getPieceCount(),P=u.isHost,R=(e,s)=>q.some(([t,n])=>t===e&&n===s),B=(e,s,n)=>{const a=R(s,n),l=p.lastMove?.row===s&&p.lastMove?.col===n,i=p.flippedCells?.some(e=>e.row===s&&e.col===n);return t.jsxs("button",{onClick:()=>((e,s)=>{"playing"===p.gamePhase&&k&&R(e,s)&&u.requestMove(e,s)})(s,n),className:`\n          aspect-square flex items-center justify-center\n          bg-green-700 border border-green-800\n          ${a?"cursor-pointer hover:bg-green-600":"cursor-default"}\n          ${l?"ring-2 ring-yellow-400 ring-inset":""}\n        `,disabled:!a,children:[e&&t.jsx("div",{className:`\n              w-[80%] h-[80%] rounded-full shadow-lg\n              ${"black"===e?"bg-gray-900":"bg-white"}\n              ${l?"scale-110":""}\n              ${i?"animate-flip":""}\n            `,style:i?{animation:"flip 0.4s ease-in-out"}:void 0}),!e&&a&&t.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/50"})]},`${s}-${n}`)};return t.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 w-full max-w-2xl mx-auto pb-16!",children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"\n@keyframes flip {\n  0% { transform: rotateY(0deg) scale(1); }\n  50% { transform: rotateY(90deg) scale(1.1); }\n  100% { transform: rotateY(180deg) scale(1); }\n}\n"}}),t.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-800 rounded-lg w-full max-w-md",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:j({en:"Players",vi:"Ng∆∞·ªùi ch∆°i"})}),[p.players.black,p.players.white].map((e,s)=>{const n=["black","white"],a=p.turn===n[s];return t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg "+(a?"bg-slate-600 ring-2 ring-yellow-400":"bg-slate-700"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-6 h-6 rounded-full text-center ${"black"===n[s]?"bg-gray-900":"bg-white"} ${"black"===n[s]?"text-white":"text-black"}`,children:"black"===n[s]?C.black:C.white}),t.jsxs("span",{className:"text-white",children:[e?e.username:"(waiting...)",e?.isBot&&" ü§ñ"]})]}),e?.isBot&&P&&t.jsx("button",{onClick:()=>u.requestRemoveBot(),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:j({en:"Remove",vi:"X√≥a"})}),P&&!e&&t.jsxs("button",{onClick:()=>u.requestAddBot(),className:"flex items-center gap-2 p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[t.jsx(l,{className:"w-4 h-4"}),j({en:"Add Bot",vi:"Th√™m Bot"})]})]},s)})]}),"playing"===p.gamePhase&&t.jsxs("div",{className:"text-lg text-gray-400",children:[k?t.jsx("span",{className:"text-green-400",children:j({en:"Your turn!",vi:"L∆∞·ª£t c·ªßa b·∫°n!"})}):t.jsxs("span",{children:[j({en:"Waiting for",vi:"ƒêang ch·ªù"})," ",p.players[N]?.username," ",j({en:"...",vi:"..."})]}),0===q.length&&k&&t.jsx("span",{className:"ml-2 text-yellow-400",children:j({en:"No valid moves - must pass",vi:"Kh√¥ng c√≥ n∆∞·ªõc ƒëi h·ª£p l·ªá - ph·∫£i b·ªè l∆∞·ª£t"})})]}),p.undoRequest&&p.undoRequest.fromId!==g&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 shadow-xl max-w-sm mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:j({en:"Undo Request",vi:"Y√™u c·∫ßu ho√†n t√°c"})}),t.jsxs("p",{className:"text-gray-400 mb-4",children:[p.undoRequest.fromName," ",j({en:"wants to undo their last move",vi:"mu·ªën ho√†n t√°c n∆∞·ªõc ƒëi v·ª´a r·ªìi"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>u.acceptUndo(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(i,{className:"w-4 h-4"})," ",j({en:"Accept",vi:"ƒê·ªìng √Ω"})]}),t.jsxs("button",{onClick:()=>u.declineUndo(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors",children:[t.jsx(r,{className:"w-4 h-4"})," ",j({en:"Decline",vi:"T·ª´ ch·ªëi"})]})]})]})}),p.undoRequest&&p.undoRequest.fromId===g&&t.jsx("div",{className:"text-yellow-400 text-sm",children:j({en:"Waiting for opponent to accept undo...",vi:"ƒêang ch·ªù ƒë·ªëi th·ªß ch·∫•p nh·∫≠n ho√†n t√°c..."})}),"ended"===p.gamePhase&&t.jsxs("div",{className:"text-center p-4 bg-slate-800 rounded-lg",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:j({en:"Game Over!",vi:"Tr√≤ ch∆°i k·∫øt th√∫c!"})}),t.jsx("p",{className:"text-gray-300 mb-4",children:"draw"===p.winner?j({en:"It's a draw!",vi:"H√≤a!"}):p.winner===g?j({en:"üéâ You won!",vi:"üéâ B·∫°n ƒë√£ th·∫Øng!"}):`${[p.players.black,p.players.white].find(e=>e?.id===p.winner)?.username}{" "}\n                  ${j({en:"wins!",vi:"th·∫Øng!"})}`}),t.jsxs("p",{className:"text-gray-400",children:[j({en:"Black",vi:"ƒêen"}),": ",C.black," |"," ",j({en:"White",vi:"Tr·∫Øng"}),": ",C.white]})]}),t.jsxs("div",{className:"flex gap-3",children:["waiting"===p.gamePhase&&t.jsxs(t.Fragment,{children:[P&&u.canStartGame()&&t.jsxs("button",{onClick:()=>u.requestStartGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(c,{className:"w-4 h-4"})," ",j({en:"Start Game",vi:"B·∫Øt ƒë·∫ßu"})]}),!P&&t.jsx("div",{children:j({en:"Waiting for host to start game...",vi:"ƒêang ch·ªù ch·ªß ph√≤ng b·∫Øt ƒë·∫ßu tr√≤ ch∆°i..."})})]}),"playing"===p.gamePhase&&t.jsxs(t.Fragment,{children:[k&&0===q.length&&t.jsx("button",{onClick:()=>u.requestPass(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-colors",children:j({en:"Pass Turn",vi:"B·ªè l∆∞·ª£t"})}),(p.moveHistory?.length||0)>0&&!p.undoRequest&&t.jsxs("button",{onClick:()=>u.requestUndo(),className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:[t.jsx(o,{className:"w-4 h-4"})," ",j({en:"Undo",vi:"Ho√†n t√°c"})]}),P&&t.jsxs("button",{onClick:async()=>{await y(w({en:"Are you sure you want to reset the game?",vi:"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën reset tr√≤ ch∆°i?"}),w({en:"Reset Game",vi:"Ch∆°i l·∫°i"}))&&u.requestNewGame()},className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors",children:[t.jsx(d,{className:"w-4 h-4"})," ",j({en:"Play Again",vi:"Ch∆°i l·∫°i"})]})]}),"ended"===p.gamePhase&&t.jsxs("button",{onClick:()=>u.requestNewGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(d,{className:"w-4 h-4"})," ",j({en:"Play Again",vi:"Ch∆°i l·∫°i"})]})]}),t.jsx("div",{className:"grid grid-cols-8 gap-0 rounded-lg overflow-hidden shadow-xl border-4 border-green-900 w-full max-w-[500px]",children:Array.from({length:64}).map((e,s)=>{const t=Math.floor(s/8),n=s%8,a=p.board[s];return B("1"===a?"black":"2"===a?"white":null,t,n)})}),t.jsx("button",{onClick:()=>v(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:w({en:"Rules",vi:"Lu·∫≠t ch∆°i"}),children:t.jsx(h,{size:24})}),b&&a.createPortal(b?t.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/80 p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl relative",children:[t.jsxs("div",{className:"flex justify-between sticky top-0 p-4 pr-2 bg-slate-900",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(h,{className:"w-6 h-6 text-yellow-500"}),j({en:"Game Rules: Reversi",vi:"Lu·∫≠t Ch∆°i: C·ªù L·∫≠t"})]}),t.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(r,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"p-4 pt-0 space-y-4 text-slate-300 leading-relaxed",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{children:j({en:"Reversi (Othello) is a strategy board game for two players, played on an 8√ó8 uncheckered board.",vi:"Reversi (Othello) l√† tr√≤ ch∆°i chi·∫øn thu·∫≠t cho 2 ng∆∞·ªùi, ch∆°i tr√™n b√†n c·ªù 8x8."})}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:j({en:"Objective",vi:"M·ª•c ti√™u"})}),t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.jsx("li",{children:j({en:"Have the majority of disks on the board turned to display your color when the last playable empty square is filled.",vi:"Chi·∫øm ƒë∆∞·ª£c nhi·ªÅu √¥ tr√™n b√†n c·ªù nh·∫•t b·∫±ng m√†u c·ªßa m√¨nh khi tr√≤ ch∆°i k·∫øt th√∫c."})})}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:j({en:"Gameplay",vi:"Lu·∫≠t ch∆°i"})}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[t.jsx("li",{children:j({en:"Players take turns placing disks on the board with their assigned color facing up.",vi:"Ng∆∞·ªùi ch∆°i l·∫ßn l∆∞·ª£t ƒë·∫∑t qu√¢n c·ªù c·ªßa m√¨nh l√™n b√†n."})}),t.jsx("li",{children:j({en:"During a play, any disks of the opponent's color that are in a straight line and bounded by the disk just placed and another disk of the current player's color are turned over to the current player's color.",vi:"N·∫øu b·∫°n ƒë·∫∑t qu√¢n c·ªù k·∫πp gi·ªØa qu√¢n ƒë·ªëi ph∆∞∆°ng (h√†ng ngang, d·ªçc, ch√©o), c√°c qu√¢n ƒë√≥ s·∫Ω b·ªã l·∫≠t sang m√†u c·ªßa b·∫°n."})}),t.jsx("li",{children:j({en:"If you cannot make a valid move (capture at least one opponent's disk), you must pass your turn.",vi:"N·∫øu kh√¥ng c√≥ n∆∞·ªõc ƒëi h·ª£p l·ªá (ƒÉn √≠t nh·∫•t 1 qu√¢n), b·∫°n ph·∫£i b·ªè l∆∞·ª£t."})})]}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:j({en:"Winning",vi:"Chi·∫øn th·∫Øng"})}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[t.jsx("li",{children:j({en:"The game ends when neither player can move.",vi:"Tr√≤ ch∆°i k·∫øt th√∫c khi c·∫£ 2 b√™n kh√¥ng c√≤n n∆∞·ªõc ƒëi."})}),t.jsx("li",{children:j({en:"The player with the most disks on the board wins.",vi:"Ng∆∞·ªùi c√≥ nhi·ªÅu qu√¢n c·ªù nh·∫•t tr√™n b√†n s·∫Ω th·∫Øng."})})]})]})})]})}):null,document.body)]})}export{x as default};
