import{u as e,j as t,b as s}from"./index-CQU6Vfh9.js";import{l,D as r,aa as i,a6 as n,o,X as a}from"./react-vendor-BU9riI0p.js";import"./socket-DRbsQkF5.js";import{a as c}from"./types-DkjE4TWX.js";import"./zustand-B2Hl4ohO.js";const x={red:{bg:"bg-red-500",light:"bg-red-200",ring:"ring-red-400",fill:"#ef4444",text:"text-red-500"},blue:{bg:"bg-blue-500",light:"bg-blue-200",ring:"ring-blue-400",fill:"#3b82f6",text:"text-blue-500"},green:{bg:"bg-green-500",light:"bg-green-200",ring:"ring-green-400",fill:"#22c55e",text:"text-green-500"},yellow:{bg:"bg-yellow-400",light:"bg-yellow-200",ring:"ring-yellow-400",fill:"#eab308",text:"text-yellow-500"}},d="#ef444444",h="#3b82f644",y="#22c55e44",u="#eab30844",g="#0002",m="#fff1",p="#4b5563";function f({game:f,currentUserId:j}){const k=f,{ti:w,ts:v}=e(),[N,W]=l.useState(k.getState()),[C,$]=l.useState(!1),[q,P]=l.useState(1),[R,I]=l.useState(!1),[S,M]=l.useState(!1),[T,B]=l.useState(null),G=l.useRef(null),V=l.useRef(null);l.useEffect(()=>{const e=k.onUpdate(e=>{if(null!==e.diceValue&&e.diceValue!==G.current&&!C){const t=e.diceValue;$(!0),I(!1),V.current&&clearInterval(V.current);let s=0;V.current=setInterval(()=>{P(Math.floor(6*Math.random())+1),s++,s>10&&(V.current&&(clearInterval(V.current),V.current=null),P(t),$(!1),I(!0),setTimeout(()=>I(!1),2e3))},80),G.current=t}else null===e.diceValue&&(G.current=null);W(e)});return()=>{V.current&&clearInterval(V.current),e()}},[k]);const A=k.getMyPlayerIndex(),z=N.players[N.currentPlayerIndex],L=z?.id===j,Y=k.isHost,D=L&&(!N.hasRolled||N.canRollAgain)&&!C&&!R,H=null!==N.diceValue&&N.players[N.currentPlayerIndex]?.tokens.some(e=>"home"===e.position.type?6===N.diceValue:"finished"!==e.position.type),O=()=>{D&&(G.current=null,k.requestRollDice())},U=e=>[{x:1.5,y:6.5},{x:2.5,y:6.5},{x:3.5,y:6.5},{x:4.5,y:6.5},{x:5.5,y:6.5},{x:6.5,y:5.5},{x:6.5,y:4.5},{x:6.5,y:3.5},{x:6.5,y:2.5},{x:6.5,y:1.5},{x:6.5,y:.5},{x:7.5,y:.5},{x:8.5,y:.5},{x:8.5,y:1.5},{x:8.5,y:2.5},{x:8.5,y:3.5},{x:8.5,y:4.5},{x:8.5,y:5.5},{x:9.5,y:6.5},{x:10.5,y:6.5},{x:11.5,y:6.5},{x:12.5,y:6.5},{x:13.5,y:6.5},{x:14.5,y:6.5},{x:14.5,y:7.5},{x:14.5,y:8.5},{x:13.5,y:8.5},{x:12.5,y:8.5},{x:11.5,y:8.5},{x:10.5,y:8.5},{x:9.5,y:8.5},{x:8.5,y:9.5},{x:8.5,y:10.5},{x:8.5,y:11.5},{x:8.5,y:12.5},{x:8.5,y:13.5},{x:8.5,y:14.5},{x:7.5,y:14.5},{x:6.5,y:14.5},{x:6.5,y:13.5},{x:6.5,y:12.5},{x:6.5,y:11.5},{x:6.5,y:10.5},{x:6.5,y:9.5},{x:5.5,y:8.5},{x:4.5,y:8.5},{x:3.5,y:8.5},{x:2.5,y:8.5},{x:1.5,y:8.5},{x:.5,y:8.5},{x:.5,y:7.5},{x:.5,y:6.5}][e%52]||{x:7.5,y:7.5},_=(e,s,l)=>{const r=((e,t,s)=>{if("home"===e.type){const e={red:{x:3,y:3},green:{x:12,y:3},yellow:{x:12,y:12},blue:{x:3,y:12}}[t],l=[{dx:-1,dy:-1},{dx:1,dy:-1},{dx:-1,dy:1},{dx:1,dy:1}][s];return{x:e.x+l.dx,y:e.y+l.dy}}if("board"===e.type)return U(e.position);if("finish"===e.type)return{red:[{x:1.5,y:7.5},{x:2.5,y:7.5},{x:3.5,y:7.5},{x:4.5,y:7.5},{x:5.5,y:7.5}],green:[{x:7.5,y:1.5},{x:7.5,y:2.5},{x:7.5,y:3.5},{x:7.5,y:4.5},{x:7.5,y:5.5}],yellow:[{x:13.5,y:7.5},{x:12.5,y:7.5},{x:11.5,y:7.5},{x:10.5,y:7.5},{x:9.5,y:7.5}],blue:[{x:7.5,y:13.5},{x:7.5,y:12.5},{x:7.5,y:11.5},{x:7.5,y:10.5},{x:7.5,y:9.5}]}[t][e.position]||{x:7.5,y:7.5};return"finished"===e.type?{x:7.5,y:7.5}:null})(e.position,s,e.id);if(!r)return null;const i=N.currentPlayerIndex===l,n=!C&&L&&l===A&&N.hasRolled&&k.isTokenMovable(e.id),o=x[s];return t.jsx("div",{className:`\n          absolute w-6 h-6 rounded-full border-2 border-white shadow-lg z-10\n          ${o.bg}\n          ${n?"cursor-pointer":""}\n          ${i&&!n?"opacity-90":""}\n        `,style:{left:r.x/15*100+"%",top:r.y/15*100+"%",transform:n?"translate(-50%, -50%) scale(1.25)":"translate(-50%, -50%)",transition:"left 0.5s ease-in-out, top 0.5s ease-in-out, transform 0.2s ease-in-out",boxShadow:n?`0 0 0 4px ${o.fill}, 0 0 20px ${o.fill}, 0 0 30px ${o.fill}80`:void 0,zIndex:n?20:10,animation:n?"pulse 1s ease-in-out infinite":void 0},onClick:t=>n&&((e,t,s,l,r)=>{if(!L)return;if(!N.hasRolled)return;if(C)return;if(!k.isTokenMovable(e))return;const i=N.players[A];if(!i)return;const n=i.tokens.filter(e=>!!k.isTokenMovable(e.id)&&e.position.type===s.position.type&&("board"===e.position.type&&"board"===s.position.type||("home"!==e.position.type||"home"!==s.position.type)&&"finish"===e.position.type&&"finish"===s.position.type)&&e.position.position===s.position.position);if(n.length>1){const e=t.target.getBoundingClientRect();B({tokens:n.map(e=>({token:e,color:l,playerIndex:r})),x:e.left+e.width/2,y:e.top})}else B(null),k.requestMoveToken(e)})(e.id,t,e,s,l),children:t.jsx("span",{className:"flex items-center justify-center w-full h-full text-white text-xs font-bold drop-shadow-lg",children:e.id+1})},`${s}-${e.id}`)};return t.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 w-full max-w-2xl mx-auto",children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"\n@keyframes bounce-dice {\n  0%, 100% { transform: translateY(0) rotate(0deg); }\n  25% { transform: translateY(-20px) rotate(90deg); }\n  50% { transform: translateY(-10px) rotate(180deg); }\n  75% { transform: translateY(-15px) rotate(270deg); }\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; box-shadow: 0 0 0 4px currentColor, 0 0 20px currentColor; }\n  50% { opacity: 0.8; box-shadow: 0 0 0 6px currentColor, 0 0 30px currentColor; }\n}\n\n@keyframes pulse-corner {\n  0%, 100% { opacity: 0.3; }\n  50% { opacity: 0.6; }\n}\n"}}),S?t.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 p-4",onClick:()=>M(!1),children:t.jsxs("div",{className:"bg-slate-800 rounded-xl max-w-2xl w-full max-h-[90%] flex flex-col shadow-2xl border border-slate-600",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(i,{className:"w-6 h-6 text-yellow-500"}),w({en:"Game Rules",vi:"Luáº­t ChÆ¡i"})]}),t.jsx("button",{onClick:()=>M(!1),className:"p-1 hover:bg-slate-700 rounded transition-colors text-white",children:t.jsx(a,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar text-slate-300",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{children:w({en:"Ludo is a strategy board game for two to four players, in which the players race their four tokens from start to finish according to the rolls of a single die.",vi:"Ludo (Cá» cÃ¡ ngá»±a) lÃ  trÃ² chÆ¡i chiáº¿n thuáº­t cho 2-4 ngÆ°á»i, ngÆ°á»i chÆ¡i Ä‘ua 4 quÃ¢n cá» tá»« váº¡ch xuáº¥t phÃ¡t vá» Ä‘Ã­ch dá»±a trÃªn káº¿t quáº£ tung xÃºc xáº¯c."})}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:w({en:"Objective",vi:"Má»¥c tiÃªu"})}),t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.jsx("li",{children:w({en:"Be the first player to move all 4 of your tokens into your home triangle.",vi:"LÃ  ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Æ°a táº¥t cáº£ 4 quÃ¢n cá» vá» Ä‘Ã­ch (hÃ¬nh tam giÃ¡c mÃ u cá»§a mÃ¬nh)."})})}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:w({en:"Gameplay",vi:"Luáº­t chÆ¡i"})}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[t.jsx("li",{children:w({en:"Roll a 6 to move a token out of the starting area.",vi:"Tung Ä‘Æ°á»£c 6 Ä‘á»ƒ Ä‘Æ°a 1 quÃ¢n cá» ra khá»i chuá»“ng."})}),t.jsx("li",{children:w({en:"Rolling a 6 awards an extra roll.",vi:"Tung Ä‘Æ°á»£c 6 sáº½ Ä‘Æ°á»£c Ä‘i thÃªm má»™t lÆ°á»£t ná»¯a."})}),t.jsx("li",{children:w({en:"Capture opponent's token by landing on the same square. The captured token returns to start.",vi:"Ä‚n quÃ¢n Ä‘á»‘i phÆ°Æ¡ng báº±ng cÃ¡ch Ä‘i vÃ o cÃ¹ng Ã´ vá»›i há». QuÃ¢n bá»‹ Äƒn sáº½ quay vá» chuá»“ng."})}),t.jsx("li",{children:w({en:"Safe squares (marked with symbols) protect tokens from being captured.",vi:"CÃ¡c Ã´ an toÃ n (cÃ³ kÃ½ hiá»‡u) sáº½ báº£o vá»‡ quÃ¢n cá» khÃ´ng bá»‹ Äƒn."})})]}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:w({en:"Winning",vi:"Chiáº¿n tháº¯ng"})}),t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.jsx("li",{children:w({en:"The first player to get all 4 tokens to the finish wins.",vi:"NgÆ°á»i Ä‘áº§u tiÃªn Ä‘Æ°a Ä‘á»§ 4 quÃ¢n vá» Ä‘Ã­ch sáº½ tháº¯ng."})})})]})})]})}):null,T&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>B(null),children:t.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 shadow-xl border border-slate-600",onClick:e=>e.stopPropagation(),children:[t.jsx("p",{className:"text-white text-sm mb-3 text-center",children:w({en:"Select which token to move:",vi:"Chá»n quÃ¢n cá» Ä‘á»ƒ di chuyá»ƒn:"})}),t.jsx("div",{className:"flex gap-2 justify-center",children:T.tokens.map(({token:e,color:s})=>{const l=x[s];return t.jsx("button",{onClick:()=>{return t=e.id,B(null),void k.requestMoveToken(t);var t},className:`\n                      w-10 h-10 rounded-full border-2 border-white shadow-lg\n                      ${l.bg}\n                      hover:scale-110 transition-transform\n                      flex items-center justify-center\n                    `,children:t.jsx("span",{className:"text-white font-bold text-sm",children:e.id+1})},e.id)})}),t.jsx("p",{className:"text-gray-400 text-xs mt-2 text-center",children:w({en:"Click outside to cancel",vi:"Click ngoÃ i Ä‘á»ƒ há»§y"})})]})}),"playing"===N.gamePhase&&t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx("div",{className:"text-lg text-gray-400",children:L?t.jsx("span",{className:"text-green-400 font-semibold",children:w({en:"Your turn!",vi:"Äáº¿n lÆ°á»£t báº¡n!"})}):t.jsxs("span",{children:[w({en:"Waiting for",vi:"Äá»£i"})," ",t.jsx("span",{className:x[z?.color||"red"].text,children:z?.username}),"..."]})}),t.jsxs("div",{className:"flex items-center gap-4",children:[(()=>{const e={"top-left":"top-1.5 left-1.5","top-right":"top-1.5 right-1.5","middle-left":"top-1/2 left-1.5 -translate-y-1/2","middle-right":"top-1/2 right-1.5 -translate-y-1/2",center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","bottom-left":"bottom-1.5 left-1.5","bottom-right":"bottom-1.5 right-1.5"};return t.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.jsx("div",{className:`\n            relative w-16 h-16 bg-white rounded-xl shadow-lg border-2 border-gray-300\n            ${D?"cursor-pointer hover:shadow-xl hover:scale-105 transition-all":""}\n          `,style:{animation:C?"bounce-dice 0.3s ease-in-out infinite":void 0},onClick:O,children:({1:["center"],2:["top-right","bottom-left"],3:["top-right","center","bottom-left"],4:["top-left","top-right","bottom-left","bottom-right"],5:["top-left","top-right","center","bottom-left","bottom-right"],6:["top-left","top-right","middle-left","middle-right","bottom-left","bottom-right"]}[q]||[]).map((s,l)=>t.jsx("div",{className:`absolute w-3 h-3 bg-gray-800 rounded-full ${e[s]}`},l))}),null!==N.diceValue&&!C&&t.jsxs("div",{className:"text-2xl font-bold text-white bg-slate-700 px-3 py-1 rounded-lg",children:["ðŸŽ² ",N.diceValue]})]})})(),D&&t.jsxs("button",{onClick:O,disabled:C,className:"flex items-center gap-2 px-5 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors disabled:opacity-50 font-semibold",children:[t.jsx(r,{className:"w-5 h-5"}),C?w({en:"Rolling...",vi:"Äang tung xÃºc xáº¯c..."}):N.canRollAgain?w({en:"Roll Again! ðŸŽ‰",vi:"Tung láº¡i! ðŸŽ‰"}):w({en:"Roll Dice",vi:"Tung xÃºc xáº¯c"})]})]}),N.hasRolled&&!N.canRollAgain&&L&&!C&&H&&t.jsxs("span",{className:"text-yellow-400 animate-pulse",children:["ðŸ‘†"," ",w({en:"Click a highlighted token to move",vi:"Click quÃ¢n cá» Ä‘Æ°á»£c tÃ´ sÃ¡ng Ä‘á»ƒ di chuyá»ƒn"})]})]}),t.jsx("button",{onClick:()=>M(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:v({en:"Rules",vi:"Luáº­t chÆ¡i"}),children:t.jsx(i,{size:24})}),"ended"===N.gamePhase&&t.jsxs("div",{className:"text-center p-4 bg-slate-800 rounded-lg",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Game Over!"}),t.jsx("p",{className:"text-gray-300",children:N.winner===j?w({en:"ðŸŽ‰ You won!",vi:"ðŸŽ‰ Báº¡n Ä‘Ã£ tháº¯ng!"}):`${N.players.find(e=>e.id===N.winner)?.username} ${w({en:"wins!",vi:"Ä‘Ã£ tháº¯ng!"})}`})]}),"waiting"===N.gamePhase&&t.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-md",children:[0,1,3,2].map(e=>{const s=N.players[e];if(!s)return null;const l=x[s.color];return t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-4 h-4 rounded-full ${l.bg}`}),t.jsxs("span",{className:"text-sm text-white",children:[s.id?s.username:w({en:"(empty)",vi:"(trá»‘ng)"}),s.isBot&&" ðŸ¤–",s.id===j&&w({en:" (You)",vi:" (Báº¡n)"})]})]}),Y&&(s.isBot?t.jsx("button",{onClick:()=>k.requestRemoveBot(e),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded",children:"âœ•"}):!s.id&&t.jsx("button",{onClick:()=>k.requestAddBot(e),className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded",children:"+Bot"}))]},e)})}),t.jsxs("div",{className:"flex gap-3",children:["waiting"===N.gamePhase&&Y&&k.canStartGame()&&t.jsxs("button",{onClick:()=>k.requestStartGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(n,{className:"w-4 h-4"})," ",w({en:"Start Game",vi:"Báº¯t Ä‘áº§u"})]}),"ended"===N.gamePhase&&t.jsxs("button",{onClick:()=>k.requestNewGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(o,{className:"w-4 h-4"})," ",w({en:"Play Again",vi:"ChÆ¡i láº¡i"})]})]}),t.jsxs("div",{className:"relative w-full max-w-[450px] aspect-square bg-slate-900 rounded-xl overflow-hidden shadow-2xl border-4 border-black",children:[t.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 15 15",children:[t.jsx("rect",{x:"0",y:"0",width:"6",height:"6",fill:d,stroke:g,strokeWidth:"0.05"}),t.jsx("rect",{x:"1",y:"1",width:"4",height:"4",fill:m}),t.jsx("circle",{cx:"2",cy:"2",r:"0.6",fill:d,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"4",cy:"2",r:"0.6",fill:d,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"2",cy:"4",r:"0.6",fill:d,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"4",cy:"4",r:"0.6",fill:d,stroke:g,strokeWidth:"0.03"}),t.jsx("rect",{x:"9",y:"0",width:"6",height:"6",fill:y,stroke:g,strokeWidth:"0.05"}),t.jsx("rect",{x:"10",y:"1",width:"4",height:"4",fill:m}),t.jsx("circle",{cx:"11",cy:"2",r:"0.6",fill:y,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"13",cy:"2",r:"0.6",fill:y,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"11",cy:"4",r:"0.6",fill:y,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"13",cy:"4",r:"0.6",fill:y,stroke:g,strokeWidth:"0.03"}),t.jsx("rect",{x:"9",y:"9",width:"6",height:"6",fill:u,stroke:g,strokeWidth:"0.05"}),t.jsx("rect",{x:"10",y:"10",width:"4",height:"4",fill:m}),t.jsx("circle",{cx:"11",cy:"11",r:"0.6",fill:u,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"13",cy:"11",r:"0.6",fill:u,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"11",cy:"13",r:"0.6",fill:u,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"13",cy:"13",r:"0.6",fill:u,stroke:g,strokeWidth:"0.03"}),t.jsx("rect",{x:"0",y:"9",width:"6",height:"6",fill:h,stroke:g,strokeWidth:"0.05"}),t.jsx("rect",{x:"1",y:"10",width:"4",height:"4",fill:m}),t.jsx("circle",{cx:"2",cy:"11",r:"0.6",fill:h,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"4",cy:"11",r:"0.6",fill:h,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"2",cy:"13",r:"0.6",fill:h,stroke:g,strokeWidth:"0.03"}),t.jsx("circle",{cx:"4",cy:"13",r:"0.6",fill:h,stroke:g,strokeWidth:"0.03"}),[0,1,2,3,4,5].map(e=>t.jsxs("g",{children:[t.jsx("rect",{x:e,y:6,width:"1",height:"1",fill:1===e?d:p,stroke:g,strokeWidth:"0.02"}),t.jsx("rect",{x:e,y:7,width:"1",height:"1",fill:0===e?p:d,stroke:g,strokeWidth:"0.02"}),t.jsx("rect",{x:e,y:8,width:"1",height:"1",fill:p,stroke:g,strokeWidth:"0.02"})]},`left-${e}`)),[0,1,2,3,4,5].map(e=>t.jsxs("g",{children:[t.jsx("rect",{x:9+e,y:6,width:"1",height:"1",fill:p,stroke:g,strokeWidth:"0.02"}),t.jsx("rect",{x:9+e,y:7,width:"1",height:"1",fill:e<5?u:p,stroke:g,strokeWidth:"0.02"}),t.jsx("rect",{x:9+e,y:8,width:"1",height:"1",fill:4===e?u:p,stroke:g,strokeWidth:"0.02"})]},`right-${e}`)),[0,1,2,3,4,5].map(e=>t.jsxs("g",{children:[t.jsx("rect",{x:6,y:e,width:"1",height:"1",fill:p,stroke:g,strokeWidth:"0.02"}),t.jsx("rect",{x:7,y:e,width:"1",height:"1",fill:e>0?y:p,stroke:g,strokeWidth:"0.02"}),t.jsx("rect",{x:8,y:e,width:"1",height:"1",fill:1===e?y:p,stroke:g,strokeWidth:"0.02"})]},`top-${e}`)),[0,1,2,3,4,5].map(e=>t.jsxs("g",{children:[t.jsx("rect",{x:6,y:9+e,width:"1",height:"1",fill:4===e?h:p,stroke:g,strokeWidth:"0.02"}),t.jsx("rect",{x:7,y:9+e,width:"1",height:"1",fill:e<5?h:p,stroke:g,strokeWidth:"0.02"}),t.jsx("rect",{x:8,y:9+e,width:"1",height:"1",fill:p,stroke:g,strokeWidth:"0.02"})]},`bottom-${e}`)),t.jsx("polygon",{points:"6,6 9,6 7.5,7.5",fill:y,stroke:g,strokeWidth:"0.03"}),t.jsx("polygon",{points:"9,6 9,9 7.5,7.5",fill:u,stroke:g,strokeWidth:"0.03"}),t.jsx("polygon",{points:"9,9 6,9 7.5,7.5",fill:h,stroke:g,strokeWidth:"0.03"}),t.jsx("polygon",{points:"6,9 6,6 7.5,7.5",fill:d,stroke:g,strokeWidth:"0.03"}),c.map((e,s)=>{const l=U(e);return t.jsx("polygon",{points:b(l.x,l.y,.35),fill:"#fbbf2455",strokeWidth:"0.03",opacity:"0.9"},s)}),"playing"===N.gamePhase&&(()=>{const e=N.players[N.currentPlayerIndex],s={red:{x:0,y:0},green:{x:9,y:0},yellow:{x:9,y:9},blue:{x:0,y:9}}[e.color];return t.jsx("rect",{x:s.x,y:s.y,width:"6",height:"6",fill:x[e.color].fill,strokeWidth:"0.15",style:{animation:"pulse-corner 1s ease-in-out infinite"}})})()]}),N.players.map((e,s)=>{const l=(e=>{switch(e){case"red":return{x:"20%",y:"3%"};case"green":return{x:"80%",y:"3%"};case"yellow":return{x:"80%",y:"97%"};case"blue":return{x:"20%",y:"97%"}}})(e.color),r=N.currentPlayerIndex===s&&"playing"===N.gamePhase,i=x[e.color];return t.jsxs("div",{className:`\n                absolute px-2 py-0.5 rounded text-xs font-bold\n                ${r?`${i.bg} text-white`:"bg-black/50 "+i.text}\n                ${r?"animate-pulse":""}\n              `,style:{left:l.x,top:l.y,transform:`translate(-50%, ${"97%"===l.y?"-100%":"0"})`},children:[e.id?e.username:"(empty)",e.isBot&&" ðŸ¤–"]},`name-${e.color}`)}),N.players.map((e,t)=>e.id&&e.tokens.map(s=>_(s,e.color,t)))]}),"playing"===N.gamePhase&&Y&&t.jsxs("button",{onClick:async()=>{await s.getState().confirm(v({en:"Are you sure you want to reset the game? All progress will be lost.",vi:"Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n reset game? Táº¥t cáº£ tiáº¿n trÃ¬nh sáº½ bá»‹ máº¥t."}),v({en:"New Game",vi:"VÃ¡n má»›i"}))&&k.requestNewGame()},className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors",children:[t.jsx(o,{className:"w-4 h-4"})," ",w({en:"New Game",vi:"VÃ¡n má»›i"})]})]})}const b=(e,t,s)=>{const l=[];for(let r=0;r<10;r++){const i=r%2==0?s:.4*s,n=Math.PI/2+r*Math.PI/5,o=e+i*Math.cos(n),a=t-i*Math.sin(n);l.push(`${o},${a}`)}return l.join(" ")};export{f as default};
