import{a as e,u as t,b as n,j as s}from"./index-Di-nc6fj.js";import{c as l,V as a,af as r,aw as i,av as c,ax as o,ah as u,ag as h,z as d,aj as x,X as m}from"./react-vendor-CVGOeHNa.js";import"./BaseGame-bOx6xEpu.js";import{T as g,a as f,P as b,b as v,B as p,e as y,f as w}from"./types-CValnVhb.js";import"./socket-DRbsQkF5.js";import"./zustand-D55yBrsf.js";function j({game:j}){const N=j,[k,M]=l.useState(N.getState()),{username:S}=e(),{ti:P,ts:C}=t(),{confirm:B}=n(),[T,R]=l.useState(!1),E=l.useRef(null),L=l.useRef(null),A=l.useRef(N.getState().balls),I=l.useRef(new Map),F=l.useRef([]),D=l.useRef(new Set),[Y,W]=l.useState(!1),[q,H]=l.useState(0),[X,z]=l.useState(0),[O,G]=l.useState(null),[K,U]=l.useState(1),[$,Q]=l.useState(!1),[V,J]=l.useState("drag"),[Z,_]=l.useState(!1),ee=N.isMyTurn(),te=l.useRef(()=>{}),ne=l.useRef(!1);ne.current=Y;const se=l.useRef(0);se.current=q;const le=l.useRef(0);le.current=X,l.useEffect(()=>{const e=()=>{if(L.current){const e=L.current.clientWidth-16,t=.8*window.innerHeight,n=window.innerWidth*($?.6:.8),s=$?f:g,l=$?g:f,a=Math.min(e,n)/s,r=t/l,i=Math.min(1,a,r);U(i)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[$]);const ae=l.useRef({isAiming:Y,aimAngle:q,aimPower:X,mousePos:O});ae.current={isAiming:Y,aimAngle:q,aimPower:X,mousePos:O};const re=l.useRef(K);re.current=K;const ie=l.useRef($);ie.current=$;const ce=l.useRef(V);ce.current=V;const oe=l.useRef(Z);oe.current=Z;const ue=l.useRef(null),he=l.useRef(new Map);l.useEffect(()=>{const e=new Map,t=e=>{const t=document.createElement("canvas"),n=2*p;t.width=n,t.height=n;const s=t.getContext("2d");if(!s)return t;const l=p,a=y[e]||"#FFF";return s.fillStyle=a,s.beginPath(),s.arc(l,l,p,0,2*Math.PI),s.fill(),e>=9&&e<=15&&(s.fillStyle="white",s.beginPath(),s.arc(l,l,.7*p,0,2*Math.PI),s.fill()),0!==e&&(s.fillStyle=e>=9&&e<=15?"black":"white",s.font=`bold ${p}px Arial`,s.textAlign="center",s.textBaseline="middle",s.save(),s.translate(l,l),$&&s.rotate(Math.PI/2),s.fillText(e.toString(),0,0),s.restore()),s.fillStyle="rgba(255, 255, 255, 0.3)",s.beginPath(),s.arc(l-.3*p,l-.3*p,.3*p,0,2*Math.PI),s.fill(),t};for(let n=0;n<=15;n++)e.set(n,t(n));he.current=e},[$]),l.useEffect(()=>{ue.current||(ue.current=document.createElement("canvas"));const e=ue.current;e.width=g,e.height=f;const t=e.getContext("2d");if(t){t.fillStyle="#1a472a",t.fillRect(0,0,g,f),t.strokeStyle="#5d3a1a",t.lineWidth=20,t.strokeRect(10,10,g-20,f-20),t.fillStyle="#111";for(const e of b)t.beginPath(),t.arc(e.x,e.y,v,0,2*Math.PI),t.fill()}},[]);const de=l.useCallback((e,t,n)=>{e.fillStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.arc(t.x+2,t.y+2,p,0,2*Math.PI),e.fill(),n&&(e.save(),e.globalAlpha=.6,e.fillStyle=n,e.beginPath(),e.arc(t.x,t.y,p+7,0,2*Math.PI),e.fill(),e.restore());const s=he.current.get(t.id);s&&e.drawImage(s,t.x-p,t.y-p)},[]),xe=l.useCallback(()=>{const e=E.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const n=re.current,{isAiming:s,aimAngle:l,aimPower:a}=ae.current,r=ie.current;e.width=(r?f:g)*n,e.height=(r?g:f)*n,t.save(),t.scale(n,n),r&&(t.translate(0,g),t.rotate(-Math.PI/2)),ue.current?t.drawImage(ue.current,0,0):(t.fillStyle="#1a472a",t.fillRect(0,0,g,f)),I.current.forEach((e,n)=>{if(e.length<2)return;const s=y[n]||"#FFF";for(let l=0;l<e.length;l++){const n=e[l],a=l/e.length*.4;t.beginPath(),t.arc(n.x,n.y,p,0,2*Math.PI),t.fillStyle=s,t.globalAlpha=a,t.fill(),t.fillStyle="rgba(255, 255, 255, 0.3)",t.beginPath(),t.arc(n.x-.3*p,n.y-.3*p,.3*p,0,2*Math.PI),t.globalAlpha=a,t.fill()}t.globalAlpha=1});const i=N.getState(),c=N.getMySlot(),o=c===i.currentTurn&&"playing"===i.gamePhase&&!i.isSimulating,u=c?i.players[c].ballType:null,h=u&&0===A.current.filter(e=>!e.pocketed&&e.type===u).length;for(const g of A.current){if(g.pocketed)continue;let e;o&&(0===g.id?e="#00ff88":u&&(h&&8===g.id?e="#ffcc00":g.type===u&&(e="#00aaff"))),de(t,g,e)}const d=A.current.find(e=>0===e.id&&!e.pocketed);if(s&&d&&(a>0||"slider"===ce.current)){let e=d.x,n=d.y,s=l,i=2e3;const c=4;t.beginPath(),t.moveTo(e,n);for(let l=0;l<c;l++){let a=i,c={x:e+Math.cos(s)*a,y:n+Math.sin(s)*a},o=null,u=null,h={x:0,y:0};const d=Math.cos(s),x=Math.sin(s);if(d>0){const t=(g-p-e)/d;t<a&&(a=t,o="wall",h={x:-1,y:0},c={x:g-p,y:n+t*x})}else{const t=(p-e)/d;t<a&&(a=t,o="wall",h={x:1,y:0},c={x:p,y:n+t*x})}if(x>0){const t=(f-p-n)/x;t<a&&(a=t,o="wall",h={x:0,y:-1},c={x:e+t*d,y:f-p})}else{const t=(p-n)/x;t<a&&(a=t,o="wall",h={x:0,y:1},c={x:e+t*d,y:p})}for(const t of A.current){if(0===t.id||t.pocketed)continue;if(Math.abs(t.x-e)>a&&Math.abs(t.y-n)>a)continue;const s=e-t.x,l=n-t.y,r=2*(d*s+x*l),i=r*r-4*(s*s+l*l-4*p*p);if(i>=0){const s=(-r-Math.sqrt(i))/2,l=(-r+Math.sqrt(i))/2;let h=-1;s>.001?h=s:l>.001&&(h=l),h>0&&h<a&&(a=h,c={x:e+h*d,y:n+h*x},o="ball",u=t)}}if(t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.setLineDash([5,5]),t.lineTo(c.x,c.y),t.stroke(),t.beginPath(),t.moveTo(c.x,c.y),t.save(),t.beginPath(),t.arc(c.x,c.y,p,0,2*Math.PI),t.fillStyle="rgba(255, 255, 255, 0.2)",t.fill(),t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=1,t.setLineDash([]),t.stroke(),t.fillStyle="rgba(255, 255, 255, 0.8)",t.font="10px Arial",t.textAlign="center",t.textBaseline="middle",r?(t.save(),t.translate(c.x,c.y),t.rotate(Math.PI/2),t.fillText((l+1).toString(),0,0),t.restore()):t.fillText((l+1).toString(),c.x,c.y),t.restore(),"ball"===o&&u){const e=Math.atan2(u.y-c.y,u.x-c.x);t.strokeStyle="rgba(255, 255, 255, 0.8)",t.lineWidth=2,t.setLineDash([]),t.beginPath(),t.moveTo(u.x,u.y),t.lineTo(u.x+75*Math.cos(e),u.y+75*Math.sin(e)),t.stroke();break}if("wall"!==o)break;{const t=.7;let l=Math.cos(s),r=Math.sin(s);if(0!==h.x?l=-l*t:r=-r*t,s=Math.atan2(r,l),e=c.x+.1*h.x,n=c.y+.1*h.y,i-=a,i<=0)break}}const o=200,u=p+5+50*a,h=d.x-Math.cos(l)*u,x=d.y-Math.sin(l)*u,m=h-Math.cos(l)*o,b=x-Math.sin(l)*o;t.strokeStyle="#8B4513",t.lineWidth=6,t.lineCap="round",t.beginPath(),t.moveTo(h,x),t.lineTo(m,b),t.stroke(),t.fillStyle="#E6D5B8",t.beginPath(),t.arc(h,x,4,0,2*Math.PI),t.fill()}const x=performance.now(),m=[];for(const g of F.current){const e=(x-g.startTime)/g.duration;if(e<1){m.push(g);for(let n=0;n<5;n++){const s=Math.max(0,e-.15*n);if(s>0&&s<1){const e=v+40*s,n=.6*(1-s);t.strokeStyle="white",t.globalAlpha=n,t.lineWidth=3-2*s,t.beginPath(),t.arc(g.x,g.y,e,0,2*Math.PI),t.stroke()}}t.globalAlpha=1}}F.current=m,t.restore()},[de]);te.current=xe;const me=l.useRef(null),ge=l.useCallback(()=>{if(me.current)return;const e=()=>{let t=!1;const n=A.current;for(const e of n){const n=I.current.get(e.id)||[];Math.sqrt(e.vx*e.vx+e.vy*e.vy)>.05&&!e.pocketed?(t=!0,n.push({x:e.x,y:e.y}),n.length>20&&n.shift(),I.current.set(e.id,n)):n.length>0&&(t=!0,n.shift(),0===n.length?I.current.delete(e.id):I.current.set(e.id,n))}if(F.current.length>0&&(t=!0),!t){n.some(e=>!e.pocketed&&(Math.abs(e.vx)>.05||Math.abs(e.vy)>.05))&&(t=!0)}te.current(),me.current=t?requestAnimationFrame(e):null};me.current=requestAnimationFrame(e)},[]);l.useEffect(()=>{xe()},[xe,k,Y,q,X,K]),l.useEffect(()=>{const e=N.onUpdate(e=>{M(e),A.current=e.balls,("waiting"===e.gamePhase||1===e.currentTurn&&"playing"===e.gamePhase&&!e.lastShot)&&I.current.clear(),e.isSimulating?ge():te.current()});return N.onFrame(e=>{let t=!1;const n=new Set(e.filter(e=>e.pocketed).map(e=>e.id));for(const s of e){if(s.pocketed&&!D.current.has(s.id))for(const e of b){const n=s.x-e.x,l=s.y-e.y;if(n*n+l*l<(2*v)**2){F.current.push({x:e.x,y:e.y,color:y[s.id]||"#FFF",startTime:performance.now(),duration:2e3}),t=!0;break}}!s.pocketed&&(Math.abs(s.vx)>.01||Math.abs(s.vy)>.01)&&(t=!0)}D.current=n,A.current=e,t?ge():me.current||te.current()}),()=>{e()}},[N,ge]),l.useEffect(()=>()=>{me.current&&cancelAnimationFrame(me.current)},[]);const fe=l.useCallback((e,t)=>{const n=E.current;if(!n)return null;const s=n.getBoundingClientRect(),l=(e-s.left)/K,a=(t-s.top)/K;return $?{x:g-a,y:l}:{x:l,y:a}},[K,$]),be=l.useCallback((e,t)=>{const n=A.current.find(e=>0===e.id&&!e.pocketed);if(!n)return;const s=fe(e,t);if(s)if(G(s),"slider"===ce.current){const e=Math.atan2(s.y-n.y,s.x-n.x);H(e)}else{const e=Math.atan2(s.y-n.y,s.x-n.x)+Math.PI;H(e);const t=s.x-n.x,l=s.y-n.y,a=Math.sqrt(t*t+l*l),r=Math.min(1,a/200);z(r)}},[fe]),ve=l.useCallback(()=>{"drag"===ce.current?le.current>=w?(I.current.clear(),N.shoot(se.current,le.current),W(!1),z(0),G(null)):(W(!1),G(null)):_(!1)},[N]);l.useEffect(()=>{const e=e=>{ne.current&&("slider"!==ce.current||oe.current)&&be(e.clientX,e.clientY)},t=()=>{ne.current&&ve()},n=e=>{if(ne.current&&e.touches.length>0){if(!ne.current)return;if("slider"===ce.current&&!oe.current)return;be(e.touches[0].clientX,e.touches[0].clientY)}},s=()=>{ne.current&&ve()};return document.addEventListener("mousemove",e,{passive:!1}),document.addEventListener("mouseup",t),document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchend",s),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",s)}},[be,ve]),l.useEffect(()=>{const e=E.current;if(!e)return;const t=t=>{if(!N.isMyTurn()||N.getState().isSimulating)return;const n=A.current.find(e=>0===e.id&&!e.pocketed);if(!n)return;if(0===t.touches.length)return;const s=t.touches[0].clientX,l=t.touches[0].clientY,a=e.getBoundingClientRect(),r=re.current,i=ie.current,c=ce.current,o=(s-a.left)/r,u=(l-a.top)/r;let h=o,d=u;i&&(h=g-u,d=o);let x=!1;if("slider"===c)x=!0;else{const e=h-n.x,t=d-n.y;Math.sqrt(e*e+t*t)<3*p&&(x=!0)}x&&(t.preventDefault(),W(!0),"slider"===c&&_(!0),G({x:h,y:d}),be(s,l))},n=e=>{ne.current&&("slider"!==ce.current||oe.current)&&e.preventDefault()};return e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("touchmove",n,{passive:!1}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n)}},[N,be]);const pe=e=>{const t=k.players[e];return t.id?"BOT"===t.id?"Bot ü§ñ":t.id===N.userId?S||P({en:"You",vi:"B·∫°n"}):t.username||P({en:"Player",vi:"Ng∆∞·ªùi ch∆°i"})+" "+e:P({en:"(waiting...)",vi:"(ƒëang ch·ªù...)"})},ye=e=>{const t=k.players[e].ballType;return t?P("solid"===t?{en:"(Solids 1-7)",vi:"(Tr∆°n 1-7)"}:{en:"(Stripes 9-15)",vi:"(S·ªçc 9-15)"}):""};return s.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 w-full max-w-4xl mx-auto pb-12",ref:L,children:[s.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-800 rounded-lg w-full max-w-[500px]",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Players"}),[1,2].map(e=>{const t=k.players[e],n=k.currentTurn===e&&"playing"===k.gamePhase,l=t.id===N.userId,a="BOT"===t.id;return s.jsxs("div",{className:`\n                flex items-center justify-between p-3 rounded-lg\n                ${n?"bg-slate-600 ring-2 ring-blue-400":"bg-slate-700"}\n              `,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full "+(1===e?"bg-blue-500":"bg-red-500")}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-white font-medium",children:[pe(e),l&&t.id&&P({en:" (You)",vi:" (B·∫°n)"})]}),s.jsx("span",{className:"text-gray-400 text-sm ml-2",children:ye(e)})]})]}),a&&N.isHost&&"waiting"===k.gamePhase&&s.jsx("button",{onClick:()=>N.removeBot(),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:P({en:"Remove",vi:"X√≥a"})}),!t.id&&N.isHost&&2===e&&"waiting"===k.gamePhase&&s.jsxs("button",{onClick:()=>N.addBot(),className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors flex items-center gap-1",children:[s.jsx(r,{className:"w-3 h-3"})," ",P({en:"Add Bot",vi:"Th√™m Bot"})]})]},e)})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{className:"flex items-center justify-center p-3 bg-slate-700 hover:bg-slate-600 rounded-full transition-colors",onClick:()=>Q(!$),children:[s.jsx(i,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"text-white text-sm ml-2",children:P({en:"Rotate table",vi:"Xoay b√†n"})})]}),s.jsxs("button",{className:"flex items-center justify-center p-3 bg-slate-700 hover:bg-slate-600 rounded-full transition-colors",onClick:()=>J("drag"===V?"slider":"drag"),title:P({en:"Switch Control Mode",vi:"ƒê·ªïi ki·ªÉu hi·ªán khi·ªÉn"}),children:["drag"===V?s.jsx(c,{className:"w-5 h-5 text-white"}):s.jsx(o,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"text-white text-sm ml-2",children:P("drag"===V?{en:"Drag Mode",vi:"K√©o th·∫£"}:{en:"Slider Mode",vi:"Thanh l·ª±c"})})]})]}),"playing"===k.gamePhase&&!k.winner&&s.jsx("div",{className:"text-lg text-gray-400",children:k.isSimulating?s.jsx("span",{className:"text-yellow-400",children:P({en:"Balls in motion...",vi:"B√≥ng ƒëang lƒÉn..."})}):ee?s.jsxs("span",{className:"text-green-400 flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5"}),P("drag"===V?{en:"Your turn! Click near the cue ball and drag to aim.",vi:"L∆∞·ª£t c·ªßa b·∫°n! Nh·∫•p v√†o b√≥ng tr·∫Øng v√† k√©o ƒë·ªÉ ng·∫Øm."}:{en:"Your turn! Click to aim, set power, then Shoot.",vi:"L∆∞·ª£t c·ªßa b·∫°n! Ch·ªçn h∆∞·ªõng, ch·ªânh l·ª±c, r·ªìi b·∫•m B·∫ÆN."})]}):s.jsx("span",{children:P({en:"Waiting for opponent...",vi:"ƒêang ch·ªù ƒë·ªëi th·ªß..."})})}),k.turnMessage&&s.jsx("div",{className:"text-yellow-400 text-sm",children:k.turnMessage}),s.jsxs("div",{className:"relative bg-slate-800 p-2 rounded-xl shadow-2xl overflow-hidden",children:[s.jsx("canvas",{ref:E,width:g*K,height:f*K,className:"rounded-lg cursor-crosshair block",style:{touchAction:"none"},onMouseDown:e=>{if(!ee||k.isSimulating)return;const t=A.current.find(e=>0===e.id&&!e.pocketed);if(!t)return;const n="touches"in e?e.touches[0].clientX:e.clientX,s="touches"in e?e.touches[0].clientY:e.clientY,l=fe(n,s);if(!l)return;let a=!1;if("slider"===V)a=!0;else{const e=l.x-t.x,n=l.y-t.y;Math.sqrt(e*e+n*n)<5*p&&(a=!0)}a&&(e.preventDefault(),W(!0),"slider"===V&&_(!0),be(n,s))},onMouseMove:e=>{if(!Y)return;if("slider"===V&&!Z)return;e.preventDefault();const t="touches"in e?e.touches[0].clientX:e.clientX,n="touches"in e?e.touches[0].clientY:e.clientY;be(t,n)}}),(k.winner||"waiting"===k.gamePhase)&&s.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-black/60 backdrop-blur-[2px] rounded-lg animate-fade-in",children:[k.winner&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-3xl font-bold text-green-400 mb-6 drop-shadow-lg animate-bounce",children:["üèÜ ",pe(k.winner)," ",P({en:"wins!",vi:"th·∫Øng!"})]}),N.isHost?s.jsxs("button",{onClick:()=>N.requestReset(),className:"px-8 py-4 bg-green-600 hover:bg-green-500 rounded-full text-white font-bold text-lg transition-transform hover:scale-105 flex items-center gap-2 shadow-lg",children:[s.jsx(h,{className:"w-6 h-6"}),P({en:"Play Again",vi:"Ch∆°i l·∫°i"})]}):s.jsx("div",{className:"text-slate-300 animate-pulse",children:P({en:"Waiting for host to restart...",vi:"ƒêang ch·ªù ch·ªß ph√≤ng ch∆°i l·∫°i..."})})]}),!k.winner&&"waiting"===k.gamePhase&&s.jsx(s.Fragment,{children:N.isHost?N.canStartGame()?s.jsxs("button",{onClick:()=>N.startGame(),className:"px-8 py-4 bg-green-600 hover:bg-green-500 rounded-full text-white font-bold text-lg transition-transform hover:scale-105 flex items-center gap-2 shadow-lg",children:[s.jsx(d,{className:"w-6 h-6"}),P({en:"Start Game",vi:"B·∫Øt ƒë·∫ßu"})]}):s.jsx("div",{className:"flex flex-col items-center gap-3",children:s.jsx("div",{className:"text-lg text-slate-300 font-medium",children:P({en:"Waiting for opponent...",vi:"ƒêang ch·ªù ƒë·ªëi th·ªß..."})})}):s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-slate-500 border-t-white rounded-full animate-spin"}),s.jsx("div",{className:"text-lg text-slate-300 font-medium",children:P({en:"Waiting for host to start...",vi:"ƒêang ch·ªù ch·ªß ph√≤ng b·∫Øt ƒë·∫ßu..."})})]})})]})]}),Y&&"drag"===V&&s.jsxs("div",{className:"w-full max-w-xs",children:[s.jsxs("div",{className:"text-sm text-gray-400 mb-1",children:[P({en:"Power",vi:"L·ª±c"}),": ",Math.round(100*X),"%"]}),s.jsx("div",{className:"h-3 bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full transition-all duration-75",style:{width:100*X+"%",background:"linear-gradient(90deg, #22c55e, #eab308, #ef4444)"}})})]}),"slider"===V&&s.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-md p-4 bg-slate-800/80 rounded-xl backdrop-blur-sm border border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white font-medium",children:P({en:"Power",vi:"L·ª±c b·∫Øn"})}),s.jsxs("span",{className:"font-bold "+(X>.8?"text-red-500":X>.5?"text-yellow-500":"text-green-500"),children:[Math.round(100*X),"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:X,disabled:!ee||k.isSimulating,onChange:e=>{z(parseFloat(e.target.value)),Y||W(!0)},className:"w-full h-4 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),s.jsx("button",{onClick:()=>{X>=w&&(I.current.clear(),N.shoot(q,X),W(!1),z(0),G(null))},disabled:X<w||!ee||k.isSimulating,className:"\n                    w-full py-3 rounded-lg font-bold text-lg shadow-lg transition-all\n                    disabled:bg-slate-600 disabled:text-slate-400 disabled:cursor-not-allowed\n                    bg-red-600 hover:bg-red-500 text-white hover:scale-[1.02] active:scale-[0.98]\n                ",children:P({en:"SHOOT!",vi:"B·∫ÆN!"})})]}),N.isHost&&"waiting"!==k.gamePhase&&s.jsxs("button",{onClick:async()=>{await B(C({en:"Are you sure you want to reset the game?",vi:"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ch∆°i l·∫°i kh√¥ng?"}),C({en:"Reset game",vi:"Ch∆°i l·∫°i"}))&&N.requestReset()},className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded-full ",children:[s.jsx(h,{className:"w-4 h-4"}),P({en:"New game",vi:"Ch∆°i l·∫°i"})]}),s.jsx("button",{onClick:()=>R(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:C({en:"Game Rules",vi:"Lu·∫≠t ch∆°i"}),children:s.jsx(x,{size:24})}),T&&a.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-100 flex items-center justify-center p-4 text-left",children:s.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl relative",children:[s.jsxs("div",{className:"flex justify-between sticky top-0 p-4 pr-2 bg-slate-900 border-b border-slate-800",children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(x,{className:"w-6 h-6 text-yellow-500"}),P({en:"Game Rules: Billiard (8-Ball)",vi:"Lu·∫≠t Ch∆°i: Bi-a (8 B√≥ng)"})]}),s.jsx("button",{onClick:()=>R(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:s.jsx(m,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-6 text-slate-300 leading-relaxed font-sans text-sm md:text-base",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-2",children:P({en:"Objective",vi:"M·ª•c ti√™u"})}),s.jsx("p",{children:P({en:"Pocket all of your assigned balls (Solids or Stripes) and then pocket the 8-Ball to win.",vi:"ƒê∆∞a t·∫•t c·∫£ c√°c bi m·ª•c ti√™u c·ªßa b·∫°n (bi Tr∆°n ho·∫∑c bi S·ªçc) v√†o l·ªó v√† cu·ªëi c√πng l√† bi s·ªë 8 ƒë·ªÉ chi·∫øn th·∫Øng."})})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-2",children:P({en:"Key Rules",vi:"Quy T·∫Øc Ch√≠nh"})}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:P({en:"First ball pocketed determines your group (Solids 1-7 or Stripes 9-15).",vi:"Bi ƒë·∫ßu ti√™n v√†o l·ªó s·∫Ω quy·∫øt ƒë·ªãnh nh√≥m bi c·ªßa b·∫°n (Tr∆°n 1-7 ho·∫∑c S·ªçc 9-15)."})}),s.jsx("li",{children:P({en:"You must hit your own ball group first.",vi:"Ban ph·∫£i ch·∫°m v√†o bi thu·ªôc nh√≥m c·ªßa m√¨nh tr∆∞·ªõc."})}),s.jsx("li",{children:P({en:"Pocketing the wrong ball or scratching (white ball in pocket) is a foul.",vi:"ƒê∆∞a nh·∫ßm bi v√†o l·ªó ho·∫∑c l√†m r∆°i bi tr·∫Øng l√† ph·∫°m l·ªói."})}),s.jsxs("li",{children:[s.jsx("strong",{className:"text-red-400",children:P({en:"Do NOT pocket the 8-Ball early!",vi:"KH√îNG ƒë∆∞·ª£c l√†m r∆°i bi s·ªë 8 s·ªõm!"})})," ",P({en:"You lose instantly if the 8-Ball enters a pocket before your other balls are cleared.",vi:"B·∫°n s·∫Ω thua ngay l·∫≠p t·ª©c n·∫øu bi s·ªë 8 v√†o l·ªó tr∆∞·ªõc khi b·∫°n d·ªçn s·∫°ch c√°c bi kh√°c."})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-2",children:P({en:"Controls",vi:"ƒêi·ªÅu Khi·ªÉn"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("strong",{className:"text-blue-400",children:P({en:"Drag Mode (Default):",vi:"Ch·∫ø ƒë·ªô K√©o (M·∫∑c ƒë·ªãnh):"})}),s.jsx("p",{className:"ml-2 text-slate-400 text-sm",children:P({en:"Click/Touch near the cue ball and pull back to aim and set power. Release to shoot.",vi:"Nh·∫•p/Ch·∫°m g·∫ßn bi tr·∫Øng v√† k√©o v·ªÅ ph√≠a sau ƒë·ªÉ ng·∫Øm v√† ch·ªânh l·ª±c. Th·∫£ tay ƒë·ªÉ b·∫Øn."})})]}),s.jsxs("div",{children:[s.jsx("strong",{className:"text-blue-400",children:P({en:"Slider Mode:",vi:"Ch·∫ø ƒë·ªô Thanh l·ª±c:"})}),s.jsx("p",{className:"ml-2 text-slate-400 text-sm",children:P({en:"Click anywhere to place aim stick. Use the slider below to set power, then press SHOOT.",vi:"Nh·∫•p b·∫•t k·ª≥ ƒë√¢u ƒë·ªÉ ƒë·∫∑t g·∫≠y ng·∫Øm. D√πng thanh tr∆∞·ª£t b√™n d∆∞·ªõi ƒë·ªÉ ch·ªânh l·ª±c, sau ƒë√≥ b·∫•m n√∫t B·∫ÆN."})})]})]})]})]})]})}),document.body)]})}export{j as default};
