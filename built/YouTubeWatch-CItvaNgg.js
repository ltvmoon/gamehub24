import{B as t}from"./BaseGame-Bk_CJ4n7.js";import"./socket-DRbsQkF5.js";import"./index-Dp6FX8_v.js";import"./react-vendor-DWJY-O-l.js";import"./zustand-DSzZ-G-z.js";class e extends t{getInitState(){return{videoId:"",isPlaying:!1,timestamp:0,lastUpdate:Date.now(),allowGuestControl:!1}}onSocketGameAction(t){const e=t.action;if(this.isHost)switch(e.type){case"SET_VIDEO":this.handleSetVideo(e.payload);break;case"TOGGLE_GUEST_CONTROL":this.handleToggleGuestControl(e.payload)}}sync(t,e){this.state.isPlaying=t,this.state.timestamp=e}handleSetVideo(t){this.isHost&&(this.state.videoId=t,this.state.isPlaying=!0,this.state.timestamp=0,this.state.lastUpdate=Date.now())}handleToggleGuestControl(t){this.isHost&&(this.state.allowGuestControl=t)}setVideo(t){const e=this.extractVideoId(t);if(!e)return;const s={type:"SET_VIDEO",payload:e};this.makeAction(s)}toggleGuestControl(t){const e={type:"TOGGLE_GUEST_CONTROL",payload:t};this.makeAction(e)}extractVideoId(t){const e=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/^([a-zA-Z0-9_-]{11})$/];for(const s of e){const e=t.match(s);if(e)return e[1]}return null}}export{e as default};
