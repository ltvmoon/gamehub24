import{u as e,j as t}from"./index-B5e3DCQv.js";import{j as s,X as a,e as r,K as n,M as l,O as i}from"./react-vendor-BBF6bHIx.js";import"./socket-DRbsQkF5.js";import"./zustand-BazUDoMU.js";function o({game:o}){const c=o,[m,x]=s.useState(c.getState()),{username:d}=e(),g=c.getPlayerSymbol(),u=m.currentTurn===g,h=m.board,p=m.winningLine,b=m.lastMoveIndex;s.useEffect(()=>{c.onUpdate(e=>{x(e)})},[c]);return t.jsxs("div",{className:"flex flex-col items-center gap-3 md:p-4 w-full max-w-sm mx-auto",children:[t.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-800 rounded-lg w-full max-w-[400px] mx-auto",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Players"}),["X","O"].map(e=>{const s=m.players[e],l=m.currentTurn===e&&!m.gameOver,i=e===g,o="BOT"===s,x=o?"Bot":i?d:s?"Opponent":null;return t.jsxs("div",{className:`\n                flex items-center justify-between p-2 rounded-lg\n                ${l?"bg-slate-600 ring-2 ring-blue-400":"bg-slate-700"}\n              `,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:"X"===e?t.jsx(a,{className:"w-5 h-5 text-blue-400",strokeWidth:2.5}):t.jsx(r,{className:"w-5 h-5 text-red-400",strokeWidth:2.5})}),t.jsxs("span",{className:"text-white",children:[x||"(waiting...)",o&&" ðŸ¤–",i&&s&&" (You)"]})]}),o&&c.isHostUser&&!m.gameOver&&t.jsx("button",{onClick:()=>c.removeBot(),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:"Remove"}),!s&&c.isHostUser&&!m.gameOver&&"O"===e&&t.jsxs("button",{onClick:()=>c.addBot(),className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors flex items-center gap-1",children:[t.jsx(n,{className:"w-3 h-3"})," Add Bot"]})]},e)})]}),"waiting"===m.gamePhase&&c.isHostUser&&t.jsx("div",{className:"flex flex-col items-center gap-2",children:c.canStartGame()?t.jsxs("button",{onClick:()=>c.startGame(),className:"px-6 py-3 bg-green-600 hover:bg-green-500 rounded-lg text-white font-medium transition-colors flex items-center gap-2",children:[t.jsx(l,{className:"w-5 h-5"}),"Start Game"]}):t.jsx("span",{className:"text-sm text-slate-400",children:"Waiting for opponent to join..."})}),"waiting"===m.gamePhase&&!c.isHostUser&&t.jsx("div",{className:"text-sm text-slate-400",children:"Waiting for host to start the game..."}),"playing"===m.gamePhase&&!m.gameOver&&t.jsx("div",{className:"text-lg text-gray-400",children:u?t.jsx("span",{className:"text-green-400",children:"Your turn! Click a cell."}):t.jsx("span",{children:"Waiting for opponent..."})}),"playing"===m.gamePhase&&!m.gameOver&&h.every(e=>null===e)&&u&&t.jsxs("button",{onClick:()=>{c.switchTurn()},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-300 text-sm font-medium transition-colors flex items-center gap-2",title:"Give first move to opponent",children:[t.jsx(i,{className:"w-4 h-4"}),"Give First Move"]}),t.jsx("div",{className:"grid grid-cols-3 gap-2 bg-slate-800 p-3 rounded-xl relative",children:h.map((e,s)=>{const n=p?.includes(s),l=b===s,i=u&&!e&&!m.gameOver;return t.jsxs("button",{onClick:()=>(e=>{m.gameOver||null===m.board[e]&&u&&c.requestMove(e)})(s),disabled:!i,className:`\n                w-20 h-20 sm:w-24 sm:h-24 rounded-lg flex items-center justify-center text-4xl transition-all\n                border border-slate-700\n                ${e?"bg-slate-700 shadow-inner":"bg-slate-750 hover:bg-slate-700"}\n                ${n?"bg-green-500/20 ring-2 ring-green-500":""}\n                ${l&&!n?"bg-amber-500/20 ring-2 ring-amber-500/50":""}\n                ${i?"cursor-pointer hover:ring-2 hover:ring-primary-500/50":"cursor-default"}\n              `,children:["X"===e&&t.jsx(a,{className:"w-12 h-12 "+(n?"text-green-400":"text-blue-400"),strokeWidth:2.5}),"O"===e&&t.jsx(r,{className:"w-10 h-10 "+(n?"text-green-400":"text-red-400"),strokeWidth:2.5})]},s)})}),m.gameOver&&t.jsx("div",{className:"flex gap-3 w-full",children:t.jsx("button",{onClick:()=>c.requestReset(),className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-slate-300 font-medium transition-colors flex items-center justify-center gap-2",children:"Play Again"})})]})}export{o as default};
