import{j as e,u as t,A as s,m as l}from"./index-BwFFTHxy.js";import{b as r,c as i,R as n,a_ as a,aZ as o,a7 as c,aC as d,a8 as h,by as u,aL as x,X as b}from"./react-vendor-BqGe223k.js";import"./BaseGame-CsKbx1S6.js";import{T as m,b as f,d as g,a as p,M as v}from"./constants-HSy5Gk2x.js";import{u as w}from"./useGameState-B9NgJQ7q.js";import"./socket-DRbsQkF5.js";import"./zustand-B1murped.js";const j=(e,t,s)=>!(t<0||t>=e.height||s<0||s>=e.width)&&e.grid[t][s]===m,y=({state:t,displayedLevelId:s,currentUserId:l,tileSize:i,width:n,height:a})=>{const o=r.useRef(null),c=r.useRef(null),d=r.useRef(performance.now()),h=r.useRef(0),u=r.useRef(0),x=r.useRef({}),b=r.useRef({}),g=r.useRef({}),p=r.useRef({}),v=r.useRef(performance.now());r.useEffect(()=>{x.current={...b.current},b.current=Object.fromEntries(Object.values(t.players).map(e=>[e.id,{pos:{...e.pos},levelId:e.currentLevelId}])),g.current={...p.current};const e={};Object.entries(t.levels).forEach(([t,s])=>{s.boxContents&&Object.entries(s.boxContents).forEach(([s,l])=>{const[r,i]=s.split(",").map(Number);e[l]={pos:{x:r,y:i},levelId:t}})}),p.current=e,v.current=performance.now()},[t]);const w=(e,s,r,i,n,a,o)=>{const c=s.split("#")[0],d=t.levels[c];if(!d||a>3)return;const h=n/d.width,u=n/d.height;e.fillStyle=d.color,e.fillRect(r,i,n,n),d.grid.forEach((t,s)=>{t.forEach((t,l)=>{const n=r+l*h,a=i+s*u;if(t===m){e.fillStyle="#1e293b",e.fillRect(n,a,h,u);const t=j(d,s-1,l),r=j(d,s+1,l),i=j(d,s,l-1),o=j(d,s,l+1);e.strokeStyle="rgba(255,255,255,0.1)",e.lineWidth=1,t||(e.beginPath(),e.moveTo(n,a),e.lineTo(n+h,a),e.stroke()),r||(e.beginPath(),e.moveTo(n,a+u),e.lineTo(n+h,a+u),e.stroke()),i||(e.beginPath(),e.moveTo(n,a),e.lineTo(n,a+u),e.stroke()),o||(e.beginPath(),e.moveTo(n+h,a),e.lineTo(n+h,a+u),e.stroke())}else if(t===f){const t=.2*Math.sin(o/200)+.8;e.fillStyle=`rgba(96, 165, 250, ${.2*t})`,e.beginPath(),e.arc(n+h/2,a+u/2,h/4*t,0,2*Math.PI),e.fill()}})});const y=performance.now(),k=Math.min(1,(y-v.current)/150);Object.entries(p.current).forEach(([s,l])=>{if(l.levelId===c){const n=g.current[s];let c=l.pos.x,d=l.pos.y;n&&n.levelId===l.levelId&&(c=n.pos.x+(l.pos.x-n.pos.x)*k,d=n.pos.y+(l.pos.y-n.pos.y)*k);const x=r+c*h,b=i+d*u,m=s.split("#")[0];t.levels[m]?w(e,s,x,b,h,a+1,o):(e.fillStyle="#475569",e.fillRect(x+.15*h,b+.15*u,.7*h,.7*u),e.strokeRect(x+.15*h,b+.15*u,.7*h,.7*u))}}),Object.values(t.players).forEach(t=>{if(t.currentLevelId===c){const s=x.current[t.id],n=b.current[t.id];let a=t.pos.x,c=t.pos.y;s&&n&&s.levelId===n.levelId&&(a=s.pos.x+(n.pos.x-s.pos.x)*k,c=s.pos.y+(n.pos.y-s.pos.y)*k);const d=r+a*h,m=i+c*u;e.save(),e.fillStyle=t.id===l?"#3b82f6":"#22c55e",e.shadowBlur=15,e.shadowColor=e.fillStyle,e.beginPath();const f=8,g=.8*h,p=.8*u,v=d+.1*h,w=m+.1*u;e.moveTo(v+f,w),e.arcTo(v+g,w,v+g,w+p,f),e.arcTo(v+g,w+p,v,w+p,f),e.arcTo(v,w+p,v,w,f),e.arcTo(v,w,v+f,w,f),e.fill(),e.restore();const j=Math.sin(o/1e3)>.95?.1:1;e.fillStyle="white",e.fillRect(d+.3*h,m+.35*u,.1*h,.15*u*j),e.fillRect(d+.6*h,m+.35*u,.1*h,.15*u*j)}})},y=e=>{const l=o.current;if(!l)return;const r=l.getContext("2d");if(!r)return;u.current++,e>d.current+1e3&&(h.current=Math.round(1e3*u.current/(e-d.current)),d.current=e,u.current=0),r.clearRect(0,0,l.width,l.height);const n=s.split("#")[0],a=t.levels[n];if(!a)return;const x=a.width*i,b=a.height*i,m=(l.width-x)/2,f=(l.height-b)/2;w(r,s,m,f,x,0,e),r.fillStyle="rgba(0, 0, 0, 0.7)",r.beginPath(),r.roundRect(10,10,80,30,8),r.fill(),r.fillStyle=h.current>55?"#4ade80":h.current>30?"#fbbf24":"#f87171",r.font="bold 14px 'JetBrains Mono', monospace",r.textAlign="center",r.fillText(`${h.current} FPS`,50,30),c.current=requestAnimationFrame(y)};return r.useEffect(()=>(c.current=requestAnimationFrame(y),()=>{c.current&&cancelAnimationFrame(c.current)}),[t,s,i]),e.jsx("canvas",{ref:o,width:n,height:a,className:"max-w-full max-h-full rounded-lg shadow-2xl",style:{imageRendering:"auto"}})},k=n.memo(({level:t})=>{const s=(e,s)=>((e,s)=>0===e||0===s||e===t.width-1||s===t.height-1)(e,s)&&t.grid[s][e]!==m,l=(e,s)=>0===e?"linear-gradient(to right, rgba(255,255,255,0.15), transparent)":e===t.width-1?"linear-gradient(to left, rgba(255,255,255,0.15), transparent)":0===s?"linear-gradient(to bottom, rgba(255,255,255,0.15), transparent)":s===t.height-1?"linear-gradient(to top, rgba(255,255,255,0.15), transparent)":"none";return e.jsx(e.Fragment,{children:t.grid.map((r,i)=>r.map((r,n)=>{const a=i>0&&t.grid[i-1][n]===m,o=i<t.height-1&&t.grid[i+1][n]===m,c=n>0&&t.grid[i][n-1]===m,d=n<t.width-1&&t.grid[i][n+1]===m;return e.jsxs("div",{className:"absolute flex items-center justify-center",style:{width:"var(--tile-size)",height:"var(--tile-size)",left:"calc(var(--tile-size) * "+n+")",top:"calc(var(--tile-size) * "+i+")",zIndex:1},children:[r===m&&e.jsx("div",{className:"w-full h-full bg-background-primary shadow-inner",style:{borderTop:a?"none":"1px solid rgb(15, 23, 42)",borderBottom:o?"none":"1px solid rgb(15, 23, 42)",borderLeft:c?"none":"1px solid rgb(15, 23, 42)",borderRight:d?"none":"1px solid rgb(15, 23, 42)"}}),s(n,i)&&e.jsx("div",{className:"absolute inset-0 z-0",style:{background:l(n,i)}}),r===f&&e.jsxs("div",{className:"relative w-8 h-8 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-400 rounded-sm rotate-45 animate-pulse opacity-40 blur-[2px]"}),e.jsx("div",{className:"w-4 h-4 rounded-sm bg-blue-300 rotate-45 border border-white/50"})]})]},`static-${n}-${i}`)}))})}),N=n.memo(({pos:t,color:s,isMe:r,shakeDirection:i})=>{const n="left"===i?-15:"right"===i?15:0,a="up"===i?-15:"down"===i?15:0;return e.jsx(l.div,{className:"absolute flex items-center justify-center z-50 pointer-events-none",initial:!1,animate:{left:`calc(var(--tile-size) * ${t.x})`,top:`calc(var(--tile-size) * ${t.y})`,x:i?[0,n,0,n/2,0]:0,y:i?[0,a,0,a/2,0]:0},transition:{duration:v/1e3,ease:[.16,1,.3,1],x:i?{duration:.2,times:[0,.2,.4,.6,1]}:{duration:v/1e3},y:i?{duration:.2,times:[0,.2,.4,.6,1]}:{duration:v/1e3}},style:{width:"var(--tile-size)",height:"var(--tile-size)"},children:e.jsxs("div",{className:"w-[85%] h-[85%] rounded-lg border-2 shadow-[0_0_30px_rgba(59,130,246,0.6)] flex flex-col items-center justify-center relative group",style:{backgroundColor:s,borderColor:r?"#93c5fd":"#86efac",boxShadow:`0 0 30px ${s}66`},children:[e.jsxs("div",{className:"flex gap-2 mb-1",children:[e.jsx("div",{className:"w-2.5 h-3.5 bg-white rounded-full shadow-sm animate-bounce",style:{animationDelay:"0s"}}),e.jsx("div",{className:"w-2.5 h-3.5 bg-white rounded-full shadow-sm animate-bounce",style:{animationDelay:"0.1s"}})]}),e.jsx("div",{className:"w-full h-2 bg-black/20 absolute bottom-0 rounded-b-lg"}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-transparent via-white/5 to-white/10"})]})})}),I=n.memo(({levelId:t,state:s,currentUserId:l,depth:i=0,blockedInfo:n=null})=>{const a=s.levels[t];if(!a)return null;if(i>1)return e.jsx("div",{className:"w-full h-full",style:{backgroundColor:a.color}});const o=0===i?8:2,c=r.useMemo(()=>{const e=[];return a.grid.forEach((t,s)=>t.forEach((t,l)=>{if(t===p){const t=a.boxContents?.[`${l},${s}`];e.push({x:l,y:s,id:t||`solid-${l}-${s}`,innerLevelId:t})}})),e},[a.grid,a.boxContents]);return e.jsx("div",{className:"relative flex items-center justify-center pointer-events-none select-none",children:e.jsxs("div",{className:"relative overflow-hidden",style:{width:`calc(var(--tile-size) * ${a.width})`,height:`calc(var(--tile-size) * ${a.height})`,backgroundColor:a.color,boxSizing:"content-box",border:`${o}px solid ${0===i?"#1e293b":"rgba(255,255,255,0.3)"}`,boxShadow:0===i?"0 25px 50px -12px rgba(0, 0, 0, 0.8)":"none"},children:[e.jsx(k,{level:a}),c.map(t=>{const r=t.innerLevelId?t.innerLevelId.split("#")[0]:null,n=r?s.levels[r]:null;return e.jsx("div",{className:"absolute flex items-center justify-center p-[2px] transition-all",style:{width:"var(--tile-size)",height:"var(--tile-size)",left:`calc(var(--tile-size) * ${t.x})`,top:`calc(var(--tile-size) * ${t.y})`,zIndex:10},children:e.jsx("div",{className:"w-full h-full transition-transform duration-150 ease-out transform active:scale-95",children:n?e.jsx("div",{className:"w-full h-full border-4 border-slate-400/50 shadow-lg overflow-hidden flex items-center justify-center bg-black/20",style:{borderRadius:"4px"},children:e.jsx("div",{style:{width:`calc(var(--tile-size) * ${n.width})`,height:`calc(var(--tile-size) * ${n.height})`,transform:`scale(${.9/Math.max(n.width,n.height)})`,transformOrigin:"center center"},children:e.jsx(I,{levelId:r,state:s,currentUserId:l,depth:i+1})})}):e.jsxs("div",{className:"w-[85%] h-[85%] bg-slate-600 rounded-md border-2 border-slate-500 shadow-lg flex items-center justify-center overflow-hidden",children:[e.jsx("div",{className:"w-[70%] h-[70%] border-2 border-slate-700/50 rounded-sm bg-slate-700/30"}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-white/10 to-transparent pointer-events-none"})]})})},t.id)}),Object.values(s.players).map(s=>s.currentLevelId!==t?null:e.jsx(N,{pos:s.pos,color:s.id===l?"#3b82f6":"#22c55e",isMe:s.id===l,shakeDirection:s.id===l?n?.direction:null},s.id))]})})}),z=({game:n})=>{const m=n,[f]=w(m),p=m.userId,v=p?f.players[p]:null,[j,k]=r.useState({width:window.innerWidth,height:window.innerHeight});r.useEffect(()=>{const e=()=>{k({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[N,z]=r.useState(null),[S,C]=r.useState(null),[R,E]=r.useState("dom"),[M,P]=r.useState(!1),{ti:T,ts:$}=t(),L=v?.currentLevelId||"root";r.useEffect(()=>{C(null)},[L]);const A=S||L,O=e=>{if(!v)return;const t=v.levelStack;if("out"===e){const e=t.findIndex(e=>e.levelId===A);A===L?t.length>0&&C(t[t.length-1].levelId):e>0&&C(t[e-1].levelId)}else{const e=t.findIndex(e=>e.levelId===A);-1!==e&&e<t.length-1?C(t[e+1].levelId):e===t.length-1&&C(null)}},D=e=>{p&&(m.checkBlockedMove(p,e)&&(z({direction:e,time:Date.now()}),setTimeout(()=>z(null),200)),m.makeAction({type:"MOVE",direction:e,playerId:p}))};r.useEffect(()=>{const e=e=>{let t=null;"ArrowUp"!==e.key&&"w"!==e.key||(t="up"),"ArrowDown"!==e.key&&"s"!==e.key||(t="down"),"ArrowLeft"!==e.key&&"a"!==e.key||(t="left"),"ArrowRight"!==e.key&&"d"!==e.key||(t="right"),t&&(D(t),e.preventDefault())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[p,m,D]);const B=r.useRef(0),U=v?.levelStack.length||0,W=r.useMemo(()=>U>B.current?"enter":U<B.current?"exit":"none",[U]);r.useEffect(()=>{B.current=U},[U]);const F=f.levels[A],q=r.useMemo(()=>{if(!F)return g;const e=F.width,t=F.height,s=.9*j.width/e,l=.6*j.height/t;return Math.min(s,l,g)},[F,j]);return f.levels.root?e.jsxs("div",{className:"w-full bg-background-primary flex flex-col font-sans overflow-hidden text-white",style:{"--tile-size":`${q}px`},children:[e.jsxs("div",{className:"flex-none p-4 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-black tracking-tighter italic uppercase drop-shadow-lg",children:e.jsxs("span",{className:"text-blue-500",children:["Para",e.jsx("span",{className:"text-white",children:"b"}),"ox"]})}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[v?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"bg-slate-800/80 px-2.5 py-1 rounded-lg text-[10px] text-slate-300 border border-slate-700 font-bold uppercase tracking-widest shadow-lg hidden md:inline-block",children:"WASD to Move"}),e.jsx("span",{className:"bg-slate-800/80 px-2.5 py-1 rounded-lg text-[10px] text-slate-300 border border-slate-700 font-bold uppercase tracking-widest shadow-lg",children:"Co-op Mode"})]}):e.jsx("span",{className:"bg-blue-600/80 px-2.5 py-1 rounded-lg text-[10px] text-white border border-blue-500 font-bold uppercase tracking-widest shadow-lg",children:"Spectator Mode"}),e.jsx("button",{onClick:()=>E("dom"===R?"canvas":"dom"),className:"bg-purple-600/80 hover:bg-purple-500 px-2.5 py-1 rounded-lg text-[10px] text-white border border-purple-500 font-bold uppercase tracking-widest shadow-lg transition-colors",children:"dom"===R?"Switch to Canvas":"Switch to DOM"})]})]}),e.jsx("div",{className:"hidden sm:block text-slate-500 text-[10px] md:text-xs italic max-w-xs opacity-50",children:"Push boxes into goals. Boxes can contain other boxes... or even themselves! Paradoxes are encouraged."})]}),e.jsx("div",{className:"flex-1 relative flex items-center justify-center overflow-hidden",children:"dom"===R?e.jsx(s,{mode:"popLayout",initial:!1,children:e.jsx(l.div,{initial:"enter"===W?{opacity:0,scale:.5}:"exit"===W?{opacity:0,scale:1.5}:{opacity:0,scale:1},animate:{opacity:1,scale:1},exit:"enter"===W?{opacity:0,scale:1.5}:{opacity:0,scale:.5},transition:{duration:.45,ease:[.15,0,0,1]},style:{willChange:"transform, opacity"},children:e.jsx(I,{levelId:A,state:f,currentUserId:p,depth:0,blockedInfo:N})},A)}):e.jsx(y,{state:f,displayedLevelId:A,currentUserId:p,tileSize:q,width:j.width,height:.7*j.height})}),e.jsxs("div",{className:"p-4 flex flex-col md:flex-row items-center justify-center gap-6",children:[v&&v.levelStack.length>0&&e.jsxs("div",{className:"flex gap-2 p-2 bg-slate-900/40 rounded-2xl border border-white/5 backdrop-blur-sm shadow-2xl",children:[e.jsx("button",{onClick:()=>O("out"),disabled:A===(v.levelStack[0]?.levelId||"root"),className:"w-12 h-12 bg-slate-800/90 rounded-xl flex items-center justify-center border border-slate-700 active:bg-blue-600 active:scale-90 transition-all shadow-lg text-slate-300 disabled:opacity-30 disabled:pointer-events-none",title:"Zoom Out",children:e.jsx(a,{size:22})}),e.jsx("button",{onClick:()=>O("in"),disabled:A===L,className:"w-12 h-12 bg-slate-800/90 rounded-xl flex items-center justify-center border border-slate-700 active:bg-blue-600 active:scale-90 transition-all shadow-lg text-slate-300 disabled:opacity-30 disabled:pointer-events-none",title:"Zoom In",children:e.jsx(o,{size:22})})]}),v&&e.jsx("div",{className:"flex flex-col items-start",children:e.jsxs("div",{className:"grid grid-cols-3 gap-1 p-2 bg-slate-900/40 rounded-2xl border border-white/5 backdrop-blur-sm shadow-2xl origin-bottom-left",children:[e.jsx("div",{}),e.jsx("button",{onClick:()=>D("up"),className:"w-12 h-12 bg-slate-800/90 rounded-xl flex items-center justify-center border border-slate-700 active:bg-blue-600 active:scale-90 transition-all shadow-lg text-slate-300",children:e.jsx(c,{size:24})}),e.jsx("div",{}),e.jsx("button",{onClick:()=>D("left"),className:"w-12 h-12 bg-slate-800/90 rounded-xl flex items-center justify-center border border-slate-700 active:bg-blue-600 active:scale-90 transition-all shadow-lg text-slate-300",children:e.jsx(d,{size:24})}),e.jsx("button",{onClick:()=>D("down"),className:"w-12 h-12 bg-slate-800/90 rounded-xl flex items-center justify-center border border-slate-700 active:bg-blue-600 active:scale-90 transition-all shadow-lg text-slate-300",children:e.jsx(h,{size:24})}),e.jsx("button",{onClick:()=>D("right"),className:"w-12 h-12 bg-slate-800/90 rounded-xl flex items-center justify-center border border-slate-700 active:bg-blue-600 active:scale-90 transition-all shadow-lg text-slate-300",children:e.jsx(u,{size:24})})]})}),m.isHost&&e.jsx("button",{onClick:()=>m.makeAction({type:"RESET",playerId:p}),className:"group relative px-5 py-2.5 bg-red-600 hover:bg-red-500 text-white rounded-xl border-b-4 border-red-800 active:border-b-0 active:translate-y-1 transition-all",children:e.jsx("span",{className:"text-xs font-black tracking-widest uppercase",children:"Reset"})})]}),M&&i.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/80 glass-blur z-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between p-4 pr-2",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(x,{className:"w-6 h-6 text-yellow-500"}),T({en:"Game Rules: Parabox",vi:"Luật Chơi: Parabox"})]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:e.jsx(b,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 space-y-4 text-slate-300 leading-relaxed max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4 text-slate-300 leading-relaxed",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400",children:T({en:"Objective",vi:"Mục tiêu"})}),e.jsx("p",{children:T({en:"Push all boxes into the blue goal squares to win.",vi:"Đẩy tất cả các khối vào các ô mục tiêu màu xanh để giành chiến thắng."})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:T({en:"Recursive World",vi:"Thế Giới Đệ Quy"})}),e.jsx("p",{children:T({en:"Boxes are not just obstacles—they are worlds! Pushing a box into another box enters it.",vi:"Các khối không chỉ là vật cản—chúng là cả một thế giới! Đẩy một khối vào khối khác để đi vào trong."})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:T({en:"Paradoxes",vi:"Nghịch Lý"})}),e.jsx("p",{children:T({en:"You can even push a level into itself to create infinite recursive loops. Paradoxes are highly encouraged!",vi:"Bạn thậm chí có thể đẩy một màn chơi vào chính nó để tạo ra các vòng lặp đệ quy vô tận. Sự nghịch lý luôn được khuyến khích!"})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:T({en:"Controls",vi:"Điều Khiển"})}),e.jsxs("ul",{className:"list-disc pl-4",children:[e.jsx("li",{children:T({en:"WASD or Arrow keys to move.",vi:"Các phím WASD hoặc Mũi tên để di chuyển."})}),e.jsx("li",{children:T({en:"Zoom In/Out buttons to control the camera.",vi:"Nút Phóng to/Thu nhỏ để điều khiển camera."})})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:T({en:"Co-op",vi:"Phối hợp"})}),e.jsxs("ul",{className:"list-disc pl-4",children:[e.jsx("li",{children:T({en:"The more players, the more fun.",vi:"Càng nhiều người chơi, game càng vui."})}),e.jsx("li",{children:T({en:"Players can push boxes together.",vi:"Người chơi có thể đẩy các khối cùng nhau."})})]})]})]})})]})}),document.body),e.jsx("button",{onClick:()=>P(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:$({en:"Rules",vi:"Luật chơi"}),children:e.jsx(x,{size:24})})]}):e.jsxs("div",{className:"w-full h-full bg-background-primary flex flex-col items-center justify-center font-sans text-white",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),e.jsx("p",{className:"text-xl font-bold tracking-widest uppercase opacity-50",children:"Syncing with Host..."})]})};export{z as default};
