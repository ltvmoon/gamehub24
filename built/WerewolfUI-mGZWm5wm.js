import{b as e,u as s,j as t,a,c as n}from"./index-Di-nc6fj.js";import{c as i,V as l,aD as r,aE as o,aF as c,a5 as d,aG as h,aj as x,X as m,z as u,am as g,at as p,A as f,aH as v,I as j,J as b,aI as w,K as y,M as N,aJ as k,aB as S,aK as C,R,af as T,U as I,w as P,aL as A,ah as M,b as B,$ as q,aM as V,x as E,y as L,Z as G,aN as $,aO as H,aP as W}from"./react-vendor-CVGOeHNa.js";import"./BaseGame-bOx6xEpu.js";import{a as D,Q as z,D as U}from"./types-CsNQcsE1.js";import"./socket-DRbsQkF5.js";import"./zustand-D55yBrsf.js";const K=e=>{switch(e){case"night":return t.jsx(N,{className:"w-5 h-5"});case"morning":return t.jsx(c,{className:"w-5 h-5"});case"discussion":return t.jsx(y,{className:"w-5 h-5"});case"voting":return t.jsx(o,{className:"w-5 h-5"});case"elimination":case"hunterRevenge":return t.jsx(w,{className:"w-5 h-5"});default:return t.jsx(b,{className:"w-5 h-5"})}},O=({endTime:e,isPaused:s,pausedTimeRemaining:a})=>{const[n,l]=i.useState(0);if(i.useEffect(()=>{if(s&&null!=a)return void l(Math.max(0,Math.floor(a/1e3)));if(!e)return;const t=()=>l(Math.max(0,Math.floor((e-Date.now())/1e3)));t();const n=setInterval(t,1e3);return()=>clearInterval(n)},[e,s,a]),!e&&!a)return null;const r=Math.floor(n/60),o=n%60;return t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full text-lg font-bold font-mono transition-colors "+(s?"bg-yellow-500/30 text-yellow-400":n<=15?"bg-red-500/30 text-red-400 animate-bounce":"bg-white/15 text-white"),children:[s?t.jsx(g,{className:"w-5 h-5"}):t.jsx(k,{className:"w-5 h-5"}),r,":",o.toString().padStart(2,"0")]})},F=({state:e,currentUserId:a})=>{const{ti:n}=s(),l=i.useMemo(()=>{const s={};e.logs.forEach(e=>{s[e.day]||(s[e.day]=[]),s[e.day].push({type:"log",data:e})}),e.chatMessages.forEach(e=>{const t=e.day||1;s[t]||(s[t]=[]),s[t].push({type:"chat",data:e})});const t=e.players.find(e=>e.id===a);return t?.history&&t.history.forEach(e=>{s[e.day]||(s[e.day]=[]),s[e.day].push({type:"log",data:{id:e.id,message:e.content,type:e.type,timestamp:e.timestamp,day:e.day}})}),Object.keys(s).forEach(e=>{const t=Number(e);s[t].sort((e,s)=>s.data.timestamp-e.data.timestamp)}),s},[e.logs,e.chatMessages,e.players,a]),r=Object.keys(l).map(Number).sort((e,s)=>s-e);return 0===e.logs.length&&0===e.chatMessages.length?null:t.jsx("div",{className:"h-full overflow-y-auto pb-16 px-2 pt-0",children:r.map(e=>{const s=l[e],a=[];return s.forEach(e=>{const s=a[a.length-1];"chat"===e.type&&"chat"===s?.type&&s.data[0].playerName===e.data.playerName?s.data.push(e.data):"chat"===e.type?a.push({type:"chat",data:[e.data]}):a.push(e)}),t.jsxs("div",{className:"mb-4 relative",children:[t.jsxs("div",{className:"sticky top-0 z-10 py-1.5 bg-slate-900/95 backdrop-blur border-b border-white/10 mb-2 flex items-center gap-2",children:[t.jsx("div",{className:"p-1 rounded bg-blue-500/20 text-blue-400",children:0===e?t.jsx(f,{className:"w-4 h-4"}):t.jsx(v,{className:"w-4 h-4"})}),t.jsx("span",{className:"font-bold text-blue-100",children:n(0===e?{vi:"Báº¯t Ä‘áº§u game",en:"Start game"}:{vi:`NgÃ y ${e}`,en:`Day ${e}`})})]}),t.jsx("div",{className:"ml-2 pl-4 border-l-2 border-white/10 space-y-1",children:a.map((e,s)=>{if("chat"===e.type){const a=e.data,n=a[0];return t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full border-2 border-slate-900 bg-blue-500"}),t.jsxs("div",{className:"bg-white/5 rounded-lg ml-1 overflow-hidden",children:[t.jsx("div",{className:"px-2 py-1 bg-white/5 border-b border-white/5 flex items-center justify-between",children:t.jsx("span",{className:"text-blue-400 font-bold text-xs",children:n.playerName})}),t.jsx("div",{className:"p-1 space-y-0.5",children:a.map(e=>t.jsx("div",{className:"px-2 py-1 hover:bg-white/5 rounded transition-colors",children:t.jsxs("div",{className:"flex justify-between items-baseline gap-2",children:[t.jsx("p",{className:"text-sm text-white/90 wrap-break-word leading-tight flex-1",children:e.content}),t.jsx("span",{className:"text-[10px] text-white/40 shrink-0",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id))})]})]},`chat-group-${s}`)}const a=e.data;let i=j,l="text-gray-400 bg-gray-500/10",r="border-gray-500/20";return"death"===a.type?(i=w,l="text-red-400 bg-red-500/10",r="border-red-500/20"):"vote"===a.type&&(i=W,l="text-orange-400 bg-orange-500/10",r="border-orange-500/20"),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute -left-[21px] top-1 w-2.5 h-2.5 rounded-full border-2 border-slate-900 "+("death"===a.type?"bg-red-500":"vote"===a.type?"bg-orange-500":"bg-gray-500")}),t.jsxs("div",{className:`p-2 rounded-lg border flex flex-col gap-1 ${r} ${l}`,children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(i,{className:"w-4 h-4 mt-0.5 shrink-0"}),t.jsx("p",{className:"text-sm leading-tight text-white/90",children:n(a.message)})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("span",{className:"text-[10px] text-white/40",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})})]})]},a.id)})})]},e)})})},Y=({player:e,onClose:n})=>{const{ti:i}=s(),l=a(e=>e.userId)===e.id;return t.jsx("div",{className:"fixed inset-0 z-100 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between bg-slate-900",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-linear-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold text-base",children:e.username.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-sm",children:e.username}),t.jsx("p",{className:"text-[10px] text-white/60",children:i({vi:"Lá»‹ch sá»­ hoáº¡t Ä‘á»™ng",en:"Activity History"})})]})]}),t.jsx("button",{onClick:n,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:t.jsx(m,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:0===e.history.length?t.jsx("div",{className:"text-center text-white/40 py-8 italic text-xs",children:i({vi:"ChÆ°a cÃ³ hoáº¡t Ä‘á»™ng nÃ o",en:"No activity recorded"})}):[...e.history].filter(e=>!e.isSecret||l).reverse().map(e=>t.jsxs("div",{className:"relative pl-3 border-l border-white/10 py-0.5",children:[t.jsx("div",{className:"absolute -left-[5px] top-3 w-2.5 h-2.5 rounded-full bg-slate-600 border-2 border-slate-800"}),t.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-0.5",children:[t.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded uppercase font-bold "+("chat"===e.type?"bg-blue-500/20 text-blue-400":"vote"===e.type?"bg-orange-500/20 text-orange-400":"action"===e.type?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"),children:[e.type," ",e.isSecret&&i({vi:"(bÃ­ máº­t)",en:"(secret)"})]}),t.jsxs("span",{className:"text-[10px] text-white/40",children:[i({vi:`NgÃ y ${e.day}`,en:`Day ${e.day}`})," ","â€¢"," ",new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),t.jsx("p",{className:"text-sm text-white/90 leading-tight",children:i(e.content)})]})]},e.id))})]})})},X=({players:e,hoveredPlayerId:s,suspicionMarkers:a,votes:n,playerRefs:l})=>{const[r,o]=i.useState([]);return i.useEffect(()=>{if(!s)return void o([]);const e=()=>{const e=[],t=l.current.get(s)?.parentElement?.getBoundingClientRect();if(!t)return;const i=e=>{const s=l.current.get(e);if(!s)return null;const a=s.getBoundingClientRect();return{x:a.left+a.width/2-t.left,y:a.top+a.height/2-t.top}};i(s)&&(a.forEach(t=>{if(t.fromPlayerId===s||t.toPlayerId===s){const s=i(t.fromPlayerId),a=i(t.toPlayerId);s&&a&&e.push({x1:s.x,y1:s.y,x2:a.x,y2:a.y,color:"#fb923c",moving:!0})}}),n.forEach(t=>{const a=t.playerId||t.voterId,n=t.targetId;if(a===s||n===s){const s=i(a),t=i(n);s&&t&&e.push({x1:s.x,y1:s.y,x2:t.x,y2:t.y,color:"#ef4444",moving:!1})}}),o(e))};e();const t=setInterval(e,100);return()=>{clearInterval(t)}},[s,e,a,n]),s&&0!==r.length?t.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-10 overflow-visible",children:[r.map((e,s)=>t.jsxs(R.Fragment,{children:[t.jsx("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:e.color,strokeWidth:"2",strokeDasharray:e.moving?"5,5":"none",className:e.moving?"animate-[dash_0.3s_linear_infinite]":"",markerEnd:`url(#arrowhead-${e.color.replace("#","")})`}),t.jsx("circle",{cx:e.x1,cy:e.y1,r:"3",fill:e.color})]},s)),t.jsxs("defs",{children:[t.jsx("marker",{id:"arrowhead-fb923c",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:t.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#fb923c"})}),t.jsx("marker",{id:"arrowhead-ef4444",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:t.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ef4444"})})]}),t.jsx("style",{children:"\n        @keyframes dash {\n          to {\n            stroke-dashoffset: -10;\n          }\n        }\n      "})]}):null},J=({player:e,isMe:a,isSelected:n,canSelect:i,showRole:l,suspicionCount:r,voteCount:c,phase:d,isWolfTarget:h,isProtected:x,onViewHistory:m,onClick:u,innerRef:g,onMouseEnter:p,onMouseLeave:f})=>{const{ti:v,ts:j}=s(),b=e.role?D[e.role]:null,y=!e.isAlive;return t.jsxs("div",{ref:g,onMouseEnter:p,onMouseLeave:f,onTouchStart:p,onTouchEnd:f,onTouchCancel:f,className:"relative group/card",children:[t.jsxs("button",{onClick:u,disabled:!i,className:`relative flex flex-col items-center p-2 rounded-xl transition-all w-[100px] min-h-[120px] border border-slate-700 ${y?"opacity-80":"bg-white/5"} ${n?"ring-2 ring-yellow-400 bg-yellow-400/20":i?" hover:bg-white/10":""} ${i?"cursor-pointer":"cursor-default"} ${a?"ring-2 ring-blue-400":""}`,children:[t.jsxs("div",{className:"relative w-12 h-12 rounded-full flex items-center justify-center text-xl "+(y?"bg-gray-700":"bg-linear-to-br from-green-500 to-blue-500"),children:[(l||a)&&b?b.icon:e.isBot?t.jsx(T,{className:"w-5 h-5"}):t.jsx(I,{className:"w-5 h-5"}),y&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full hover:opacity-10 transition-opacity",children:t.jsx(w,{className:"w-6 h-6 text-red-400"})})]}),t.jsxs("span",{className:"mt-1 text-xs font-medium max-w-full text-center flex items-center justify-center",children:[e.username,a&&t.jsx(P,{className:"w-4 h-4 text-blue-400 ml-1 inline"})]}),(l||a)&&b&&t.jsx("span",{className:"text-xs mt-0.5 px-1.5 py-0.5 rounded-full max-w-full",style:{backgroundColor:b.color+"30",color:b.color},children:v(b.name)}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-1 mt-1",children:[e.loverId&&t.jsxs("span",{className:"text-[10px] bg-pink-500/30 text-pink-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(C,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"Cáº·p Ä‘Ã´i",en:"Lover"})})]}),x&&t.jsxs("span",{className:"text-[10px] bg-green-500/30 text-green-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(A,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"ÄÆ°á»£c báº£o vá»‡",en:"Protected"})})]}),h&&t.jsxs("span",{className:"text-[10px] bg-red-500/30 text-red-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(M,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[100px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"Má»¥c tiÃªu cá»§a sÃ³i",en:"Wolf target"})})]}),r>0&&t.jsxs("span",{className:"text-[10px] bg-red-500/30 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(B,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"Bá»‹ nghi ngá»",en:"Suspicion"})}),r]}),c>0&&t.jsxs("span",{className:"text-[10px] bg-orange-500/30 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(o,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[80px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"Sá»‘ phiáº¿u",en:"Vote count"})}),c]}),e.hasVoted&&"voting"===d&&t.jsxs("span",{className:"text-[10px] bg-green-500/30 text-green-400 px-1.5 py-0.5 rounded flex items-center gap-1",children:[t.jsx(q,{className:"w-3 h-3"}),t.jsx("span",{className:"max-w-0 overflow-hidden opacity-0 group-hover/card:max-w-[60px] group-hover/card:opacity-100 transition-all duration-300 ease-out whitespace-nowrap",children:v({vi:"ÄÃ£ vote",en:"Voted"})})]})]})]}),e.history.length>0&&t.jsx("button",{onClick:e=>{m?.(),e.stopPropagation()},className:"absolute -top-1 -right-1 p-1 bg-slate-600/80 rounded-full hover:bg-slate-500 transition-colors flex items-center justify-center w-6 h-6",title:j({vi:"Xem lá»‹ch sá»­",en:"View history"}),children:t.jsx("span",{className:"text-xs text-white/70",children:e.history.filter(e=>!e.isSecret).length})})]})},_=({state:e,currentUserId:s,selectedTargetIds:a,onPlayerClick:n,canSelectPlayer:l,showRoles:r=!1})=>{const[o,c]=i.useState(null),[d,h]=i.useState(null),x=i.useRef(new Map),m=e.players.filter(e=>null!==e.id),u=e.players.find(e=>e.id===s),g="wolf"===u?.role,p=s=>"night"===e.phase&&g?e.nightActions.wolfVotes.filter(e=>e.targetId===s).length:"voting"===e.phase||"hunterRevenge"===e.phase?e.eliminationVotes.filter(e=>e.targetId===s).length:0,f=i.useMemo(()=>{let s=[];return"night"===e.phase&&g?s=[...e.nightActions.wolfVotes]:"voting"!==e.phase&&"hunterRevenge"!==e.phase||(s=[...e.eliminationVotes]),s},[e.phase,e.nightActions.wolfVotes,e.eliminationVotes,g]);return t.jsxs("div",{className:"relative flex flex-wrap justify-center gap-1 @md:gap-2 @md:p-2",children:[t.jsx(X,{players:m,hoveredPlayerId:d,suspicionMarkers:e.suspicionMarkers,votes:f,playerRefs:x}),o&&t.jsx(Y,{player:o,onClose:()=>c(null)}),m.map(i=>{const o=!!l&&l(i),d=a.includes(i.id),m=g&&e.nightActions.wolfTarget===i.id,f=e.nightActions.bodyguardTarget===i.id&&("bodyguard"===u?.role||"end"===e.phase);return t.jsx(J,{player:i,isMe:i.id===s,isSelected:d,canSelect:o,showRole:r||"end"===e.phase||e.config.revealRolesOnDeath&&!i.isAlive||g&&"wolf"===i.role||"seer"===u?.role&&u.history.some(e=>"info"===e.type&&e.content.en.startsWith("Seer Result:")&&e.content.en.includes(i.username)),suspicionCount:(v=i.id,e.suspicionMarkers.filter(e=>e.toPlayerId===v).length),voteCount:p(i.id),phase:e.phase,isWolfTarget:m,isProtected:f,onViewHistory:()=>{c(i)},onClick:()=>o&&i.id&&n?.(i.id),innerRef:e=>{e&&i.id?x.current.set(i.id,e):i.id&&x.current.delete(i.id)},onMouseEnter:()=>i.id&&h(i.id),onMouseLeave:()=>h(null)},i.id);var v})]})},Q=({game:e,state:l,currentUserId:r,isHost:o})=>{const{ti:c}=s(),d=a(e=>e.username),h=n(e=>e.currentRoom),x=h?.players.some(e=>e.id===r),[g,p]=i.useState(""),f=l.players.findIndex(e=>e.id===r),v=l.players.filter(e=>null!==e.id).length;return t.jsxs("div",{className:"flex flex-col h-full items-center",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsxs("h2",{className:"text-xl font-bold flex items-center justify-center gap-2",children:[t.jsx(N,{className:"w-6 h-6"})," ",c({vi:"Ma SÃ³i Online",en:"Werewolf Online"})]}),t.jsxs("p",{className:"text-white/60 text-sm pt-2",style:{color:v<l.minPlayers?"#ee5555":"white"},children:[c({vi:"Chá» ngÆ°á»i chÆ¡i...",en:"Waiting for players..."})," (",v,"/",l.minPlayers," ",c({vi:"tá»‘i thiá»ƒu",en:"minimum"}),")"]})]}),t.jsx("div",{className:"flex flex-wrap justify-center gap-1 @md:gap-2 mb-4",children:l.players.slice(0,12).map((s,a)=>t.jsx("div",{className:"p-2 rounded-xl flex flex-col items-center justify-center w-[100px] min-h-[120px] "+(s.id?"bg-white/10":"bg-white/5 border-2 border-dashed border-white/20"),children:s.id?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-linear-to-br from-purple-500 to-pink-500 flex items-center justify-center text-xl",children:s.isBot?t.jsx(T,{className:"w-5 h-5"}):t.jsx(I,{className:"w-5 h-5"})}),t.jsx("p",{className:"text-sm mt-1 truncate",children:s.username}),o&&s.id!==r&&t.jsxs("button",{onClick:()=>s.isBot?e.requestRemoveBot(a):e.requestLeaveSlot(a),className:"text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30 px-2 py-1 rounded-lg mt-1 flex items-center justify-center gap-1",children:[t.jsx(m,{className:"w-3 h-3"})," ",c({vi:"XÃ³a",en:"Remove"})]})]}):t.jsx("div",{className:"py-2",children:-1===f?x?t.jsxs("button",{onClick:()=>e.requestJoinSlot(a,d||`Guest ${Date.now().toString().slice(-4)}`),className:"text-xs bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 px-3 py-1.5 rounded-lg flex items-center justify-center gap-1",children:[t.jsx(I,{className:"w-3 h-3 inline"})," ",c({vi:"Tham gia",en:"Join"})]}):t.jsx("span",{className:"text-xs text-white/40",children:c({vi:"KhÃ¡ch",en:"Spectator"})}):o?t.jsxs("button",{onClick:()=>e.requestAddBot(a),className:"text-xs bg-green-500/20 text-green-400 hover:bg-green-500/30 px-3 py-1.5 rounded-lg flex items-center justify-center gap-1",children:[t.jsx(T,{className:"w-3 h-3"})," ",c({vi:"ThÃªm Bot",en:"Add Bot"})]}):t.jsx("span",{className:"text-xs text-white/40",children:c({vi:"Trá»‘ng",en:"Empty"})})})},a))}),o&&t.jsxs("div",{className:"w-full max-w-[300px] flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-white/5 p-2 rounded-lg",children:[t.jsx("label",{className:"text-xs text-white/60 whitespace-nowrap",children:c({vi:"Chá»n vai trÃ²:",en:"Select Role:"})}),t.jsxs("select",{value:g,onChange:e=>p(e.target.value),className:"flex-1 bg-white/10 text-white text-sm rounded outline-none p-1 border border-white/10",children:[t.jsx("option",{value:"",children:c({vi:"Ngáº«u nhiÃªn",en:"Random"})}),Object.keys(D).map(e=>t.jsxs("option",{value:e,children:[D[e]?.icon," ",c(D[e]?.name)]},e))]})]}),t.jsxs("button",{onClick:()=>e.requestStartGame(""===g?void 0:g),disabled:!e.canStartGame(),className:"w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 "+(e.canStartGame()?"bg-linear-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:[t.jsx(u,{className:"w-5 h-5"})," ",c({vi:"Báº¯t Ä‘áº§u game",en:"Start game"})]})]})]})},Z=({game:e,state:a,currentUserId:n,selectedTarget:l,secondSelectedTarget:r})=>{const{ti:o}=s(),[c,d]=i.useState(!1),[h,x]=i.useState(!1),m=a.players.find(e=>e.id===n),u=m?.role,g=u===a.nightSubPhase||"wolf"===u&&"wolf"===a.nightSubPhase,p=u?D[u]:null,f="witch"===u&&n?a.witchPotions[n]:null,v=a.nightActions.wolfTarget?a.players.find(e=>e.id===a.nightActions.wolfTarget):null,j=a.players.find(e=>e.id===l);if(!m)return t.jsx("div",{className:"flex flex-col items-center justify-center h-full text-white/50 pt-10",children:o({vi:"Báº¡n lÃ  khÃ¡ch, khÃ´ng thá»ƒ tham gia hÃ nh Ä‘á»™ng",en:"You are a guest, you cannot participate in actions"})});if(!m?.isAlive)return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/50",children:[t.jsx(w,{className:"w-16 h-16 mb-4"}),t.jsxs("p",{children:[o({vi:"Báº¡n Ä‘Ã£ cháº¿t",en:"You are dead"}),"."," ",o({vi:"Äang chá» Ä‘Ãªm káº¿t thÃºc...",en:"Waiting for night to end..."})]})]});if(!p?.hasNightAction||!g){const e="seer"===u?m.history.find(e=>"info"===e.type&&e.day===a.day):null;return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(N,{className:"w-16 h-16 text-indigo-400 mb-4 animate-pulse"}),t.jsxs("p",{className:"text-white/70 flex items-center justify-center gap-2",children:[t.jsx(N,{className:"w-4 h-4"})," ",o({vi:"LÃ ng Ä‘ang ngá»§",en:"Village is sleeping"})]}),t.jsxs("p",{className:"text-white/50 text-sm mt-2",children:[o({vi:"Chá» cÃ¡c vai trÃ² khÃ¡c hÃ nh Ä‘á»™ng",en:"Waiting for other roles to act"}),"..."]}),e&&t.jsxs("div",{className:"mt-6 p-4 bg-indigo-500/20 rounded-xl border border-indigo-500/50 max-w-xs",children:[t.jsxs("p",{className:"text-indigo-300 font-bold mb-1 flex items-center justify-center gap-2",children:[t.jsx($,{className:"w-4 h-4"}),o({vi:"Káº¿t quáº£ soi:",en:"Seer Result:"})]}),t.jsx("p",{className:"text-white font-medium text-center",children:o(e.content)})]})]})}return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("span",{className:"text-3xl",children:p.icon}),t.jsx("h3",{className:"text-lg font-bold",style:{color:p.color},children:o(p.name)}),t.jsx("p",{className:"text-sm text-white/60",children:o(p.nightActionDescription)}),l&&t.jsxs("p",{className:"text-sm mt-2 text-yellow-400 flex items-center justify-center gap-1",children:[t.jsx(M,{className:"w-4 h-4"})," ",a.players.find(e=>e.id===l)?.username,r&&t.jsxs("span",{children:[" ","&"," ",a.players.find(e=>e.id===r)?.username]})]})]}),"witch"===u&&f&&t.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[a.nightActions.wolfTarget&&t.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg text-center mb-1",children:t.jsxs("p",{className:"text-sm text-red-200",children:[o({vi:"Náº¡n nhÃ¢n Ä‘Ãªm nay:",en:"Tonight's victim:"})," ",t.jsx("span",{className:"font-bold",children:v?.username})]})}),t.jsxs("div",{className:"flex gap-2",children:[f.hasHealPotion&&a.nightActions.wolfTarget&&t.jsxs("button",{onClick:()=>{d(!c),c||x(!1)},className:"flex-1 p-3 rounded-xl flex flex-col items-center transition-all "+(c?"bg-green-500/30 ring-2 ring-green-400":"bg-white/10 hover:bg-white/30"),children:[t.jsx(H,{className:"w-6 h-6 text-green-400"}),t.jsxs("span",{className:"text-xs mt-1",children:[o({vi:"Cá»©u náº¡n nhÃ¢n",en:"Heal victim"}),":"," ",v?.username]})]}),f.hasKillPotion&&t.jsxs("button",{onClick:()=>{x(!h),h||d(!1)},disabled:!l,className:"flex-1 p-3 rounded-xl flex flex-col items-center transition-all "+(h?"bg-red-500/30 ring-2 ring-red-400":l?"bg-white/10 hover:bg-white/30":"bg-slate-500/10 cursor-not-allowed"),children:[t.jsx(w,{className:"w-6 h-6 text-red-400"}),t.jsxs("span",{className:"text-xs mt-1",children:[o({vi:"Giáº¿t ngÆ°á»i Ä‘Æ°á»£c chá»n",en:"Kill selected"}),":"," ",j?.username||o({vi:"[ChÆ°a chá»n]",en:"[Please select]"})]})]})]})]}),t.jsxs("button",{onClick:()=>{u&&("cupid"===u&&l&&r?e.requestNightAction(u,l,!1,!1,r):"witch"===u?e.requestNightAction(u,h?l:null,c,h,void 0):l&&e.requestNightAction(u,l,!1,!1,void 0))},disabled:"cupid"===u?!l||!r:"witch"!==u&&!l,className:"w-full py-3 rounded-xl font-bold bg-linear-to-r from-indigo-500 to-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(q,{className:"w-5 h-5 inline mr-2"}),o({vi:"XÃ¡c nháº­n",en:"Confirm"})]})]})},ee=({game:e,state:a,currentUserId:n,selectedTarget:l})=>{const[r,o]=i.useState(""),[c,d]=i.useState(!1),{ti:h,ts:x}=s(),m=a.players.find(e=>e.id===n),u=a.players.find(e=>e.id===l),g=()=>{r.trim()&&m?.isAlive&&(e.requestSendMessage(r.trim(),"text"),o(""))},p=a.suspicionMarkers.some(e=>e.fromPlayerId===n&&e.toPlayerId===l);return t.jsxs("div",{className:"flex flex-col h-full p-2",children:[l&&t.jsxs("div",{className:"text-center mb-2 text-sm text-yellow-400 flex items-center justify-center gap-1",children:[t.jsx(V,{className:"w-4 h-4"})," ",h({vi:"Äang chá»n:",en:"Selected:"})," ",a.players.find(e=>e.id===l)?.username]}),l&&m?.isAlive&&t.jsxs("button",{onClick:()=>e.requestAddSuspicion(l),className:"w-full mb-2 py-2 rounded-lg text-sm transition-colors "+(p?"bg-gray-500/20 text-gray-400 hover:bg-gray-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"),children:[t.jsx(j,{className:"w-4 h-4 inline mr-1"}),h(p?{vi:"Bá» nghi ngá»",en:"Unsuspect"}:{vi:"Nghi ngá»",en:"Suspect"})," ",u?.username]}),t.jsxs("button",{onClick:()=>d(!c),className:"flex items-center justify-between w-full p-2 bg-white/5 rounded-lg mb-2 text-sm",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(y,{className:"w-4 h-4"})," ",h({vi:"Tin nháº¯n nhanh",en:"Quick messages"})]}),c?t.jsx(E,{className:"w-4 h-4"}):t.jsx(L,{className:"w-4 h-4"})]}),c&&t.jsx("div",{className:"grid grid-cols-2 @md:grid-cols-4 gap-2 mb-2",children:z.map(s=>t.jsxs("button",{onClick:()=>(s=>{if(!m?.isAlive)return;if(s.targetRequired&&!l)return;const t=s.targetRequired&&l?x(s.text).replace("{target}",a.players.find(e=>e.id===l)?.username||""):x(s.text);e.requestSendMessage(t,"quick",l||void 0,s.id)})(s),disabled:s.targetRequired&&!l,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm text-left flex items-center gap-2 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:[t.jsx("span",{className:"text-lg",children:s.icon}),t.jsx("span",{className:"",children:s.targetRequired?x(s.text).replace("{target}",l?a.players.find(e=>e.id===l)?.username||"...":x({vi:"[chá»n ngÆ°á»i]",en:"[select]"})):x(s.text)})]},s.id))}),t.jsx("div",{className:"flex-1 overflow-auto bg-black/20 rounded-lg p-2 mb-2 min-h-[100px] max-h-[200px]",children:a.chatMessages.slice(-20).map(e=>t.jsxs("div",{className:"mb-1 text-sm text-left",children:[t.jsxs("span",{className:"font-medium text-blue-400",children:[e.playerName,":"]})," ",t.jsx("span",{className:"text-white/80",children:e.content})]},e.id))}),m?.isAlive&&(m.messagesRemaining||0)>0&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:r,onChange:e=>o(e.target.value.slice(0,100)),onKeyDown:e=>"Enter"===e.key&&g(),placeholder:x({vi:`Nháº­p tin nháº¯n... (${m.messagesRemaining}/${U.chatLimit})`,en:`Type message... (${m.messagesRemaining}/${U.chatLimit})`}),className:"flex-1 bg-white/10 rounded-lg px-3 py-2 text-sm outline-none"}),t.jsx("button",{onClick:g,className:"p-2 bg-blue-500 rounded-lg",children:t.jsx(G,{className:"w-5 h-5"})})]})]})},se=({game:e,state:a,currentUserId:n,selectedTarget:i})=>{const{ti:l}=s(),r=a.players.find(e=>e.id===n),c="hunterRevenge"===a.phase,d=c&&"hunter"===r?.role&&a.pendingElimination===r.id;if(c&&!d)return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(M,{className:"w-16 h-16 text-red-500 mb-4 animate-pulse"}),t.jsx("p",{className:"text-white/70 text-center",children:l({vi:"Thá»£ sÄƒn Ä‘ang tÃ¬m má»¥c tiÃªu...",en:"Hunter is choosing a target..."})})]});if(r?.hasVoted){const e=a.eliminationVotes?.find(e=>e.voterId===n),s=e?.targetId?a.players.find(s=>s.id===e.targetId):null;return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(q,{className:"w-16 h-16 text-green-400 mb-4"}),t.jsx("p",{className:"text-white/70",children:l(c?{vi:"ÄÃ£ báº¯n!",en:"Shot fired!"}:{vi:"ÄÃ£ bÃ¬nh chá»n! Äang chá» ngÆ°á»i khÃ¡c...",en:"Voted! Waiting for others..."})}),s&&!c&&t.jsx("p",{className:"text-yellow-400 mt-2 text-sm font-medium",children:l({vi:`Báº¡n Ä‘Ã£ chá»n: ${s.username}`,en:`You voted for: ${s.username}`})})]})}return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"text-center mb-4",children:[c?t.jsx(M,{className:"w-10 h-10 mx-auto text-red-500 mb-2"}):t.jsx(o,{className:"w-10 h-10 mx-auto text-orange-400 mb-2"}),t.jsx("h3",{className:"text-lg font-bold",children:l(c?{vi:"KÃ©o ai Ä‘i cÃ¹ng?",en:"Who to take with you?"}:{vi:"BÃ¬nh chá»n loáº¡i ai?",en:"Who do you vote?"})}),i&&t.jsxs("p",{className:"text-sm mt-2 text-yellow-400 flex items-center justify-center gap-1",children:[t.jsx(M,{className:"w-4 h-4"})," ",a.players.find(e=>e.id===i)?.username]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{c?e.requestHunterShoot(""):e.requestCastVote(null)},className:"flex-1 py-3 bg-gray-600 rounded-xl font-bold",children:l({vi:"Bá» qua",en:"Skip"})}),t.jsx("button",{onClick:()=>{c?i&&e.requestHunterShoot(i):i&&e.requestCastVote(i)},disabled:!i,className:"flex-1 py-3 rounded-xl font-bold disabled:opacity-50 "+(c?"bg-linear-to-r from-red-600 to-red-800":"bg-linear-to-r from-orange-500 to-red-500"),children:l(c?{vi:"Báº¯n!",en:"Shoot!"}:{vi:"BÃ¬nh chá»n",en:"Vote"})})]})]})},te=({game:e,state:a,showResetButton:n})=>{const{ts:i}=s(),l="wolf"===a.winner?i({vi:"Ma SÃ³i tháº¯ng!",en:"Wolf wins!"}):"village"===a.winner?i({vi:"DÃ¢n LÃ ng tháº¯ng!",en:"Village wins!"}):i({vi:"TÃ¬nh NhÃ¢n tháº¯ng!",en:"Lover wins!"}),r="wolf"===a.winner?w:"village"===a.winner?S:C;return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsxs("h2",{className:"text-xl font-bold flex items-center justify-center gap-2",children:[t.jsx(r,{className:"w-8 h-8"})," ",l]}),n&&t.jsxs("button",{onClick:()=>e.requestResetGame(),className:"mt-4 px-6 py-3 bg-linear-to-r from-green-500 to-emerald-500 rounded-xl font-bold flex items-center gap-2",children:[t.jsx(d,{className:"w-5 h-5"})," ChÆ¡i láº¡i"]})]})},ae=({game:a,currentUserId:n=""})=>{const{confirm:f}=e(),{ti:v,ts:j}=s(),b=a,[w,y]=i.useState(b.getState()),[N,k]=i.useState(!1),[S,C]=i.useState(!1),[R,T]=i.useState(null),[I,P]=i.useState(null),[A,M]=i.useState(!1),B=i.useRef(null);i.useEffect(()=>{const e=new IntersectionObserver(([e])=>{M(!e.isIntersecting&&e.boundingClientRect.top<0)},{threshold:0});return B.current&&e.observe(B.current),()=>e.disconnect()},[w.isGameStarted]);const[q,V]=i.useState(""),[E,L]=i.useState(null),G=w.players.find(e=>e.id===n),$=G?.role?D[G.role]:null;i.useEffect(()=>b.onUpdate(y),[b]),i.useEffect(()=>{T(null),P(null)},[w.phase,w.nightSubPhase]),i.useEffect(()=>{const e=(e=>{switch(e){case"setup":return"bg-linear-to-b from-slate-900 to-slate-800";case"night":return"bg-linear-to-b from-slate-950 to-indigo-950";case"voting":return"bg-linear-to-b from-orange-950 to-blue-800";case"elimination":return"bg-linear-to-b from-red-950 to-brown-800";default:return"bg-linear-to-b from-slate-800 to-slate-700"}})(w.phase);""===q?V(e):e!==q&&e!==E&&L(e)},[w.phase]);const H=e=>{return t.jsx("div",{className:(e?"fixed top-0 left-0 right-0 z-100 bg-slate-900/95 backdrop-blur-md border-b border-white/10 py-2 animate-in slide-in-from-top duration-300 shadow-2xl":"mb-3")+" flex justify-center w-full",children:t.jsxs("div",{className:"flex justify-between w-full max-w-[450px] "+(e?"px-4":"bg-slate-900/60 backdrop-blur-md p-2 px-4 rounded-xl border border-white/10 shadow-lg"),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[K(w.phase),t.jsxs("div",{className:"flex flex-col @md:flex-row @md:items-center @md:gap-2",children:[t.jsx("span",{className:"font-bold",children:v((s=w.phase,{setup:{en:"Setup",vi:"Thiáº¿t láº­p"},night:{en:"Night",vi:"ÄÃªm"},morning:{en:"Morning",vi:"SÃ¡ng"},discussion:{en:"Discussion",vi:"Tháº£o luáº­n"},voting:{en:"Voting",vi:"BÃ¬nh chá»n"},elimination:{en:"Elimination",vi:"Loáº¡i bá»"},hunterRevenge:{en:"Hunter's Revenge",vi:"Thá»£ SÄƒn tráº£ thÃ¹"},end:{en:"Game Over",vi:"Káº¿t thÃºc"}}[s]||s))}),w.day>0&&t.jsxs("span",{className:"text-white/60 text-sm",children:[v({vi:"NgÃ y",en:"Day"})," ",w.day]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:["end"!==w.phase?t.jsx(O,{endTime:w.phaseEndTime,isPaused:w.isPaused,pausedTimeRemaining:w.pausedTimeRemaining}):t.jsx(te,{game:b,state:w,showResetButton:!1}),b.isHost&&"end"!==w.phase&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>w.isPaused?b.requestResumeGame():b.requestPauseGame(),className:"p-2 rounded-full transition-colors "+(w.isPaused?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-white/10 text-white/60 hover:bg-white/20"),title:w.isPaused?"Resume":"Pause",children:w.isPaused?t.jsx(u,{className:"w-5 h-5"}):t.jsx(g,{className:"w-5 h-5"})}),t.jsx("button",{onClick:async()=>{await f(j({vi:"Äáº¿m ngÆ°á»£c sáº½ Ä‘Æ°á»£c Ä‘áº·t vá» 5 giÃ¢y",en:"The countdown will be reset to 5 seconds"}),j({vi:"TÄƒng tá»‘c giai Ä‘oáº¡n?",en:"Skip phase?"}))&&b.requestSkipPhase()},className:"p-2 rounded-full transition-colors bg-white/10 text-white/60 hover:bg-white/20",title:"Skip",children:t.jsx(p,{className:"w-5 h-5"})})]})]})]})});var s};return t.jsxs("div",{className:`relative flex flex-col h-full ${q} rounded-lg text-white overflow-hidden`,children:[E&&t.jsx("div",{className:`absolute inset-0 ${E} animate-slide-in z-0`,onAnimationEnd:()=>{V(E),L(null)}}),t.jsxs("div",{className:"relative z-10 flex flex-col h-full w-full pb-20 overflow-y-auto min-h-[500px] pt-2",children:["night"===w.phase?t.jsx(r,{className:"w-16 h-16 text-white absolute top-4 left-4 z-[-1]"}):"voting"==w.phase?t.jsx(o,{className:"w-16 h-16 text-yellow-500 absolute top-4 left-4 z-[-1]"}):"setup"!=w.phase?t.jsx(c,{className:"w-16 h-16 text-yellow-500 absolute top-4 left-4 z-[-1]"}):null,t.jsx("div",{className:"flex items-center gap-2 w-full justify-center",children:b.isHost&&w.isGameStarted&&t.jsxs("button",{onClick:async()=>{await f(j({vi:"Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n chÆ¡i láº¡i vÃ¡n nÃ y?",en:"Are you sure you want to reset this game?"}),j({vi:"ChÆ¡i láº¡i",en:"Play again"}))&&b.requestResetGame()},className:"p-2 bg-slate-500/20 text-slate-400 hover:bg-slate-500/30 rounded-lg text-xs flex items-center gap-1",children:[t.jsx(d,{className:"w-3 h-3"})," ",v({vi:"VÃ¡n má»›i",en:"New Game"})]})}),w.isGameStarted&&$&&t.jsx("div",{className:"flex flex-col items-center justify-center gap-4 mb-3 py-2",children:t.jsxs("div",{className:"px-4 py-2 rounded-xl flex flex-col items-center gap-2",style:{backgroundColor:$.color+"30",border:`2px solid ${$.color}`},children:[t.jsx("span",{className:"text-sm text-white/60",children:v({en:"You are",vi:"Báº¡n lÃ :"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:$.icon}),t.jsx("span",{className:"font-bold text-lg",style:{color:$.color},children:v($.name)})]}),t.jsx("span",{className:"text-sm text-white/60",children:v($.description)})]})}),w.isGameStarted&&t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:B,className:"w-full h-px -mt-2 pointer-events-none"}),A&&l.createPortal(H(!0),document.body),H(!1)]}),w.isGameStarted&&"setup"!==w.phase&&t.jsx(_,{state:w,currentUserId:n,selectedTargetIds:[R,I],showRoles:"end"===w.phase,canSelectPlayer:e=>{const s=w.players.find(e=>e.id===n),t="hunterRevenge"===w.phase&&"hunter"===s?.role&&w.pendingElimination===s.id;return!(!s?.isAlive&&!t)&&(!(!e.isAlive&&"night"!==w.phase)&&("night"===w.phase?"cupid"===s?.role?e.isAlive:"seer"===s?.role?e.id!==n&&e.isAlive:"bodyguard"===s?.role?e.isAlive&&e.id!==w.nightActions.lastBodyguardTarget:("wolf"===s?.role||"witch"===s?.role)&&e.isAlive:("discussion"===w.phase||"voting"===w.phase||"hunterRevenge"===w.phase)&&(("voting"!==w.phase&&"hunterRevenge"!==w.phase||!s?.hasVoted)&&(e.isAlive&&e.id!==n))))},onPlayerClick:e=>{const s=w.players.find(e=>e.id===n);"night"===w.phase&&"cupid"===s?.role?R?R===e?T(null):I?I===e&&P(null):P(e):T(e):T(R===e?null:e)}}),t.jsx("div",{className:"flex-1",children:(()=>{switch(w.phase){case"setup":return t.jsx(Q,{game:b,state:w,currentUserId:n,isHost:b.isHost});case"night":return t.jsx(Z,{game:b,state:w,currentUserId:n,selectedTarget:R,secondSelectedTarget:I});case"morning":case"elimination":return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(c,{className:"w-16 h-16 text-yellow-400 mb-4"}),w.logs.slice(-3).map(e=>t.jsx("p",{className:"text-center mb-2",children:v(e.message)},e.id)),"morning"===w.phase&&"seer"===G?.role&&w.nightResult?.seerCheck&&t.jsxs("div",{className:"mt-4 p-4 bg-indigo-500/20 rounded-xl border border-indigo-500/50",children:[t.jsx("p",{className:"text-center text-indigo-300 font-bold mb-1",children:v({vi:"Káº¿t quáº£ soi:",en:"Seer Result:"})}),t.jsxs("p",{className:"text-center",children:[t.jsx("span",{className:"font-bold text-white",children:w.players.find(e=>e.id===w.nightResult?.seerCheck?.targetId)?.username})," ",w.nightResult.seerCheck.isWolf?t.jsx("span",{className:"text-red-400 font-bold",children:v({vi:"lÃ  MA SÃ“I!",en:"is a WEREWOLF!"})}):t.jsx("span",{className:"text-green-400 font-bold",children:v({vi:"lÃ  DÃ¢n LÃ ng",en:"is a Villager"})})]})]})]});case"discussion":return t.jsx(ee,{game:b,state:w,currentUserId:n,selectedTarget:R});case"voting":case"hunterRevenge":return t.jsx(se,{game:b,state:w,currentUserId:n,selectedTarget:R});case"end":return t.jsx(te,{game:b,state:w,showResetButton:b.isHost});default:return null}})()})]}),w.isGameStarted&&t.jsx("button",{onClick:()=>C(!0),className:"fixed bottom-4 left-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-blue-400 transition-colors z-40 shadow-lg border border-slate-500",title:j({en:"History",vi:"Lá»‹ch sá»­"}),children:t.jsx(h,{size:24})}),S&&t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl max-w-lg w-full h-[80vh] max-h-[90%] overflow-hidden shadow-2xl flex flex-col",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between bg-slate-900",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-linear-to-br from-blue-500 to-cyan-500 flex items-center justify-center font-bold text-base",children:t.jsx(h,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-sm",children:v({en:"Game History",vi:"Lá»‹ch sá»­ vÃ¡n Ä‘áº¥u"})}),t.jsx("p",{className:"text-[10px] text-white/60",children:v({vi:"Nháº­t kÃ½ trÃ² chÆ¡i",en:"Game Log"})})]})]}),t.jsx("button",{onClick:()=>C(!1),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:t.jsx(m,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex-1 overflow-hidden p-2",children:t.jsx(F,{state:w,currentUserId:n})})]})}),t.jsx("button",{onClick:()=>k(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:j({en:"Game Rules",vi:"Luáº­t chÆ¡i"}),children:t.jsx(x,{size:24})}),N&&l.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full max-h-[80vh] overflow-y-auto shadow-2xl relative",children:[t.jsx("button",{onClick:()=>k(!1),className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(m,{className:"w-5 h-5"})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(x,{className:"w-6 h-6 text-yellow-500"}),v({en:"Werewolf Rules",vi:"Luáº­t Ma SÃ³i"})]}),t.jsxs("div",{className:"space-y-4 text-slate-300 leading-relaxed",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:v({en:"Objective",vi:"Má»¥c tiÃªu"})}),t.jsxs("ul",{className:"list-disc pl-4 text-sm",children:[t.jsxs("li",{children:[t.jsxs("strong",{className:"text-red-400",children:["ğŸº ",v({en:"Werewolves",vi:"Ma SÃ³i"})]}),":"," ",v({en:"Kill villagers until wolves equal villagers.",vi:"Giáº¿t dÃ¢n lÃ ng cho Ä‘áº¿n khi sá»‘ sÃ³i báº±ng sá»‘ dÃ¢n."})]}),t.jsxs("li",{children:[t.jsxs("strong",{className:"text-blue-400",children:["ğŸ‘¤ ",v({en:"Villagers",vi:"DÃ¢n LÃ ng"})]}),":"," ",v({en:"Find and eliminate all wolves.",vi:"TÃ¬m vÃ  loáº¡i bá» táº¥t cáº£ ma sÃ³i."})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:v({en:"Roles",vi:"Vai TrÃ²"})}),t.jsxs("ul",{className:"list-disc pl-4 text-sm",children:[t.jsxs("li",{children:[t.jsxs("strong",{children:["ğŸ”® ",v({en:"Seer",vi:"TiÃªn Tri"})]}),":"," ",v({en:"Check one player's role each night.",vi:"Soi vai trÃ² cá»§a má»™t ngÆ°á»i chÆ¡i má»—i Ä‘Ãªm."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["ğŸ›¡ï¸ ",v({en:"Bodyguard",vi:"Báº£o Vá»‡"})]}),":"," ",v({en:"Protect one player from wolves each night.",vi:"Báº£o vá»‡ má»™t ngÆ°á»i khá»i sÃ³i má»—i Ä‘Ãªm."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["ğŸ§™ ",v({en:"Witch",vi:"PhÃ¹ Thá»§y"})]}),":"," ",v({en:"Has one healing potion and one killing potion.",vi:"CÃ³ má»™t bÃ¬nh thuá»‘c cá»©u vÃ  má»™t bÃ¬nh thuá»‘c Ä‘á»™c."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["ğŸ¹ ",v({en:"Hunter",vi:"Thá»£ SÄƒn"})]}),":"," ",v({en:"Can shoot one person when dying.",vi:"CÃ³ thá»ƒ báº¯n má»™t ngÆ°á»i khi cháº¿t."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["ğŸ’˜ ",v({en:"Cupid",vi:"Tháº§n TÃ¬nh YÃªu"})]}),":"," ",v({en:"Links two lovers. If one dies, the other follows.",vi:"Káº¿t Ä‘Ã´i hai ngÆ°á»i. Náº¿u má»™t ngÆ°á»i cháº¿t, ngÆ°á»i kia cháº¿t theo."})]})]})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:v({en:"Phases",vi:"Giai Äoáº¡n"})}),t.jsxs("ul",{className:"list-disc pl-4 text-sm",children:[t.jsxs("li",{children:[t.jsxs("strong",{children:["ğŸŒ™ ",v({en:"Night",vi:"ÄÃªm"})]}),":"," ",v({en:"Special roles wake up and perform actions.",vi:"CÃ¡c vai trÃ² Ä‘áº·c biá»‡t thá»©c dáº­y vÃ  hÃ nh Ä‘á»™ng."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["â˜€ï¸ ",v({en:"Morning",vi:"SÃ¡ng"})]}),":"," ",v({en:"Announce who died last night.",vi:"ThÃ´ng bÃ¡o ai Ä‘Ã£ cháº¿t Ä‘Ãªm qua."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["ğŸ’¬ ",v({en:"Discussion",vi:"Tháº£o Luáº­n"})]}),":"," ",v({en:"Players discuss to find the wolves.",vi:"NgÆ°á»i chÆ¡i tháº£o luáº­n Ä‘á»ƒ tÃ¬m ra sÃ³i."})]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["ğŸ‘ ",v({en:"Voting",vi:"BÃ¬nh Chá»n"})]}),":"," ",v({en:"Vote to eliminate one suspect.",vi:"BÃ¬nh chá»n Ä‘á»ƒ treo cá»• má»™t káº» tÃ¬nh nghi."})]})]})]})]})]})]})}),document.body)]})};export{ae as default};
