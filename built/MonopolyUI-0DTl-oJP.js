import{b as e,u as t,S as s,j as n,h as l}from"./index-DeW22Zn2.js";import{b as r,c as a,i,aX as o,aY as d,aJ as c,ar as x,aZ as h,a_ as u,a9 as m,t as p,D as g,X as b}from"./react-vendor-BeKtp5AY.js";import"./BaseGame-DNUNIW8N.js";import{G as f,B as y,c as v,b as j,C as N,a as w,L as T,T as C,e as R}from"./types-DRtpISWp.js";import{u as I}from"./useGameState-BSMNmzbB.js";import{u as P}from"./usePrevious-CWyMgkdp.js";import"./socket-DRbsQkF5.js";import"./zustand-C88HNARu.js";const k=e=>e&&R[e]||"";function A({game:R,currentUserId:A=""}){const L=R,{confirm:S}=e(),[E,O]=r.useState(()=>Object.values(L.snapshot.logs||{}).sort((e,t)=>e.timestamp-t.timestamp)),{ti:B,ts:Y}=t(),[D,G]=r.useState(!1),[$,H]=r.useState(L.snapshot.diceValues||[1,1]),[M,q]=r.useState(null),[U,_]=r.useState(!0),[V,z]=r.useState(!1),[K,F]=r.useState([]),[J,W]=r.useState(null),[X,Z]=r.useState(""),[Q,ee]=r.useState({}),[te,se]=r.useState(null),ne=r.useRef(!1),le=r.useRef(L.snapshot.diceValues),re=r.useRef(L.snapshot),ae=r.useRef({}),ie=r.useCallback((e,t)=>{re.current=e;const s=e.diceValues;if(s&&(!le.current||s[0]!==le.current[0]||s[1]!==le.current[1])&&!ne.current){ne.current=!0,le.current=s,G(!0);let e=0;const n=setInterval(()=>{if(H([Math.floor(6*Math.random())+1,Math.floor(6*Math.random())+1]),e++,e>8){clearInterval(n);const e=re.current;H(e.diceValues||s),G(!1),ne.current=!1,t(e);const l={};e.players.forEach(e=>{e.id&&(l[e.id]=e.position)}),ae.current=l}},80)}else if(!ne.current){t(e),e.diceValues&&H(e.diceValues),le.current=e.diceValues||void 0;const s={};e.players.forEach(e=>{e.id&&(s[e.id]=e.position)}),ae.current=s}O(t=>{const s=e.logs||{},n=Object.values(s);if(0===Object.keys(s).length&&e.gamePhase===f.WAITING)return[];const l=new Set(t.map(e=>e.id)),r=n.filter(e=>!l.has(e.id));return 0===r.length?t:[...t,...r].sort((e,t)=>e.timestamp-t.timestamp)})},[]),[oe]=I(L,ie),de=oe.currentPlayerIndex===L.getMyPlayerIndex()&&oe.gamePhase===f.PLAYING;P(oe.currentPlayerIndex,(e,t)=>{oe.gamePhase===f.PLAYING&&null!==e&&s.playTurnSwitch(de)});const[ce,xe]=r.useState("fit"),[he,ue]=r.useState(null),[me,pe]=r.useState(null),ge=r.useRef(null);r.useEffect(()=>{let e;const t=()=>{const s=M?M.id:he,n=M?"monopoly-property-detail-modal":`monopoly-property-item-${s}`;if(null===s||!ge.current)return void pe(null);const l=document.getElementById(`monopoly-board-space-${s}`),r=document.getElementById(n),a=ge.current;if(l&&r&&a){const s=l.getBoundingClientRect(),n=r.getBoundingClientRect(),i=a.getBoundingClientRect();pe({x1:n.left-i.left+n.width/2,y1:n.top-i.top+n.height/2,x2:s.left-i.left+s.width/2,y2:s.top-i.top+s.height/2}),e=requestAnimationFrame(t)}else pe(null)};return null!==he||null!==M?t():pe(null),()=>{e&&cancelAnimationFrame(e)}},[he,M]);const be=L.getMyPlayerIndex(),fe=oe.players[oe.currentPlayerIndex],ye=L.isHost,ve=de&&(!oe.hasRolled||oe.canRollAgain)&&!oe.pendingAction&&!D,je=e=>e>=0&&e<=10?{row:10,col:10-e,rotation:0}:e>=11&&e<=19?{row:10-(e-10),col:0,rotation:90}:e>=20&&e<=30?{row:0,col:e-20,rotation:180}:{row:e-30,col:10,rotation:270},Ne=(e,t="w-12 h-12")=>{const s={"top-left":"top-1 left-1","top-right":"top-1 right-1","middle-left":"top-1/2 left-1 -translate-y-1/2","middle-right":"top-1/2 right-1 -translate-y-1/2",center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","bottom-left":"bottom-1 left-1","bottom-right":"bottom-1 right-1"};return n.jsx("div",{className:`relative ${t} bg-white rounded-lg shadow-lg border-2 border-gray-300`,style:{animation:D?"bounce-dice 0.3s ease-in-out infinite":void 0},children:({1:["center"],2:["top-right","bottom-left"],3:["top-right","center","bottom-left"],4:["top-left","top-right","bottom-left","bottom-right"],5:["top-left","top-right","center","bottom-left","bottom-right"],6:["top-left","top-right","middle-left","middle-right","bottom-left","bottom-right"]}[e]||[]).map((e,t)=>n.jsx("div",{className:`absolute w-2 h-2 bg-gray-800 rounded-full ${s[e]}`},t))})},we=e=>0===e.length?n.jsx("p",{className:"text-gray-400 text-xs italic pl-1",children:B({en:"No properties",vi:"ChÆ°a cÃ³ tÃ i sáº£n"})}):n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.map(e=>{const t=y[e.spaceId];return t?n.jsxs("div",{id:`monopoly-property-item-${t.id}`,onMouseEnter:()=>ue(t.id),onMouseLeave:()=>ue(null),className:"flex items-center gap-1.5 text-[10px] font-medium text-white px-2 py-1 rounded-md cursor-pointer transition-colors border border-slate-600/50 shadow-sm "+(he===t.id?"bg-slate-600 ring-2 ring-yellow-400":"bg-slate-800/80 hover:bg-slate-700"),onClick:e=>{e.stopPropagation(),q(t)},children:[n.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm",style:{backgroundColor:t.type===v.PROPERTY&&t.color?k(t.color):"#666"}}),n.jsx("span",{className:"truncate max-w-[80px]",children:B(t.name)}),e.houses>0&&n.jsx("span",{className:"text-yellow-400 text-[9px] ml-0.5",children:5===e.houses?"ğŸ¨":`ğŸ ${e.houses}`}),e.mortgaged&&n.jsx(x,{className:"w-2.5 h-2.5 text-red-400 ml-0.5"})]},e.spaceId):null})}),Te=({data:e,color:t,width:s=100,height:l=30})=>{if(!e||e.length<2)return null;const r=Math.min(...e),a=Math.max(...e)-r||1,i=l-4,o=s,d=e.map((t,s)=>`${s/(e.length-1)*o},${l-2-(t-r)/a*i}`).join(" ");return n.jsx("svg",{width:"100%",height:l,viewBox:`0 0 ${s} ${l}`,preserveAspectRatio:"none",className:"overflow-visible mt-1",children:n.jsx("polyline",{fill:"none",stroke:t,strokeWidth:"2",points:d,vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round"})})},Ce=()=>{if(!oe.pendingAction)return null;let e=0;if("BUY_DECISION"===oe.pendingAction.type){const t=y[oe.pendingAction.spaceId];!t||t.type!==v.PROPERTY&&t.type!==v.RAILROAD&&t.type!==v.UTILITY||(e=t.price)}else"PAY_RENT"!==oe.pendingAction.type&&"PAY_TAX"!==oe.pendingAction.type||(e=oe.pendingAction.amount);return e>(fe?.money||0)?n.jsxs("div",{className:"bg-red-900/50 border border-red-500 rounded p-2 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"text-xl",children:"âš ï¸"}),n.jsxs("p",{className:"text-red-200 text-xs text-left",children:[n.jsx("strong",{className:"block text-red-100",children:B({en:"Insufficient Funds!",vi:"KhÃ´ng Ä‘á»§ tiá»n!"})}),B({en:"Proceeding will result in BANKRUPTCY and LOSS.",vi:"Thá»±c hiá»‡n hÃ nh Ä‘á»™ng nÃ y sáº½ dáº«n Ä‘áº¿n PHÃ Sáº¢N vÃ  THUA."}),n.jsx("br",{}),B({en:"Sell or mortgage assets to get money.",vi:"HÃ£y bÃ¡n hoáº·c tháº¿ cháº¥p tÃ i sáº£n Ä‘á»ƒ cÃ³ tiá»n."})]})]}):null},Re=()=>n.jsxs("div",{className:"mb-8",children:[n.jsxs("h3",{className:"text-lg font-bold text-orange-400 mb-4 border-b border-orange-400/30 pb-2",children:[B({en:"Chance Cards",vi:"Tháº» CÆ¡ Há»™i"})," (?)"]}),n.jsx("div",{className:"grid grid-cols-1 @md:grid-cols-3 gap-1",children:N.map(e=>n.jsxs("div",{className:"bg-slate-700 border-l-2 border-orange-500 p-2 rounded text-xs flex flex-col justify-between h-full",children:[n.jsx("p",{className:"text-white font-medium",children:B(e.text)}),n.jsx("p",{className:"text-[10px] text-gray-400 uppercase",children:e.action.type.replace(/_/g," ")})]},e.id))})]}),Ie=()=>n.jsxs("div",{className:"mb-4",children:[n.jsxs("h3",{className:"text-lg font-bold text-yellow-400 mb-4 border-b border-yellow-400/30 pb-2",children:[B({en:"Community Chest Cards",vi:"Tháº» KhÃ­ Váº­n"})," (chest)"]}),n.jsx("div",{className:"grid grid-cols-1 @md:grid-cols-3 gap-1",children:w.map(e=>n.jsxs("div",{className:"bg-slate-700 border-l-2 border-yellow-500 p-2 rounded text-xs flex flex-col justify-between h-full",children:[n.jsx("p",{className:"text-white font-medium",children:B(e.text)}),n.jsx("p",{className:"text-[10px] text-gray-400 uppercase",children:e.action.type.replace(/_/g," ")})]},e.id))})]});return n.jsxs("div",{className:"relative flex flex-col @md:flex-row gap-2 p-0 w-full max-w-6xl mx-auto pb-16! @md:pb-0",ref:ge,children:[(()=>{const e=oe.tradeOffers?.filter(e=>!K.includes(e.id)&&(e.toPlayerId===A||e.fromPlayerId===A&&(e.status===C.PENDING||e.status===C.DECLINED)));return e&&0!==e.length?n.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 flex flex-col gap-2 w-full max-w-sm px-4",children:e.map(e=>{const t=e.fromPlayerId===A,s=oe.players.find(s=>s.id===(t?e.toPlayerId:e.fromPlayerId)),l=y[e.propertyId],r=oe.properties.find(t=>t.spaceId===e.propertyId),a=r?.ownerId===e.fromPlayerId;let i=B({en:"TRADE OFFER",vi:"Lá»œI Má»œI GIAO Dá»ŠCH"}),o="",d="text-yellow-400";return e.status===C.DECLINED?(i=B({en:"TRADE DECLINED",vi:"GIAO Dá»ŠCH Bá»Š Tá»ª CHá»I"}),d="text-red-400",o=`${s?.username} ${B({en:"declined your offer.",vi:"Ä‘Ã£ tá»« chá»‘i Ä‘á» nghá»‹ cá»§a báº¡n."})}`):o=t?a?`${B({en:"You offered to sell",vi:"Báº¡n Ä‘á» nghá»‹ bÃ¡n"})} ${B(l?.name)} ${B({en:"to",vi:"cho"})} ${s?.username}`:`${B({en:"You offered to buy",vi:"Báº¡n Ä‘á» nghá»‹ mua"})} ${B(l?.name)} ${B({en:"from",vi:"tá»«"})} ${s?.username}`:a?`${s?.username} ${B({en:"offers to sell",vi:"muá»‘n bÃ¡n"})} ${B(l?.name)} ${B({en:"to you",vi:"cho báº¡n"})}`:`${s?.username} ${B({en:"offers to buy",vi:"muá»‘n mua"})} ${B(l?.name)} ${B({en:"from you",vi:"tá»« báº¡n"})}`,n.jsxs("div",{className:"border-2 rounded-lg p-3 shadow-xl animate-in slide-in-from-top duration-300 "+(e.status===C.DECLINED?"bg-slate-800 border-red-500":"bg-slate-800 border-yellow-500"),children:[n.jsx("h4",{className:`font-bold text-sm text-center mb-1 ${d}`,children:i}),n.jsx("p",{className:"text-white text-xs text-center mb-2",children:o}),e.status===C.DECLINED&&e.responseMessage&&n.jsx("div",{className:"bg-red-900/50 p-2 rounded mb-2 border border-red-700/50",children:n.jsxs("p",{className:"text-red-200 text-xs text-center italic",children:['"',B(e.responseMessage),'"']})}),e.status!==C.DECLINED&&n.jsxs("p",{className:"text-center text-green-400 font-mono font-bold mb-3",children:[e.price.toLocaleString(),"Ä‘"]}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[J!==e.id&&e.status===C.PENDING&&!t&&n.jsx("button",{onClick:()=>L.requestRespondTrade(e.id,!0),className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white rounded-lg text-xs font-bold shadow-md hover:scale-105 transition-transform",children:B({en:"ACCEPT",vi:"Äá»’NG Ã"})}),e.status===C.DECLINED?n.jsx("button",{onClick:()=>F(t=>[...t,e.id]),className:"px-3 py-1 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-xs font-medium",children:B({en:"Dismiss",vi:"ÄÃ³ng"})}):J===e.id?n.jsxs("div",{className:"flex flex-col gap-2 w-full animate-in slide-in-from-bottom-2 fade-in",children:[n.jsx("input",{autoFocus:!0,type:"text",value:X,onChange:e=>Z(e.target.value),placeholder:B({en:"Reason (optional)...",vi:"LÃ½ do (tÃ¹y chá»n)..."}),className:"bg-slate-900 border border-slate-600 rounded p-1 text-xs text-white outline-none w-full",onKeyDown:t=>{"Enter"===t.key&&(L.requestRespondTrade(e.id,!1,X),W(null),Z(""))}}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{onClick:()=>{W(null),Z("")},className:"px-2 py-1 bg-slate-600 text-xs text-white rounded",children:B({en:"Back",vi:"Trá»Ÿ láº¡i"})}),n.jsx("button",{onClick:()=>{L.requestRespondTrade(e.id,!1,X),W(null),Z("")},className:"px-2 py-1 bg-red-600 text-xs text-white rounded font-bold",children:B({en:"Send",vi:"Gá»­i"})})]})]}):n.jsx("button",{onClick:()=>{t?L.requestCancelTrade(e.id):(W(e.id),Z(""))},className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded-lg text-xs font-medium shadow-sm hover:opacity-90 transition-opacity",children:B(t?{en:"Cancel",vi:"Há»§y"}:{en:"DECLINE",vi:"Tá»ª CHá»I"})})]})]},e.id)})}):null})(),n.jsx("style",{dangerouslySetInnerHTML:{__html:"\n@keyframes bounce-dice {\n  0%, 100% { transform: translateY(0) rotate(0deg); }\n  25% { transform: translateY(-15px) rotate(90deg); }\n  50% { transform: translateY(-8px) rotate(180deg); }\n  75% { transform: translateY(-12px) rotate(270deg); }\n}\n\n@keyframes pulse-token {\n  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 currentColor; }\n  50% { transform: scale(1.3); box-shadow: 0 0 12px 4px currentColor; }\n}\n\n@keyframes glow {\n  0%, 100% { box-shadow: 0 0 5px 2px currentColor; }\n  50% { box-shadow: 0 0 15px 5px currentColor; }\n}\n\n@keyframes slide-in {\n  from { transform: translateY(-20px); opacity: 0; }\n  to { transform: translateY(0); opacity: 1; }\n}\n\n@keyframes token-move {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.5) translateY(-5px); }\n  100% { transform: scale(1); }\n}\n"}}),n.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 w-full overflow-hidden",children:[n.jsx("div",{className:"relative bg-slate-900 rounded-lg @md:rounded-xl p-0.5 @md:p-1 shadow-2xl border-2 @md:border-4 border-slate-700 w-full transition-all duration-300 "+("zoom"===ce?"overflow-auto min-w-full max-w-full h-[70vh] cursor-grab active:cursor-grabbing":"overflow-hidden max-w-[95vw]"),ref:e=>{if(!e)return;let t,s,n,l,r=!1;e.onmousedown=a=>{"zoom"===ce&&(r=!0,e.style.cursor="grabbing",e.style.userSelect="none",t=a.pageX-e.offsetLeft,s=a.pageY-e.offsetTop,n=e.scrollLeft,l=e.scrollTop)},e.onmouseleave=()=>{r=!1,e.style.cursor="grab",e.style.removeProperty("user-select")},e.onmouseup=()=>{r=!1,e.style.cursor="grab",e.style.removeProperty("user-select")},e.onmousemove=a=>{if(!r)return;a.preventDefault();const i=a.pageX-e.offsetLeft,o=a.pageY-e.offsetTop,d=1*(i-t),c=1*(o-s);e.scrollLeft=n-d,e.scrollTop=l-c},e.ontouchstart=a=>{"zoom"===ce&&(r=!0,t=a.touches[0].pageX-e.offsetLeft,s=a.touches[0].pageY-e.offsetTop,n=e.scrollLeft,l=e.scrollTop)},e.ontouchend=()=>{r=!1},e.ontouchmove=a=>{if(!r)return;const i=a.touches[0].pageX-e.offsetLeft,o=a.touches[0].pageY-e.offsetTop,d=i-t,c=o-s;e.scrollLeft=n-d,e.scrollTop=l-c}},children:n.jsxs("div",{className:"relative w-full "+("zoom"===ce?"min-w-[800px] min-h-[800px]":""),children:[n.jsxs("div",{className:"grid gap-px @md:gap-0.5 w-full h-full",style:{gridTemplateColumns:"repeat(11, 1fr)",gridTemplateRows:"repeat(11, 1fr)"},children:[y.map(e=>{const t=je(e.id),s=oe.properties.find(t=>t.spaceId===e.id),l=s?oe.players.find(e=>e.id===s.ownerId):null;return n.jsxs("div",{id:`monopoly-board-space-${e.id}`,className:"relative flex flex-col overflow-hidden cursor-pointer transition-all duration-300 "+(e.id===he||e.id===M?.id?"z-49 scale-110 ring-4 ring-yellow-400 shadow-[0_0_20px_rgba(250,204,21,0.6)] bg-slate-600":"bg-slate-700 border border-slate-600 hover:bg-slate-600"),style:{gridRow:t.row+1,gridColumn:t.col+1,aspectRatio:1},onClick:()=>q(e),children:[e.type===v.PROPERTY&&void 0!==e.color&&n.jsx("div",{className:"w-full h-[15%] min-h-[2px] shrink-0",style:{backgroundColor:k(e.color)}}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-0.5 overflow-hidden",children:n.jsx("span",{className:"text-center leading-tight line-clamp-2 font-medium text-white "+("zoom"===ce?"text-[10px] @md:text-[12px]":"text-[5px] @md:text-[8px]"),children:B(e.name||e.name)})}),s&&s.houses>0&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center gap-px @md:gap-0.5 p-px @md:p-0.5",children:5===s.houses?n.jsx("div",{className:"w-2 h-1.5 @md:w-3 @md:h-2 bg-red-500 rounded-sm",title:"Hotel"}):Array.from({length:s.houses}).map((e,t)=>n.jsx("div",{className:"w-1 h-1 @md:w-1.5 @md:h-1.5 bg-green-500 rounded-sm",title:"House"},t))}),l&&n.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-1.5 @md:w-2 @md:h-2 rounded-full border border-white",style:{backgroundColor:l.color},title:l.username}),s?.mortgaged&&n.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:n.jsx(x,{className:"w-2 h-2 @md:w-3 @md:h-3 text-white"})})]},e.id)}),n.jsxs("div",{className:"relative bg-linear-to-br from-slate-800 to-slate-900 flex flex-col items-center justify-center overflow-auto",style:{gridRow:"2 / 11",gridColumn:"2 / 11"},children:[n.jsx("h2",{className:"text-xs @md:text-xl font-bold text-transparent bg-clip-text bg-linear-to-r from-yellow-400 to-red-500 mb-1 @md:mb-2",children:"Cá»œ Tá»¶ PHÃš"}),(()=>{if(oe.gamePhase===f.WAITING)return n.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 bg-slate-800 rounded-lg",children:[n.jsx("h3",{className:"text-white font-bold",children:B({en:"Waiting for players...",vi:"Äang chá» ngÆ°á»i chÆ¡i..."})}),n.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-sm",children:oe.players.map((e,t)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-slate-700",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),n.jsxs("span",{className:"text-white text-sm",children:[e.id?e.username:B({en:"(empty)",vi:"(trá»‘ng)"}),l(e.flags,j.BOT)&&" ğŸ¤–"]})]}),ye&&(l(e.flags,j.BOT)?n.jsx("button",{onClick:()=>L.requestRemoveBot(t),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded",children:"âœ•"}):!e.id&&n.jsx("button",{onClick:()=>L.requestAddBot(t),className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded",children:"+Bot"}))]},t))}),ye&&L.canStartGame()&&n.jsxs("button",{onClick:()=>L.requestStartGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[n.jsx(m,{className:"w-4 h-4"})," ",B({en:"Start Game",vi:"Báº¯t Ä‘áº§u"})]})]});if(oe.gamePhase===f.ENDED){const e=oe.players.find(e=>e.id===oe.winner);return n.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 bg-slate-800 rounded-lg",children:[n.jsxs("h3",{className:"text-2xl font-bold text-yellow-400",children:["ğŸ‰ ",B({en:"Game Over!",vi:"Káº¿t thÃºc!"})]}),n.jsx("p",{className:"text-white",children:e?.id===A?B({en:"You won!",vi:"Báº¡n tháº¯ng!"}):`${e?.username} ${B({en:"wins!",vi:"tháº¯ng!"})}`}),ye&&n.jsxs("button",{onClick:()=>L.requestResetGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg",children:[n.jsx(p,{className:"w-4 h-4"})," ",B({en:"Play Again",vi:"ChÆ¡i láº¡i"})]})]})}return n.jsxs("div",{className:"relative flex flex-col items-center gap-3 p-4 bg-slate-800 rounded-lg w-full max-w-md",children:[n.jsx("div",{className:"text-white text-center",children:de?n.jsx("span",{className:"text-green-400 font-bold text-lg",children:B({en:"Your turn!",vi:"LÆ°á»£t cá»§a báº¡n!"})}):n.jsxs("span",{className:"text-gray-300",children:[B({en:"Waiting for",vi:"Äang chá»"})," ",n.jsx("span",{style:{color:fe?.color},children:fe?.username}),"..."]})}),(oe.diceValues||D)&&n.jsxs("div",{className:"flex items-center gap-3",children:[Ne($[0]),Ne($[1]),n.jsxs("span",{className:"text-white text-xl font-bold",children:["= ",$[0]+$[1]]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[ve&&n.jsxs("button",{onClick:()=>L.requestRollDice(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors font-semibold",children:[n.jsx(g,{className:"w-5 h-5"}),oe.canRollAgain?B({en:"Roll Again! ğŸ‰",vi:"Äá»• tiáº¿p! ğŸ‰"}):B({en:"Roll Dice",vi:"Äá»• xÃ­ ngáº§u"})]}),de&&l(fe?.flags,j.IN_JAIL)&&!oe.hasRolled&&n.jsx("button",{onClick:()=>L.requestPayJailFine(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-colors",children:B({en:"Pay 500Ä‘ to Leave Jail",vi:"Tráº£ 500Ä‘ Ä‘á»ƒ ra tÃ¹"})}),de&&oe.hasRolled&&!oe.canRollAgain&&!oe.pendingAction&&!D&&n.jsx("button",{onClick:()=>L.requestEndTurn(),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:B({en:"End Turn",vi:"Káº¿t thÃºc lÆ°á»£t"})})]}),oe.pendingAction&&de&&n.jsxs("div",{className:"w-full p-3 bg-slate-700/80 flex items-center justify-center rounded-lg",children:[Ce(),"BUY_DECISION"===oe.pendingAction.type&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("p",{className:"text-white text-center",children:[B({en:"Buy",vi:"Mua"})," ",B(y[oe.pendingAction.spaceId]?.name)," ",B({en:"for",vi:"giÃ¡"})," ",(()=>{const e=y[oe.pendingAction.spaceId];return e&&(e.type===v.PROPERTY||e.type===v.RAILROAD||e.type===v.UTILITY)&&e.price?e.price.toLocaleString():""})(),"Ä‘?"]}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsx("button",{onClick:()=>{"BUY_DECISION"===oe.pendingAction?.type&&L.requestBuyProperty(oe.pendingAction.spaceId)},className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg",children:B({en:"Buy",vi:"Mua"})}),n.jsx("button",{onClick:()=>L.requestDeclineProperty(),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg",children:B({en:"Decline",vi:"Bá» qua"})})]})]}),"PAY_RENT"===oe.pendingAction.type&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("p",{className:"text-white text-center",children:[B({en:"Pay",vi:"Tráº£"})," ",oe.pendingAction.amount.toLocaleString(),"Ä‘"," ",B({en:"rent",vi:"tiá»n thuÃª"})]}),n.jsx("button",{onClick:()=>L.requestPayRent(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg mx-auto",children:B({en:"Pay Rent",vi:"Tráº£ tiá»n thuÃª"})})]}),"PAY_TAX"===oe.pendingAction.type&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("p",{className:"text-white text-center",children:[B({en:"Pay",vi:"Tráº£"})," ",oe.pendingAction.amount.toLocaleString(),"Ä‘"," ",B({en:"tax",vi:"thuáº¿"})]}),n.jsx("button",{onClick:()=>L.requestPayTax(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg mx-auto",children:B({en:"Pay Tax",vi:"Tráº£ thuáº¿"})})]}),"CARD"===oe.pendingAction.type&&(()=>{const e=[...N,...w].find(e=>e.id===oe.pendingAction.cardId);return n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("p",{className:"text-white text-center font-medium",children:e?B(e.text):""}),n.jsx("button",{onClick:()=>L.requestUseCard(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg mx-auto",children:"OK"})]})})()]}),oe.lastAction&&n.jsx("p",{className:"text-gray-400 text-sm text-center",children:B(oe.lastAction)})]})})()]})]}),n.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:oe.players.map((e,t)=>{if(!e.id||l(e.flags,j.BANKRUPT))return null;const s=e.id===fe?.id;let r=e.position;D&&s&&void 0!==ae.current[e.id]&&(r=ae.current[e.id]);const a=je(r);let i=a.row/11*100+4.54,o=a.col/11*100+4.54;const d=3*(t%2-.5),c=3*(Math.floor(t/2)-.5);return n.jsxs("div",{className:"absolute w-3 h-3 @md:w-5 @md:h-5 rounded-full border-2 border-white shadow-lg flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 transition-all duration-700 cubic-bezier(0.34, 1.56, 0.64, 1) "+(s?"z-50 ring-4 ring-yellow-400 ring-offset-2 ring-offset-slate-700 scale-150 shadow-[0_0_20px_rgba(250,204,21,0.8)]":"z-30"),style:{top:`${i+c}%`,left:`${o+d}%`,backgroundColor:e.color},title:e.username,children:[n.jsx("span",{className:"text-[6px] @md:text-[9px] font-bold text-white drop-shadow-md select-none",children:e.username.charAt(0).toUpperCase()}),s&&n.jsx("div",{className:"absolute inset-0 rounded-full animate-ping opacity-75 bg-white"})]},e.id)})})]})}),n.jsxs("div",{className:"flex w-full justify-end gap-2 px-2",children:[ye&&n.jsxs("button",{onClick:async()=>{await S(Y({en:"Start a new game? Current progress will be lost.",vi:"Báº¯t Ä‘áº§u vÃ¡n má»›i? Tiáº¿n trÃ¬nh hiá»‡n táº¡i sáº½ bá»‹ máº¥t."}),Y({en:"New Game",vi:"VÃ¡n má»›i"}))&&L.requestResetGame()},className:"flex items-center gap-1 px-3 py-1.5 bg-slate-700 text-white rounded-lg border border-slate-600 shadow-sm text-xs font-bold active:scale-95 transition-transform cursor-pointer hover:bg-slate-600",children:[n.jsx(i,{className:"w-3 h-3"})," ",B({en:"New Game",vi:"VÃ¡n má»›i"})]}),n.jsx("button",{onClick:()=>xe("fit"===ce?"zoom":"fit"),className:"flex items-center gap-1 px-3 py-1.5 bg-slate-700 text-white rounded-lg border border-slate-600 shadow-sm text-xs font-bold active:scale-95 transition-transform cursor-pointer hover:bg-slate-600",children:"fit"===ce?n.jsxs(n.Fragment,{children:[n.jsx(o,{className:"w-3 h-3"})," ",B({en:"Zoom",vi:"PhÃ³ng to"})]}):n.jsxs(n.Fragment,{children:[n.jsx(d,{className:"w-3 h-3"})," ",B({en:"Fit",vi:"Thu nhá»"})]})})]})]}),n.jsxs("div",{className:"flex flex-col gap-4 shrink-0 @md:w-64 w-full",children:[n.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 w-full",children:[n.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:B({en:"Players",vi:"NgÆ°á»i chÆ¡i"})}),n.jsx("div",{className:"space-y-2",children:oe.players.map((e,t)=>{if(!e.id)return null;const s=oe.currentPlayerIndex===t,r=oe.properties.filter(t=>t.ownerId===e.id),a=Q[e.id||""];return n.jsxs("div",{className:`p-2 rounded-lg transition-colors cursor-pointer ${s?"bg-slate-600 ring-2 ring-yellow-400":"bg-slate-700 hover:bg-slate-600"}\n                ${l(e.flags,j.BANKRUPT)?"opacity-50":""}`,onClick:()=>ee(t=>({...t,[e.id||""]:!a})),children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:e.color}}),n.jsxs("span",{className:"text-white text-sm font-medium flex-1 truncate text-left",children:[e.username,l(e.flags,j.BOT)?" ğŸ¤–":"",e.id===A&&B({en:" (You)",vi:" (Báº¡n)"})]}),l(e.flags,j.IN_JAIL)?n.jsxs("span",{className:"text-xs",children:["ğŸ”’ ",B({en:"in jail",vi:"trong tÃ¹"})]}):null]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[n.jsx(h,{className:"w-3 h-3"}),n.jsx("span",{className:"font-mono",children:e.money.toLocaleString()}),n.jsx(u,{className:"w-3 h-3 ml-2"}),n.jsx("span",{children:r.length})]}),n.jsx("div",{className:"h-8 w-full opacity-70 hover:opacity-100 transition-opacity mt-1",children:e.moneyHistory&&n.jsx(Te,{data:e.moneyHistory,color:e.color,height:30})}),a&&n.jsx("div",{className:"mt-2 pt-2 border-t border-slate-500",children:we(r)})]},t)})})]}),oe.gamePhase===f.PLAYING&&be>=0&&A&&n.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[n.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:B({en:"My Properties",vi:"TÃ i sáº£n cá»§a tÃ´i"})}),we(L.getPlayerProperties(A))]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-2 w-full flex flex-col transition-all duration-300 "+(U?"h-40 @md:h-56":"h-auto"),children:[n.jsxs("h3",{onClick:()=>_(!U),className:"text-white font-bold text-xs sticky top-0 bg-slate-800 z-10 flex items-center justify-between cursor-pointer hover:text-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{children:U?"â–¼":"â–¶"}),n.jsx("span",{children:B({en:"History",vi:"Lá»‹ch sá»­"})})]}),n.jsx("span",{className:"text-[10px] font-normal text-gray-400",children:E?.length||0})]}),U&&n.jsxs("div",{className:"flex-1 overflow-y-auto space-y-0.5 pr-1 font-mono custom-scrollbar mt-1",children:[(E||[]).slice().reverse().map(e=>n.jsxs("div",{className:"px-1.5 py-0.5 rounded-sm border-l-2 text-[10px] leading-tight flex items-baseline "+(e.type===T.ALERT?"bg-red-900/20 border-red-500 text-red-200":e.type===T.ACTION?"bg-blue-900/20 border-blue-500 text-blue-200":"bg-slate-700/30 border-gray-500 text-gray-400"),children:[n.jsx("span",{className:"opacity-40 mr-1.5 min-w-[38px] shrink-0",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),n.jsx("span",{className:"wrap-break-word text-left",children:B(e.message)})]},e.id)),(!E||0===E.length)&&n.jsx("p",{className:"text-gray-600 text-[10px] text-center italic mt-2",children:B({en:"No history yet",vi:"ChÆ°a cÃ³ lá»‹ch sá»­"})})]})]})]}),(()=>{if(!M)return null;const e=oe.properties.find(e=>e.spaceId===M.id),t=e?oe.players.find(t=>t.id===e.ownerId):null,s=e?.ownerId===A,r=oe.properties.filter(e=>e.ownerId===A&&y[e.spaceId].type===v.UTILITY).length,a=oe.properties.filter(e=>e.ownerId===A&&y[e.spaceId].type===v.RAILROAD).length;return n.jsx("div",{className:"fixed inset-0 z-50 flex @md:items-center items-start justify-center bg-black/60 p-4",onClick:()=>q(null),children:n.jsxs("div",{id:"monopoly-property-detail-modal",className:"bg-slate-800 rounded-xl p-4 max-w-sm w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[M.type===v.PROPERTY&&void 0!==M.color&&n.jsx("div",{className:"h-8 rounded-t-lg -mx-4 -mt-4 mb-3",style:{backgroundColor:k(M.color)}}),n.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:B(M.name)}),M.description&&n.jsx("ul",{className:"text-gray-300 text-sm",children:Y(M.description).split("\n").map(e=>n.jsx("li",{children:e},e))}),M.type===v.CHEST&&Ie(),M.type===v.CHANCE&&Re(),n.jsxs("div",{className:"text-gray-300 space-y-1 text-sm",children:[(M.type===v.PROPERTY||M.type===v.RAILROAD||M.type===v.UTILITY)&&M.price&&n.jsxs("p",{children:["ğŸ’° ",B({en:"Price",vi:"GiÃ¡ mua"}),":"," ",M.price.toLocaleString(),"Ä‘"]}),M.type===v.PROPERTY&&M.houseCost&&n.jsxs("p",{children:["ğŸ”¨ ",B({en:"Build house",vi:"GiÃ¡ xÃ¢y nhÃ "}),":"," ",M.houseCost.toLocaleString(),"Ä‘"]}),M.type===v.TAX&&M.taxAmount&&n.jsxs("p",{children:["ğŸ’° ",B({en:"Tax",vi:"Thuáº¿"}),":"," ",M.taxAmount.toLocaleString(),"Ä‘"]}),M.type===v.RAILROAD&&M.baseRent&&n.jsxs("p",{className:"mt-3 pt-3",children:["ğŸ’µ ",B({en:"Rent",vi:"ThuÃª"}),":"," ",M.baseRent.toLocaleString(),M.type===v.RAILROAD?" x"+a+Y({en:" (multiplied by railroad count)",vi:" (nhÃ¢n sá»‘ ga sá»Ÿ há»¯u)"}):""]}),M.type===v.UTILITY&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:["ğŸ’µ ",B({en:"Rent",vi:"ThuÃª"}),":"," ",M.baseRent.toLocaleString()]}),n.jsxs("div",{className:"mt-2 text-xs flex flex-col gap-1",children:[n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(e&&0!==r?"":"bg-green-900/40 text-green-300 font-bold border border-green-700/50"),children:[n.jsx("span",{children:B({en:"Base Rent",vi:"ThuÃª cÆ¡ báº£n"})}),n.jsxs("span",{children:[M.baseRent.toLocaleString(),"Ä‘"]})]}),n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(e&&1!==r?"":"bg-green-900/40 text-green-300 font-bold border border-green-700/50"),children:[n.jsx("span",{children:B({en:"1 Utility",vi:"1 Cá»¥m"})}),n.jsxs("span",{children:[M.baseRent.toLocaleString(),"Ä‘ + 4x ğŸ²"]})]}),n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(e&&2!==r?"":"bg-green-900/40 text-green-300 font-bold border border-green-700/50"),children:[n.jsx("span",{children:B({en:"2 Utilities",vi:"2 Cá»¥m"})}),n.jsxs("span",{children:[M.baseRent.toLocaleString(),"Ä‘ + 10x ğŸ²"]})]})]})]}),M.type===v.PROPERTY&&M.rent&&n.jsxs("div",{className:"mt-2 text-xs flex flex-col gap-1",children:[n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(e&&0!==e.houses?"":"bg-green-900/40 text-green-300 font-bold border border-green-700/50"),children:[n.jsx("span",{children:B({en:"Rent",vi:"ThuÃª"})}),n.jsxs("span",{children:[M.rent[0].toLocaleString(),"Ä‘"]})]}),n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(1===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[n.jsx("span",{children:B({en:"With 1 House",vi:"Vá»›i 1 NhÃ "})}),n.jsxs("span",{children:[M.rent[1].toLocaleString(),"Ä‘"]})]}),n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(2===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[n.jsx("span",{children:B({en:"With 2 Houses",vi:"Vá»›i 2 NhÃ "})}),n.jsxs("span",{children:[M.rent[2].toLocaleString(),"Ä‘"]})]}),n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(3===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[n.jsx("span",{children:B({en:"With 3 Houses",vi:"Vá»›i 3 NhÃ "})}),n.jsxs("span",{children:[M.rent[3].toLocaleString(),"Ä‘"]})]}),n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(4===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[n.jsx("span",{children:B({en:"With 4 Houses",vi:"Vá»›i 4 NhÃ "})}),n.jsxs("span",{children:[M.rent[4].toLocaleString(),"Ä‘"]})]}),n.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(5===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[n.jsx("span",{children:B({en:"With Hotel",vi:"Vá»›i KhÃ¡ch sáº¡n"})}),n.jsxs("span",{children:[M.rent[5]?.toLocaleString(),"Ä‘"]})]})]})]}),t&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:t.color}}),n.jsxs("span",{className:"text-white",children:[B({en:"Owned by",vi:"Sá»Ÿ há»¯u bá»Ÿi"}),": ",t.username]})]}),e&&e.houses>0&&n.jsxs("p",{className:"text-gray-300 text-sm mt-1",children:["ğŸ "," ",5===e.houses?B({en:"Hotel",vi:"KhÃ¡ch sáº¡n"}):`${e.houses} ${B({en:"house(s)",vi:"nhÃ "})}`]})]}),s&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-600 flex flex-col gap-2",children:[n.jsx("h4",{className:"text-white text-xs font-bold uppercase mb-1",children:B({en:"Manage Property",vi:"Quáº£n lÃ½ tÃ i sáº£n"})}),e&&e.houses>0&&M.type===v.PROPERTY&&M.houseCost&&n.jsxs("button",{onClick:()=>L.requestSellHouse(M.id),className:"w-full px-3 py-1.5 bg-orange-700 hover:bg-orange-600 text-white rounded text-xs",children:[B({en:"Sell House",vi:"BÃ¡n nhÃ "})," (+",M.houseCost?(M.houseCost/2).toLocaleString():0,"Ä‘)"]}),e&&!e.mortgaged&&0===e.houses&&(M.type===v.PROPERTY||M.type===v.RAILROAD||M.type===v.UTILITY)&&M.price&&n.jsxs("button",{onClick:async()=>{const e=((M.price||0)/2).toLocaleString();await S(Y({en:`Mortgage ${Y(M.name)} for ${e}?`,vi:`Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n tháº¿ cháº¥p ${Y(M.name)} vá»›i giÃ¡ ${e}?`}),Y({en:"Mortgage",vi:"Tháº¿ cháº¥p"}))&&L.requestMortgage(M.id)},className:"w-full px-3 py-1.5 bg-red-700 hover:bg-red-600 text-white rounded text-xs",children:[B({en:"Mortgage",vi:"Tháº¿ cháº¥p"})," (+",(M.price/2).toLocaleString(),"Ä‘)"]}),e&&e.mortgaged&&(M.type===v.PROPERTY||M.type===v.RAILROAD||M.type===v.UTILITY)&&M.price&&n.jsxs("button",{onClick:()=>L.requestUnmortgage(M.id),className:"w-full px-3 py-1.5 bg-blue-700 hover:bg-blue-600 text-white rounded text-xs",children:[B({en:"Unmortgage",vi:"Chuá»™c láº¡i"})," (-",(M.price/2*1.1).toLocaleString(),"Ä‘)"]}),n.jsxs("div",{className:"pt-2",children:[n.jsx("p",{className:"text-gray-400 text-xs mb-1",children:B({en:"Sell to Player",vi:"BÃ¡n cho ngÆ°á»i khÃ¡c"})}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("select",{className:"flex-1 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"trade-player-select",value:te||"",onChange:e=>se(e.target.value),children:oe.players.filter(e=>e.id&&e.id!==A&&!l(e.flags,j.BANKRUPT)).map(e=>n.jsx("option",{value:e.id,children:e.username},e.id))}),n.jsx("input",{type:"number",placeholder:Y({en:"Price",vi:"GiÃ¡"}),className:"w-16 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"trade-price-input"}),n.jsx("button",{onClick:()=>{const e=document.getElementById("trade-player-select"),t=document.getElementById("trade-price-input"),s=e.value,n=parseInt(t.value);s&&!isNaN(n)&&n>0&&(L.requestOfferTrade(s,M.id,n),q(null))},className:"px-2 py-1 bg-green-700 hover:bg-green-600 text-white rounded text-xs",children:"OK"})]})]})]}),!s&&e&&"bank"!==e.ownerId&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-600 flex flex-col gap-2",children:[n.jsx("p",{className:"text-gray-400 text-xs mb-1",children:B({en:"Offer to Buy",vi:"Äá» nghá»‹ mua láº¡i"})}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"number",placeholder:Y({en:"Price",vi:"GiÃ¡"}),className:"flex-1 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"buy-price-input"}),n.jsx("button",{onClick:()=>{const t=document.getElementById("buy-price-input"),s=parseInt(t.value);!isNaN(s)&&s>0&&(L.requestOfferTrade(e.ownerId,M.id,s),q(null))},className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white rounded text-xs",children:B({en:"Send Offer",vi:"Gá»­i Ä‘á» nghá»‹"})})]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[s&&M.type===v.PROPERTY&&M.color&&M.houseCost&&n.jsx("div",{className:"flex-1",children:(()=>{const e=L.canBuildHouse(A,M.id);return n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("button",{disabled:!e.allowed||!de,onClick:()=>{e.allowed&&de&&(L.requestBuildHouse(M.id),q(null))},className:"w-full px-3 py-2 rounded-lg text-sm transition-colors "+(e.allowed&&de?"bg-green-600 hover:bg-green-500 text-white":"bg-green-900/50 text-gray-400 cursor-not-allowed"),children:[B({en:"Build House",vi:"XÃ¢y nhÃ "})," (",M.houseCost?M.houseCost.toLocaleString():0,"Ä‘)"]}),(!e.allowed||!de)&&n.jsx("p",{className:"text-[10px] text-red-400 text-center leading-tight",children:B(e.reason||Y({en:"Wait for your turn",vi:"Äá»£i tá»›i lÆ°á»£t cá»§a báº¡n"}))})]})})()}),n.jsx("button",{onClick:()=>q(null),className:"flex-1 px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-sm",children:B({en:"Close",vi:"ÄÃ³ng"})})]})]})})})(),me&&n.jsxs("svg",{className:"absolute inset-0 pointer-events-none z-49 overflow-visible w-full h-full",children:[n.jsx("defs",{children:n.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:n.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#FACC15"})})}),n.jsx("line",{x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,stroke:"#FACC15",strokeWidth:"3",strokeDasharray:"5,5",markerEnd:"url(#arrowhead)",className:"drop-shadow-md",children:n.jsx("animate",{attributeName:"stroke-dashoffset",from:"100",to:"0",dur:"1s",repeatCount:"indefinite"})}),n.jsx("circle",{cx:me.x1,cy:me.y1,r:"4",fill:"#FACC15",children:n.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"1s",repeatCount:"indefinite"})})]}),n.jsx("button",{onClick:()=>z(!0),className:"fixed bottom-4 right-4 z-40 bg-slate-800 hover:bg-slate-700 text-white p-3 rounded-full shadow-xl border border-slate-600 transition-transform hover:scale-110",title:B({en:"Game Rules",vi:"Luáº­t ChÆ¡i"}),children:n.jsx(c,{className:"w-6 h-6 text-yellow-500"})}),V&&a.createPortal(n.jsx("div",{className:"@container fixed inset-0 z-60 flex items-center justify-center bg-black/80 p-4",children:n.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full shadow-2xl relative",children:[n.jsxs("div",{className:"flex justify-between p-4 pr-2",children:[n.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(c,{className:"w-6 h-6 text-yellow-500"}),B({en:"Game Rules: Monopoly",vi:"Luáº­t ChÆ¡i: Cá» Tá»· PhÃº"})]}),n.jsx("button",{onClick:()=>z(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:n.jsx(b,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-4 pt-0 space-y-4 text-slate-300 leading-relaxed max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4 border-b border-green-400/30 pb-2",children:B({en:"Basic Rules",vi:"Luáº­t CÆ¡ Báº£n"})}),n.jsxs("ul",{className:"list-disc pl-5 text-gray-300 space-y-2 text-sm",children:[n.jsxs("li",{children:[n.jsxs("strong",{className:"text-white",children:[B({en:"Goal",vi:"Má»¥c TiÃªu"}),":"]})," ",B({en:"Be the last player remaining with money. Bankrupt other players by buying properties and charging rent.",vi:"LÃ  ngÆ°á»i chÆ¡i cuá»‘i cÃ¹ng cÃ²n tiá»n. LÃ m phÃ¡ sáº£n ngÆ°á»i khÃ¡c báº±ng cÃ¡ch mua Ä‘áº¥t vÃ  thu tiá»n thuÃª."})]}),n.jsxs("li",{children:[n.jsxs("strong",{className:"text-white",children:[B({en:"Movement",vi:"Di Chuyá»ƒn"}),":"]})," ",B({en:"Roll two dice to move. Rolling doubles allows you to roll again. Three consecutive doubles sends you to Jail.",vi:"Gieo 2 xÃ­ ngáº§u Ä‘á»ƒ di chuyá»ƒn. Äá»• Ä‘Ã´i Ä‘Æ°á»£c Ä‘i tiáº¿p. Äá»• Ä‘Ã´i 3 láº§n liÃªn tiáº¿p sáº½ pháº£i vÃ o TÃ¹."})]}),n.jsxs("li",{children:[n.jsxs("strong",{className:"text-white",children:[B({en:"Properties",vi:"TÃ i Sáº£n"}),":"]})," ",B({en:"Streets, Railroads, and Utilities. Buy them to collect rent. Complete a color set to double the rent and build Houses/Hotels.",vi:"ÄÆ°á»ng phá»‘, NhÃ  ga, CÃ´ng ty. Mua Ä‘á»ƒ thu tiá»n thuÃª. SÆ°u táº­p Ä‘á»§ bá»™ mÃ u Ä‘á»ƒ nhÃ¢n Ä‘Ã´i tiá»n thuÃª vÃ  xÃ¢y NhÃ /KhÃ¡ch sáº¡n."})]}),n.jsxs("li",{children:[n.jsxs("strong",{className:"text-white",children:[B({en:"Jail",vi:"NhÃ  TÃ¹"}),":"]})," ",B({en:"If sent to Jail, you cannot move but can still collect rent. To leave: pay 500Ä‘, roll doubles, or use a 'Get Out of Jail Free' card.",vi:"Náº¿u vÃ o TÃ¹, báº¡n khÃ´ng thá»ƒ di chuyá»ƒn nhÆ°ng váº«n Ä‘Æ°á»£c thu tiá»n. Äá»ƒ ra: tráº£ 500Ä‘, Ä‘á»• Ä‘Ã´i, hoáº·c dÃ¹ng tháº» 'Ra TÃ¹ Miá»…n PhÃ­'."})]})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4 border-b border-blue-400/30 pb-2",children:B({en:"Special Spaces",vi:"Ã” Äáº·c Biá»‡t"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-bold text-white mb-1",children:B({en:"Utilities (Water / Electricity)",vi:"CÃ´ng Ty (Äiá»‡n/NÆ°á»›c)"})}),n.jsxs("p",{className:"text-xs text-gray-300",children:[B({en:"Rent depends on the dice roll.",vi:"Tiá»n thuÃª phá»¥ thuá»™c vÃ o sá»‘ Ä‘á»• xÃ­ ngáº§u."}),n.jsx("br",{}),"-"," ",B({en:"Own 1 Utility: Rent = 4x dice roll",vi:"Sá»Ÿ há»¯u 1 CÃ´ng ty: ThuÃª = 4x sá»‘ Ä‘á»• xÃ­ ngáº§u"}),n.jsx("br",{}),"-"," ",B({en:"Own 2 Utilities: Rent = 10x dice roll",vi:"Sá»Ÿ há»¯u 2 CÃ´ng ty: ThuÃª = 10x sá»‘ Ä‘á»• xÃ­ ngáº§u"})]})]}),n.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-bold text-white mb-1",children:B({en:"Railroads",vi:"NhÃ  Ga"})}),n.jsxs("p",{className:"text-xs text-gray-300",children:[B({en:"Rent depends on the railroad count.",vi:"Tiá»n thuÃª phá»¥ thuá»™c vÃ o sá»‘ ga sá»Ÿ há»¯u."}),n.jsx("br",{}),B({en:"The more you own, the higher the rent.",vi:"Sá»Ÿ há»¯u cÃ ng nhiá»u, giÃ¡ thuÃª cÃ ng cao."}),n.jsx("br",{}),"-"," ",B({en:"Own 1 Railroad: Rent = Original Rent",vi:"Sá»Ÿ há»¯u 1 Ga: ThuÃª = GiÃ¡ thuÃª ban Ä‘áº§u"}),n.jsx("br",{}),"-"," ",B({en:"Own 2 Railroads: Rent = 2x Original Rent",vi:"Sá»Ÿ há»¯u 2 Ga: ThuÃª = 2x GiÃ¡ thuÃª ban Ä‘áº§u"}),n.jsx("br",{}),"-"," ",B({en:"Own 3 Railroads: Rent = 3x Original Rent",vi:"Sá»Ÿ há»¯u 3 Ga: ThuÃª = 3x GiÃ¡ thuÃª ban Ä‘áº§u"}),n.jsx("br",{}),"-"," ",B({en:"Own 4 Railroads: Rent = 4x Original Rent",vi:"Sá»Ÿ há»¯u 4 Ga: ThuÃª = 4x GiÃ¡ thuÃª ban Ä‘áº§u"})]})]}),n.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-bold text-white mb-1",children:B({en:"Taxes",vi:"Thuáº¿"})}),n.jsxs("p",{className:"text-xs text-gray-300",children:[B({en:"Pay a fixed amount to the bank.",vi:"Tráº£ má»™t khoáº£n cá»‘ Ä‘á»‹nh cho ngÃ¢n hÃ ng."}),n.jsx("br",{}),"-"," ",n.jsx("span",{className:"text-red-400",children:B({en:"Income Tax",vi:"Thuáº¿ Thu Nháº­p"})}),": 2000Ä‘",n.jsx("br",{}),"-"," ",n.jsx("span",{className:"text-red-400",children:B({en:"Luxury Tax",vi:"Thuáº¿ Xa Xá»‰"})}),": 1000Ä‘"]})]}),n.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-bold text-white mb-1",children:B({en:"Jail",vi:"NhÃ  TÃ¹"})}),n.jsxs("p",{className:"text-xs text-gray-300",children:["-"," ",n.jsx("strong",{className:"text-orange-400",children:B({en:"Go to Jail",vi:"VÃ o TÃ¹"})}),":"," ",B({en:"Move directly to Jail. Do not pass GO, do not collect salary. Turn ends.",vi:"Äi tháº³ng vÃ o tÃ¹. KhÃ´ng qua Khá»Ÿi HÃ nh, khÃ´ng nháº­n lÆ°Æ¡ng. Káº¿t thÃºc lÆ°á»£t."}),n.jsx("br",{}),"-"," ",n.jsx("strong",{className:"text-green-400",children:B({en:"Just Visiting",vi:"ThÄƒm TÃ¹"})}),":"," ",B({en:"If you land here normally, nothing happens.",vi:"Náº¿u báº¡n Ä‘i vÃ o Ã´ nÃ y bÃ¬nh thÆ°á»ng, khÃ´ng cÃ³ gÃ¬ xáº£y ra."}),n.jsx("br",{}),"-"," ",n.jsx("strong",{className:"text-red-400",children:B({en:"In Jail",vi:"Trong TÃ¹"})}),":"," ",B({en:"You can still collect rent! To leave: roll doubles, pay 500Ä‘, or use card.",vi:"Váº«n Ä‘Æ°á»£c thu tiá»n thuÃª! Äá»ƒ ra: Ä‘á»• Ä‘Ã´i, tráº£ 500Ä‘, hoáº·c dÃ¹ng tháº»."})]})]})]})]}),Re(),Ie()]})]})}),document.body)]})}export{A as default};
