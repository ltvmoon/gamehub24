import{a as e,j as t}from"./index-Dgl20RHv.js";import{l as s,_ as n,ag as l,ah as r,a4 as a,p as i,D as o}from"./react-vendor-DqvDgvkG.js";import"./socket-DRbsQkF5.js";import{B as d,c}from"./types-TmeRPL2N.js";import"./zustand-DHxpPrWm.js";const x=e=>e&&c[e]||"";function m({game:c,currentUserId:m}){const h=c,[u,p]=s.useState(h.getState()),[g,f]=s.useState(h.getState().logs||[]),{ti:b}=e(),[v,y]=s.useState(!1),[j,w]=s.useState([1,1]),[N,C]=s.useState(null),[k,I]=s.useState(!0),P=s.useRef(!1),S=s.useRef(h.getState().diceValues),A=s.useRef({});s.useEffect(()=>{const e={};h.getState().players.forEach(t=>{t.id&&(e[t.id]=t.position)}),A.current=e,h.onUpdate(e=>{const t=e.diceValues;if(t&&(!S.current||t[0]!==S.current[0]||t[1]!==S.current[1])&&!P.current){P.current=!0,S.current=t,y(!0);let s=0;const n=setInterval(()=>{if(w([Math.floor(6*Math.random())+1,Math.floor(6*Math.random())+1]),s++,s>8){clearInterval(n),w(t),y(!1),P.current=!1,p(e);const s={};e.players.forEach(e=>{e.id&&(s[e.id]=e.position)}),A.current=s}},80);return}if(!P.current){p(e),e.diceValues&&(S.current=e.diceValues);const t={};e.players.forEach(e=>{e.id&&(t[e.id]=e.position)}),A.current=t}f(t=>{const s=e.logs||[],n=new Set(t.map(e=>e.id)),l=s.filter(e=>!n.has(e.id));return 0===l.length?t:[...t,...l]})}),p(h.getState()),h.requestSync()},[h]);const B=h.getMyPlayerIndex(),T=u.players[u.currentPlayerIndex],R=T?.id===m,$=h.isHostUser,q=R&&(!u.hasRolled||u.canRollAgain)&&!u.pendingAction&&!v,L=e=>e>=0&&e<=10?{row:10,col:10-e,rotation:0}:e>=11&&e<=19?{row:10-(e-10),col:0,rotation:90}:e>=20&&e<=30?{row:0,col:e-20,rotation:180}:{row:e-30,col:10,rotation:270},E=(e,s="w-12 h-12")=>{const n={"top-left":"top-1 left-1","top-right":"top-1 right-1","middle-left":"top-1/2 left-1 -translate-y-1/2","middle-right":"top-1/2 right-1 -translate-y-1/2",center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","bottom-left":"bottom-1 left-1","bottom-right":"bottom-1 right-1"};return t.jsx("div",{className:`relative ${s} bg-white rounded-lg shadow-lg border-2 border-gray-300`,style:{animation:v?"bounce-dice 0.3s ease-in-out infinite":void 0},children:({1:["center"],2:["top-right","bottom-left"],3:["top-right","center","bottom-left"],4:["top-left","top-right","bottom-left","bottom-right"],5:["top-left","top-right","center","bottom-left","bottom-right"],6:["top-left","top-right","middle-left","middle-right","bottom-left","bottom-right"]}[e]||[]).map((e,s)=>t.jsx("div",{className:`absolute w-2 h-2 bg-gray-800 rounded-full ${n[e]}`},s))})};return t.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 p-0 w-full max-w-6xl mx-auto",children:[(()=>{const e=u.tradeOffers?.filter(e=>e.toPlayerId===m||e.fromPlayerId===m);return e&&0!==e.length?t.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 flex flex-col gap-2 w-full max-w-sm px-4",children:e.map(e=>{const s=e.fromPlayerId===m,n=u.players.find(t=>t.id===(s?e.toPlayerId:e.fromPlayerId)),l=d[e.propertyId],r=u.properties.find(t=>t.spaceId===e.propertyId),a=r?.ownerId===e.fromPlayerId;let i=b({en:"TRADE OFFER",vi:"Lá»œI Má»œI GIAO Dá»ŠCH"}),o="";return o=s?a?`${b({en:"You offered to sell",vi:"Báº¡n Ä‘á» nghá»‹ bÃ¡n"})} ${b({en:l?.name,vi:l?.nameVi})} ${b({en:"to",vi:"cho"})} ${n?.username}`:`${b({en:"You offered to buy",vi:"Báº¡n Ä‘á» nghá»‹ mua"})} ${b({en:l?.name,vi:l?.nameVi})} ${b({en:"from",vi:"tá»«"})} ${n?.username}`:a?`${n?.username} ${b({en:"offers to sell",vi:"muá»‘n bÃ¡n"})} ${b({en:l?.name,vi:l?.nameVi})} ${b({en:"to you",vi:"cho báº¡n"})}`:`${n?.username} ${b({en:"offers to buy",vi:"muá»‘n mua"})} ${b({en:l?.name,vi:l?.nameVi})} ${b({en:"from you",vi:"tá»« báº¡n"})}`,t.jsxs("div",{className:"bg-slate-800 border-2 border-yellow-500 rounded-lg p-3 shadow-xl animate-in slide-in-from-top duration-300",children:[t.jsx("h4",{className:"text-yellow-400 font-bold text-sm text-center mb-1",children:i}),t.jsx("p",{className:"text-white text-xs text-center mb-2",children:o}),t.jsxs("p",{className:"text-center text-green-400 font-mono font-bold mb-3",children:[e.price.toLocaleString(),"Ä‘"]}),t.jsxs("div",{className:"flex gap-2 justify-center",children:[!s&&t.jsx("button",{onClick:()=>h.requestRespondTrade(e.id,!0),className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white rounded-lg text-xs font-bold shadow-md hover:scale-105 transition-transform",children:b({en:"ACCEPT",vi:"Äá»’NG Ã"})}),t.jsx("button",{onClick:()=>s?h.requestCancelTrade(e.id):h.requestRespondTrade(e.id,!1),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded-lg text-xs font-medium shadow-sm hover:opacity-90 transition-opacity",children:b(s?{en:"Cancel",vi:"Há»§y"}:{en:"DECLINE",vi:"Tá»ª CHá»I"})})]})]},e.id)})}):null})(),t.jsx("style",{dangerouslySetInnerHTML:{__html:"\n@keyframes bounce-dice {\n  0%, 100% { transform: translateY(0) rotate(0deg); }\n  25% { transform: translateY(-15px) rotate(90deg); }\n  50% { transform: translateY(-8px) rotate(180deg); }\n  75% { transform: translateY(-12px) rotate(270deg); }\n}\n\n@keyframes pulse-token {\n  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 currentColor; }\n  50% { transform: scale(1.3); box-shadow: 0 0 12px 4px currentColor; }\n}\n\n@keyframes glow {\n  0%, 100% { box-shadow: 0 0 5px 2px currentColor; }\n  50% { box-shadow: 0 0 15px 5px currentColor; }\n}\n\n@keyframes slide-in {\n  from { transform: translateY(-20px); opacity: 0; }\n  to { transform: translateY(0); opacity: 1; }\n}\n\n@keyframes token-move {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.5) translateY(-5px); }\n  100% { transform: scale(1); }\n}\n"}}),t.jsx("div",{className:"flex flex-col items-center gap-2 flex-1",children:t.jsxs("div",{className:"relative bg-slate-900 rounded-lg sm:rounded-xl p-0.5 sm:p-1 shadow-2xl border-2 sm:border-4 border-slate-700 overflow-hidden w-full max-w-[95vw]",children:[t.jsxs("div",{className:"grid gap-[1px] sm:gap-0.5 w-full",style:{gridTemplateColumns:"repeat(11, 1fr)",gridTemplateRows:"repeat(11, 1fr)"},children:[d.map(e=>{const s=L(e.id),l=u.properties.find(t=>t.spaceId===e.id),r=l?u.players.find(e=>e.id===l.ownerId):null;return t.jsxs("div",{className:"bg-slate-700 border border-slate-600 relative flex flex-col overflow-hidden cursor-pointer hover:bg-slate-600 transition-colors",style:{gridRow:s.row+1,gridColumn:s.col+1,aspectRatio:1},onClick:()=>C(e),children:[e.color&&t.jsx("div",{className:"w-full h-[15%] min-h-[2px] flex-shrink-0",style:{backgroundColor:x(e.color)}}),t.jsx("div",{className:"flex-1 flex items-center justify-center p-0.5 overflow-hidden",children:t.jsx("span",{className:"text-[5px] sm:text-[6px] md:text-[8px] text-white text-center leading-tight line-clamp-2 font-medium",children:b({en:e.name,vi:e.nameVi||e.name})})}),l&&l.houses>0&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center gap-[1px] sm:gap-0.5 p-[1px] sm:p-0.5",children:5===l.houses?t.jsx("div",{className:"w-2 h-1.5 sm:w-3 sm:h-2 bg-red-500 rounded-sm",title:"Hotel"}):Array.from({length:l.houses}).map((e,s)=>t.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 bg-green-500 rounded-sm",title:"House"},s))}),r&&t.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full border border-white",style:{backgroundColor:r.color},title:r.username}),l?.mortgaged&&t.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:t.jsx(n,{className:"w-2 h-2 sm:w-3 sm:h-3 text-white"})})]},e.id)}),t.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 flex flex-col items-center justify-center overflow-auto",style:{gridRow:"2 / 11",gridColumn:"2 / 11"},children:[t.jsx("h2",{className:"text-xs sm:text-lg md:text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-red-500 mb-1 sm:mb-2",children:"Cá»œ Tá»¶ PHÃš"}),(()=>{if("waiting"===u.gamePhase)return t.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 bg-slate-800 rounded-lg",children:[t.jsx("h3",{className:"text-white font-bold",children:b({en:"Waiting for players...",vi:"Äang chá» ngÆ°á»i chÆ¡i..."})}),t.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-sm",children:u.players.map((e,s)=>t.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),t.jsxs("span",{className:"text-white text-sm",children:[e.id?e.username:b({en:"(empty)",vi:"(trá»‘ng)"}),e.isBot&&" ğŸ¤–"]})]}),$&&(e.isBot?t.jsx("button",{onClick:()=>h.requestRemoveBot(s),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded",children:"âœ•"}):!e.id&&t.jsx("button",{onClick:()=>h.requestAddBot(s),className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded",children:"+Bot"}))]},s))}),$&&h.canStartGame()&&t.jsxs("button",{onClick:()=>h.requestStartGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[t.jsx(a,{className:"w-4 h-4"})," ",b({en:"Start Game",vi:"Báº¯t Ä‘áº§u"})]})]});if("ended"===u.gamePhase){const e=u.players.find(e=>e.id===u.winner);return t.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 bg-slate-800 rounded-lg",children:[t.jsxs("h3",{className:"text-2xl font-bold text-yellow-400",children:["ğŸ‰ ",b({en:"Game Over!",vi:"Káº¿t thÃºc!"})]}),t.jsx("p",{className:"text-white",children:e?.id===m?b({en:"You won!",vi:"Báº¡n tháº¯ng!"}):`${e?.username} ${b({en:"wins!",vi:"tháº¯ng!"})}`}),$&&t.jsxs("button",{onClick:()=>h.reset(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg",children:[t.jsx(i,{className:"w-4 h-4"})," Play Again"]})]})}return t.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 bg-slate-800 rounded-lg w-full max-w-md",children:[t.jsx("div",{className:"text-white text-center",children:R?t.jsx("span",{className:"text-green-400 font-bold text-lg",children:b({en:"Your turn!",vi:"LÆ°á»£t cá»§a báº¡n!"})}):t.jsxs("span",{className:"text-gray-300",children:[b({en:"Waiting for",vi:"Äang chá»"})," ",t.jsx("span",{style:{color:T?.color},children:T?.username}),"..."]})}),u.diceValues&&t.jsxs("div",{className:"flex items-center gap-3",children:[E(j[0]),E(j[1]),t.jsxs("span",{className:"text-white text-xl font-bold ml-2",children:["= ",j[0]+j[1]]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[q&&t.jsxs("button",{onClick:()=>h.requestRollDice(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors font-semibold",children:[t.jsx(o,{className:"w-5 h-5"}),u.canRollAgain?b({en:"Roll Again! ğŸ‰",vi:"Äá»• tiáº¿p! ğŸ‰"}):b({en:"Roll Dice",vi:"Äá»• xÃ­ ngáº§u"})]}),R&&T?.inJail&&!u.hasRolled&&t.jsx("button",{onClick:()=>h.requestPayJailFine(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-colors",children:b({en:"Pay 500Ä‘ to Leave Jail",vi:"Tráº£ 500Ä‘ Ä‘á»ƒ ra tÃ¹"})}),R&&u.hasRolled&&!u.canRollAgain&&!u.pendingAction&&t.jsx("button",{onClick:()=>h.requestEndTurn(),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:b({en:"End Turn",vi:"Káº¿t thÃºc lÆ°á»£t"})})]}),u.pendingAction&&R&&t.jsxs("div",{className:"w-full p-3 bg-slate-700 rounded-lg animate-slide-in",children:["BUY_DECISION"===u.pendingAction.type&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("p",{className:"text-white text-center",children:[b({en:"Buy",vi:"Mua"})," ",b({en:d[u.pendingAction.spaceId]?.name,vi:d[u.pendingAction.spaceId]?.nameVi})," ",b({en:"for",vi:"giÃ¡"})," ",d[u.pendingAction.spaceId]?.price?.toLocaleString(),"Ä‘?"]}),t.jsxs("div",{className:"flex gap-2 justify-center",children:[t.jsx("button",{onClick:()=>{"BUY_DECISION"===u.pendingAction?.type&&h.requestBuyProperty(u.pendingAction.spaceId)},className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg",children:b({en:"Buy",vi:"Mua"})}),t.jsx("button",{onClick:()=>h.requestDeclineProperty(),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg",children:b({en:"Decline",vi:"Bá» qua"})})]})]}),"PAY_RENT"===u.pendingAction.type&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("p",{className:"text-white text-center",children:[b({en:"Pay",vi:"Tráº£"})," ",u.pendingAction.amount.toLocaleString(),"Ä‘"," ",b({en:"rent",vi:"tiá»n thuÃª"})]}),t.jsx("button",{onClick:()=>h.requestPayRent(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg mx-auto",children:b({en:"Pay Rent",vi:"Tráº£ tiá»n thuÃª"})})]}),"PAY_TAX"===u.pendingAction.type&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("p",{className:"text-white text-center",children:[b({en:"Pay",vi:"Tráº£"})," ",u.pendingAction.amount.toLocaleString(),"Ä‘"," ",b({en:"tax",vi:"thuáº¿"})]}),t.jsx("button",{onClick:()=>h.requestPayTax(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg mx-auto",children:b({en:"Pay Tax",vi:"Tráº£ thuáº¿"})})]}),"CARD"===u.pendingAction.type&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("p",{className:"text-white text-center font-medium",children:b({en:u.pendingAction.card.text,vi:u.pendingAction.card.textVi})}),t.jsx("button",{onClick:()=>h.requestUseCard(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg mx-auto",children:"OK"})]})]}),u.lastAction&&t.jsx("p",{className:"text-gray-400 text-sm text-center",children:b(u.lastAction)})]})})()]})]}),t.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:u.players.map((e,s)=>{if(!e.id||e.isBankrupt)return null;const n=e.id===T?.id;let l=e.position;v&&n&&void 0!==A.current[e.id]&&(l=A.current[e.id]);const r=L(l);let a=r.row/11*100+4.54,i=r.col/11*100+4.54;const o=3*(s%2-.5),d=3*(Math.floor(s/2)-.5);return t.jsxs("div",{className:"absolute w-3 h-3 sm:w-5 sm:h-5 rounded-full border-2 border-white shadow-lg flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 transition-all duration-700 cubic-bezier(0.34, 1.56, 0.64, 1) "+(n?"z-50 ring-2 ring-yellow-400 ring-offset-1 ring-offset-slate-700":"z-30"),style:{top:`${a+d}%`,left:`${i+o}%`,backgroundColor:e.color},title:e.username,children:[t.jsx("span",{className:"text-[6px] sm:text-[9px] font-bold text-white drop-shadow-md select-none",children:e.username.charAt(0).toUpperCase()}),n&&t.jsx("div",{className:"absolute inset-0 rounded-full animate-ping opacity-75 bg-white"})]},e.id)})})]})}),t.jsxs("div",{className:"flex flex-col gap-4 flex-shrink-0 lg:w-64 w-full",children:[t.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 w-full",children:[t.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:b({en:"Players",vi:"NgÆ°á»i chÆ¡i"})}),t.jsx("div",{className:"space-y-2",children:u.players.map((e,s)=>{if(!e.id)return null;const n=u.currentPlayerIndex===s,a=u.properties.filter(t=>t.ownerId===e.id);return t.jsxs("div",{className:`p-2 rounded-lg ${n?"bg-slate-600 ring-2 ring-yellow-400":"bg-slate-700"}\n                ${e.isBankrupt?"opacity-50":""}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:e.color}}),t.jsxs("span",{className:"text-white text-sm font-medium flex-1 truncate text-left",children:[e.username,e.isBot&&" ğŸ¤–",e.id===m&&b({en:" (You)",vi:" (Báº¡n)"})]}),e.inJail&&t.jsxs("span",{className:"text-xs",children:["ğŸ”’ ",b({en:"in jail",vi:"trong tÃ¹"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[t.jsx(l,{className:"w-3 h-3"}),t.jsx("span",{className:"font-mono",children:e.money.toLocaleString()}),t.jsx(r,{className:"w-3 h-3 ml-2"}),t.jsx("span",{children:a.length})]})]},s)})})]}),"playing"===u.gamePhase&&B>=0&&m&&t.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[t.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:b({en:"My Properties",vi:"TÃ i sáº£n cá»§a tÃ´i"})}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[h.getPlayerProperties(m).map(e=>{const s=d[e.spaceId];return t.jsxs("div",{className:"px-2 py-1 rounded text-xs text-white cursor-pointer hover:brightness-110 transition-all",style:{backgroundColor:s?.color?x(s.color):"#4B5563"},onClick:()=>C(s||null),title:b({en:s?.name||"",vi:s?.nameVi||""})||"",children:[(b({en:s?.name||"",vi:s?.nameVi||""})||"").substring(0,8),e.houses>0&&t.jsx("span",{className:"ml-1",children:5===e.houses?"ğŸ¨":"ğŸ ".repeat(e.houses)})]},e.spaceId)}),0===h.getPlayerProperties(m).length&&t.jsx("p",{className:"text-gray-400 text-xs",children:b({en:"No properties yet",vi:"ChÆ°a cÃ³ tÃ i sáº£n nÃ o"})})]})]}),t.jsxs("div",{className:"bg-slate-800 rounded-lg p-2 w-full flex flex-col transition-all duration-300 "+(k?"h-40 lg:h-56":"h-auto"),children:[t.jsxs("h3",{onClick:()=>I(!k),className:"text-white font-bold text-xs sticky top-0 bg-slate-800 z-10 flex items-center justify-between cursor-pointer hover:text-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{children:k?"â–¼":"â–¶"}),t.jsx("span",{children:b({en:"History",vi:"Lá»‹ch sá»­"})})]}),t.jsx("span",{className:"text-[10px] font-normal text-gray-400",children:g?.length||0})]}),k&&t.jsxs("div",{className:"flex-1 overflow-y-auto space-y-0.5 pr-1 font-mono custom-scrollbar mt-1",children:[(g||[]).slice().reverse().map(e=>t.jsxs("div",{className:"px-1.5 py-0.5 rounded-sm border-l-2 text-[10px] leading-tight flex items-baseline "+("alert"===e.type?"bg-red-900/20 border-red-500 text-red-200":"action"===e.type?"bg-blue-900/20 border-blue-500 text-blue-200":"bg-slate-700/30 border-gray-500 text-gray-400"),children:[t.jsx("span",{className:"opacity-40 mr-1.5 min-w-[38px] flex-shrink-0",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),t.jsx("span",{className:"break-words text-left",children:b(e.message)})]},e.id)),(!g||0===g.length)&&t.jsx("p",{className:"text-gray-600 text-[10px] text-center italic mt-2",children:b({en:"No history yet",vi:"ChÆ°a cÃ³ lá»‹ch sá»­"})})]})]})]}),(()=>{if(!N)return null;const e=u.properties.find(e=>e.spaceId===N.id),s=e?u.players.find(t=>t.id===e.ownerId):null,n=e?.ownerId===m;return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",onClick:()=>C(null),children:t.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 max-w-sm w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[N.color&&t.jsx("div",{className:"h-8 rounded-t-lg -mx-4 -mt-4 mb-3",style:{backgroundColor:x(N.color)}}),t.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:b({en:N.name,vi:N.nameVi})}),t.jsx("p",{className:"text-gray-400 text-sm mb-3",children:b({en:N.name,vi:N.nameVi})}),N.price&&t.jsxs("div",{className:"text-gray-300 space-y-1 text-sm",children:[t.jsxs("p",{children:["ğŸ’° ",b({en:"Price",vi:"GiÃ¡"}),":"," ",N.price.toLocaleString(),"Ä‘"]}),N.rent&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:["ğŸ  ",b({en:"Rent",vi:"ThuÃª"}),":"," ",N.rent[0].toLocaleString(),"Ä‘"]}),t.jsxs("p",{children:[b({en:"With houses:",vi:"Vá»›i nhÃ :"})," ",N.rent.slice(1,5).map(e=>e.toLocaleString()).join(" / "),"Ä‘"]}),t.jsxs("p",{children:["ğŸ¨ ",b({en:"Hotel",vi:"KhÃ¡ch sáº¡n"}),":"," ",N.rent[5]?.toLocaleString(),"Ä‘"]})]}),N.houseCost&&t.jsxs("p",{children:["ğŸ”¨ ",b({en:"House cost",vi:"GiÃ¡ nhÃ "}),":"," ",N.houseCost.toLocaleString(),"Ä‘"]})]}),s&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s.color}}),t.jsxs("span",{className:"text-white",children:[b({en:"Owned by",vi:"Sá»Ÿ há»¯u bá»Ÿi"}),": ",s.username]})]}),e&&e.houses>0&&t.jsxs("p",{className:"text-gray-300 text-sm mt-1",children:["ğŸ "," ",5===e.houses?b({en:"Hotel",vi:"KhÃ¡ch sáº¡n"}):`${e.houses} ${b({en:"house(s)",vi:"nhÃ "})}`]})]}),n&&t.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-600 flex flex-col gap-2",children:[t.jsx("h4",{className:"text-white text-xs font-bold uppercase mb-1",children:b({en:"Manage Property",vi:"Quáº£n lÃ½ tÃ i sáº£n"})}),e&&e.houses>0&&N.houseCost&&t.jsxs("button",{onClick:()=>h.requestSellHouse(N.id),className:"w-full px-3 py-1.5 bg-orange-700 hover:bg-orange-600 text-white rounded text-xs",children:[b({en:"Sell House",vi:"BÃ¡n nhÃ "})," (+",(N.houseCost/2).toLocaleString(),"Ä‘)"]}),e&&!e.mortgaged&&0===e.houses&&N.price&&t.jsxs("button",{onClick:()=>h.requestMortgage(N.id),className:"w-full px-3 py-1.5 bg-red-700 hover:bg-red-600 text-white rounded text-xs",children:[b({en:"Mortgage",vi:"Tháº¿ cháº¥p"})," (+",(N.price/2).toLocaleString(),"Ä‘)"]}),e&&e.mortgaged&&N.price&&t.jsxs("button",{onClick:()=>h.requestUnmortgage(N.id),className:"w-full px-3 py-1.5 bg-blue-700 hover:bg-blue-600 text-white rounded text-xs",children:[b({en:"Unmortgage",vi:"Chuá»™c láº¡i"})," (-",(N.price/2*1.1).toLocaleString(),"Ä‘)"]}),t.jsxs("div",{className:"pt-2",children:[t.jsx("p",{className:"text-gray-400 text-xs mb-1",children:b({en:"Sell to Player",vi:"BÃ¡n cho ngÆ°á»i khÃ¡c"})}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("select",{className:"flex-1 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"trade-player-select",children:u.players.filter(e=>e.id&&e.id!==m).map(e=>t.jsx("option",{value:e.id,children:e.username},e.id))}),t.jsx("input",{type:"number",placeholder:"Price",className:"w-16 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"trade-price-input"}),t.jsx("button",{onClick:()=>{const e=document.getElementById("trade-player-select"),t=document.getElementById("trade-price-input"),s=e.value,n=parseInt(t.value);s&&!isNaN(n)&&n>0&&(h.requestOfferTrade(s,N.id,n),C(null))},className:"px-2 py-1 bg-green-700 hover:bg-green-600 text-white rounded text-xs",children:"OK"})]})]})]}),!n&&e&&"bank"!==e.ownerId&&t.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-600 flex flex-col gap-2",children:[t.jsx("p",{className:"text-gray-400 text-xs mb-1",children:b({en:"Offer to Buy",vi:"Äá» nghá»‹ mua láº¡i"})}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("input",{type:"number",placeholder:"Price",className:"flex-1 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"buy-price-input"}),t.jsx("button",{onClick:()=>{const t=document.getElementById("buy-price-input"),s=parseInt(t.value);!isNaN(s)&&s>0&&(h.requestOfferTrade(e.ownerId,N.id,s),C(null))},className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white rounded text-xs",children:b({en:"Send Offer",vi:"Gá»­i Ä‘á» nghá»‹"})})]})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[n&&N.color&&N.houseCost&&t.jsx("div",{className:"flex-1",children:(()=>{const e=h.canBuildHouse(m,N.id);return t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("button",{disabled:!e.allowed||!R,onClick:()=>{e.allowed&&R&&(h.requestBuildHouse(N.id),C(null))},className:"w-full px-3 py-2 rounded-lg text-sm transition-colors "+(e.allowed&&R?"bg-green-600 hover:bg-green-500 text-white":"bg-green-900/50 text-gray-400 cursor-not-allowed"),children:[b({en:"Build House",vi:"XÃ¢y nhÃ "})," (",N.houseCost?.toLocaleString(),"Ä‘)"]}),!e.allowed&&t.jsx("p",{className:"text-[10px] text-red-400 text-center leading-tight",children:b(e.reason)})]})})()}),t.jsx("button",{onClick:()=>C(null),className:"flex-1 px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-sm",children:b({en:"Close",vi:"ÄÃ³ng"})})]})]})})})()]})}export{m as default};
